import{q as S,s as q,r as C,c as s,o as r,b as d,u as a,h as V,w as p,a as e,x as N,d as f,F as m,e as y,t as l,v as k,n as T,g as c,i as D}from"./app-JQL7kpkv.js";import{_ as $}from"./AuthenticatedLayout-B92UnL5N.js";import{_ as b}from"./InputLabel-jQaTK5g0.js";import{_ as B}from"./PrimaryButton-BZZjGzCv.js";import{D as P}from"./DangerButton-B5vHJ_xi.js";import{_ as F}from"./Modal-DRFJQBFO.js";import{_ as G}from"./SecondaryButton-BZnIH0Cw.js";import{r as M}from"./TrashIcon-BB3dB1YG.js";import"./ApplicationLogo-B_nlfuyF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"py-12"},j={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-3 gap-8"},I={class:"lg:col-span-1"},z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6"},L=["value"],O=["value"],H=["value"],J={class:"flex items-center justify-end"},K={class:"lg:col-span-2"},Q={key:0,class:"mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md shadow-md",role:"alert"},W={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6 text-gray-900 dark:text-gray-100"},Y={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ee={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},te={key:0},oe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ae={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ie=["onClick"],de={class:"p-6"},le={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},ne={class:"font-bold"},ue={class:"font-bold"},pe={class:"mt-6 flex justify-end"},we={__name:"Index",props:{requisitos:Array,cooperativas:Array,tipos_proceso:Array,tipos_documento:Array},setup(n){var w;const x=n,h=S(),i=q({cooperativa_id:null,tipo_proceso_id:((w=x.tipos_proceso[0])==null?void 0:w.id)||null,tipo_documento_requerido:x.tipos_documento[0]}),R=()=>{i.post(route("requisitos.store"),{onSuccess:()=>i.reset("tipo_documento_requerido")})},_=C(!1),u=C(null),A=g=>{u.value=g,_.value=!0},E=()=>{const g=x.requisitos.find(t=>t.id===u.value.id);q({}).delete(route("requisitos.destroy",g.id),{preserveScroll:!0,onSuccess:()=>v()})},v=()=>{_.value=!1,u.value=null};return(g,t)=>(r(),s(m,null,[d(a(V),{title:"Gestión de Requisitos"}),d($,null,{header:p(()=>t[3]||(t[3]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gestión de Requisitos de Documentos ",-1)])),default:p(()=>[e("div",U,[e("div",j,[e("div",I,[e("div",z,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Crear Nueva Regla ",-1)),t[7]||(t[7]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Define qué documentos son obligatorios para cada tipo de proceso. ",-1)),e("form",{onSubmit:N(R,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[d(b,{for:"cooperativa_id",value:"Aplicar a Cooperativa (Opcional)"}),f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a(i).cooperativa_id=o),id:"cooperativa_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[t[4]||(t[4]=e("option",{value:null},"Todas las Cooperativas",-1)),(r(!0),s(m,null,y(n.cooperativas,o=>(r(),s("option",{key:o.id,value:o.id},l(o.nombre),9,L))),128))],512),[[k,a(i).cooperativa_id]])]),e("div",null,[d(b,{for:"tipo_proceso",value:"Para el Tipo de Proceso"}),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a(i).tipo_proceso_id=o),id:"tipo_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[(r(!0),s(m,null,y(n.tipos_proceso,o=>(r(),s("option",{key:o.id,value:o.id},l(o.nombre),9,O))),128))],512),[[k,a(i).tipo_proceso_id]])]),e("div",null,[d(b,{for:"tipo_documento_requerido",value:"El Documento Requerido es"}),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a(i).tipo_documento_requerido=o),id:"tipo_documento_requerido",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[(r(!0),s(m,null,y(n.tipos_documento,o=>(r(),s("option",{key:o,value:o},l(o),9,H))),128))],512),[[k,a(i).tipo_documento_requerido]])]),e("div",J,[d(B,{class:T({"opacity-25":a(i).processing}),disabled:a(i).processing},{default:p(()=>t[5]||(t[5]=[c(" Guardar Regla ",-1)])),_:1,__:[5]},8,["class","disabled"])])],32)])]),e("div",K,[a(h).props.flash.success?(r(),s("div",Q,[t[8]||(t[8]=e("p",{class:"font-bold"},"¡Éxito!",-1)),e("p",null,l(a(h).props.flash.success),1)])):D("",!0),e("div",W,[e("div",X,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium mb-4"},"Reglas Actuales",-1)),e("div",Y,[e("table",Z,[t[10]||(t[10]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Aplica a"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Tipo de Proceso"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Documento Requerido"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Eliminar")])])],-1)),e("tbody",ee,[n.requisitos.length===0?(r(),s("tr",te,t[9]||(t[9]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"}," No hay requisitos definidos. ",-1)]))):(r(!0),s(m,{key:1},y(n.requisitos,o=>(r(),s("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",oe,l(o.cooperativa?o.cooperativa.nombre:"Todas"),1),e("td",se,l(o.tipo_proceso.nombre),1),e("td",re,l(o.tipo_documento_requerido),1),e("td",ae,[e("button",{onClick:ce=>A(o),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[d(a(M),{class:"h-5 w-5"})],8,ie)])]))),128))])])])])])])])]),d(F,{show:_.value,onClose:v},{default:p(()=>[e("div",de,[t[17]||(t[17]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," ¿Eliminar Requisito? ",-1)),u.value?(r(),s("p",le,[t[12]||(t[12]=c(" Estás a punto de eliminar la regla que requiere el documento ",-1)),e("span",ne,l(u.value.tipo_documento_requerido),1),t[13]||(t[13]=c(" para los casos de tipo ",-1)),e("span",ue,l(u.value.tipo_proceso.nombre),1),t[14]||(t[14]=c(". Esta acción no se puede deshacer. ",-1))])):D("",!0),e("div",pe,[d(G,{onClick:v},{default:p(()=>t[15]||(t[15]=[c(" Cancelar ",-1)])),_:1,__:[15]}),d(P,{class:"ms-3",onClick:E},{default:p(()=>t[16]||(t[16]=[c(" Sí, Eliminar ",-1)])),_:1,__:[16]})])])]),_:1},8,["show"])]),_:1})],64))}};export{we as default};
