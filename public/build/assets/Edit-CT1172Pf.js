import{q as C,l as N,s as h,c as r,o as n,b as i,u as s,h as A,w as p,a as t,x as $,i as f,F as w,e as E,t as v,n as S,g as q}from"./app-D6fBSztB.js";import{_ as B}from"./AuthenticatedLayout-_MACS7lg.js";import{_ as m}from"./InputError-HqrJXC_t.js";import{_ as d}from"./InputLabel-B78_-JR2.js";import{_ as F}from"./PrimaryButton-CvtAZ7tP.js";import{_}from"./TextInput-Bef9WMy8.js";import{_ as g}from"./Checkbox-BU1XqNcn.js";import{_ as V}from"./SelectInput-n1IaMQnu.js";import{s as P}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-DmM8riIB.js";import"./ApplicationLogo-Dh4pLsNN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"font-semibold text-xl text-gray-800 leading-tight"},z={class:"py-12"},D={class:"max-w-2xl mx-auto sm:px-6 lg:px-8"},O={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6 md:p-8"},T={key:0,class:"text-xs text-gray-500 mt-1"},G={key:0},L={key:1},M=["value"],H={class:"border-t pt-6"},I={class:"mt-4 space-y-3"},J={class:"flex items-center"},K={class:"flex items-center"},Q={class:"block mt-4"},W={class:"flex items-center"},X={key:0,class:"text-xs text-gray-500 mt-1"},Y={class:"flex items-center justify-end mt-4"},ue={__name:"Edit",props:{user:Object,allCooperativas:Array,personas:Array},setup(u){const l=u,y=C().props.auth.user,c=N(()=>l.user.id===y.id),a=h({_method:"patch",name:l.user.name,email:l.user.email,tipo_usuario:l.user.tipo_usuario,estado_activo:l.user.estado_activo,password:"",password_confirmation:"",cooperativas:l.user.cooperativas.map(b=>b.id),persona_id:l.user.persona_id,preferencias_notificacion:l.user.preferencias_notificacion||{email:!0,"in-app":!0}}),k=()=>{a.post(route("admin.users.update",l.user.id),{preserveScroll:!0})};return(b,e)=>(n(),r(w,null,[i(s(A),{title:"Editar Usuario: "+u.user.name},null,8,["title"]),i(B,null,{header:p(()=>[t("h2",j," Editando Usuario: "+v(u.user.name),1)]),default:p(()=>[t("div",z,[t("div",D,[t("div",O,[t("div",R,[t("form",{onSubmit:$(k,["prevent"]),class:"space-y-6"},[t("div",null,[i(d,{for:"name",value:"Nombre Completo"}),i(_,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s(a).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(a).name=o),required:""},null,8,["modelValue"]),i(m,{message:s(a).errors.name},null,8,["message"])]),t("div",null,[i(d,{for:"email",value:"Email"}),i(_,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(a).email,"onUpdate:modelValue":e[1]||(e[1]=o=>s(a).email=o),required:""},null,8,["modelValue"]),i(m,{message:s(a).errors.email},null,8,["message"])]),t("div",null,[i(d,{for:"tipo_usuario",value:"Tipo de Usuario"}),i(V,{modelValue:s(a).tipo_usuario,"onUpdate:modelValue":e[2]||(e[2]=o=>s(a).tipo_usuario=o),id:"tipo_usuario",class:"mt-1 block w-full",disabled:c.value},{default:p(()=>e[10]||(e[10]=[t("option",{value:"admin"},"Administrador",-1),t("option",{value:"abogado"},"Abogado",-1),t("option",{value:"gestor"},"Gestor",-1),t("option",{value:"cliente"},"Cliente",-1)])),_:1,__:[10]},8,["modelValue","disabled"]),c.value?(n(),r("p",T,"No puedes cambiar tu propio rol.")):f("",!0),i(m,{message:s(a).errors.tipo_usuario},null,8,["message"])]),s(a).tipo_usuario==="abogado"||s(a).tipo_usuario==="gestor"?(n(),r("div",G,[i(d,{value:"Cooperativas Asignadas"}),i(s(P),{modelValue:s(a).cooperativas,"onUpdate:modelValue":e[3]||(e[3]=o=>s(a).cooperativas=o),options:u.allCooperativas.map(o=>o.id),"custom-label":o=>{var x;return(x=u.allCooperativas.find(U=>U.id===o))==null?void 0:x.nombre},multiple:!0,placeholder:"Seleccione una o más cooperativas"},null,8,["modelValue","options","custom-label"]),i(m,{message:s(a).errors.cooperativas},null,8,["message"])])):f("",!0),s(a).tipo_usuario==="cliente"?(n(),r("div",L,[i(d,{for:"persona_id",value:"Persona Asociada a esta Cuenta"}),i(V,{modelValue:s(a).persona_id,"onUpdate:modelValue":e[4]||(e[4]=o=>s(a).persona_id=o),id:"persona_id",class:"mt-1 block w-full"},{default:p(()=>[e[11]||(e[11]=t("option",{value:null},"Ninguna / Desvincular",-1)),(n(!0),r(w,null,E(u.personas,o=>(n(),r("option",{key:o.id,value:o.id},v(o.nombre_completo)+" ("+v(o.numero_documento)+")",9,M))),128))]),_:1,__:[11]},8,["modelValue"]),i(m,{message:s(a).errors.persona_id,class:"mt-2"},null,8,["message"])])):f("",!0),t("div",H,[e[14]||(e[14]=t("h3",{class:"text-base font-semibold text-gray-900"},"Preferencias de Notificación",-1)),t("div",I,[t("label",J,[i(g,{checked:s(a).preferencias_notificacion["in-app"],"onUpdate:checked":e[5]||(e[5]=o=>s(a).preferencias_notificacion["in-app"]=o)},null,8,["checked"]),e[12]||(e[12]=t("span",{class:"ms-2 text-sm text-gray-600"},"Recibir notificaciones en la aplicación (campana)",-1))]),t("label",K,[i(g,{checked:s(a).preferencias_notificacion.email,"onUpdate:checked":e[6]||(e[6]=o=>s(a).preferencias_notificacion.email=o)},null,8,["checked"]),e[13]||(e[13]=t("span",{class:"ms-2 text-sm text-gray-600"},"Recibir notificaciones por correo electrónico",-1))])])]),t("div",null,[i(d,{for:"password",value:"Nueva Contraseña (Opcional)"}),i(_,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:s(a).password,"onUpdate:modelValue":e[7]||(e[7]=o=>s(a).password=o)},null,8,["modelValue"]),i(m,{message:s(a).errors.password},null,8,["message"])]),t("div",null,[i(d,{for:"password_confirmation",value:"Confirmar Nueva Contraseña"}),i(_,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:s(a).password_confirmation,"onUpdate:modelValue":e[8]||(e[8]=o=>s(a).password_confirmation=o)},null,8,["modelValue"])]),t("div",Q,[t("label",W,[i(g,{checked:s(a).estado_activo,"onUpdate:checked":e[9]||(e[9]=o=>s(a).estado_activo=o),disabled:c.value},null,8,["checked","disabled"]),e[15]||(e[15]=t("span",{class:"ms-2 text-sm text-gray-600"},"Usuario Activo",-1))]),c.value?(n(),r("p",X,"No puedes desactivar tu propia cuenta.")):f("",!0)]),t("div",Y,[i(F,{class:S({"opacity-25":s(a).processing}),disabled:s(a).processing},{default:p(()=>e[16]||(e[16]=[q(" Actualizar Usuario ",-1)])),_:1,__:[16]},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{ue as default};
