import{r as F,c as r,o as s,b as n,u,h as V,w as c,a as e,d as x,F as m,e as f,t as i,v as h,f as k,g as _,i as b,B as p,p as v,n as M,j}from"./app-JQL7kpkv.js";import{_ as L}from"./AuthenticatedLayout-B92UnL5N.js";import{_ as N}from"./PrimaryButton-BZZjGzCv.js";import{_ as U}from"./SecondaryButton-BZnIH0Cw.js";import{r as B}from"./ArrowPathIcon-Hs7No5Pc.js";import{r as H}from"./LockClosedIcon-DogrBbQa.js";import{r as w}from"./ArrowDownTrayIcon-1p1GyGXr.js";import"./ApplicationLogo-B_nlfuyF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-8"},P={class:"p-6"},E={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6"},S=["value"],q={class:"flex items-end space-x-2"},z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6 text-gray-900 dark:text-gray-100"},I={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},J={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},K={key:0},Q={class:"px-6 py-4 whitespace-nowrap"},R={class:"flex items-center"},W={class:"text-sm font-medium text-gray-900 dark:text-white"},Y={key:1,class:"text-sm text-gray-400"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},te={key:0,class:"capitalize"},ae={key:1},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},re={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4"},oe=["href"],ie=["href"],de={key:0,class:"mt-6 flex justify-between items-center"},le={class:"text-sm text-gray-700 dark:text-gray-400"},ne={class:"flex flex-wrap"},ue=["innerHTML"],_e={__name:"Index",props:{documentos:Object,usuarios:Array,filtros:Object},setup(l){const g=l,d=F({usuario_id:g.filtros.usuario_id||"",tipo_plantilla:g.filtros.tipo_plantilla||"",fecha_desde:g.filtros.fecha_desde||"",fecha_hasta:g.filtros.fecha_hasta||""}),y=()=>{const o={...d.value};Object.keys(o).forEach(t=>{o[t]||delete o[t]}),j.get(route("documentos-generados.index"),o,{preserveState:!0,replace:!0})},C=()=>{d.value={usuario_id:"",tipo_plantilla:"",fecha_desde:"",fecha_hasta:""},y()},D=o=>{if(!o)return"N/A";const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(o).toLocaleString("es-CO",t)};return(o,t)=>(s(),r(m,null,[n(u(V),{title:"Auditoría de Documentos"}),n(L,null,{header:c(()=>t[4]||(t[4]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Vista de Halcón: Auditoría de Documentos Generados ",-1)])),default:c(()=>[e("div",O,[e("div",A,[e("div",$,[e("div",P,[t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Filtros de Búsqueda",-1)),e("div",E,[e("div",null,[t[6]||(t[6]=e("label",{for:"usuario_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Usuario",-1)),x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.usuario_id=a),id:"usuario_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[t[5]||(t[5]=e("option",{value:""},"Todos",-1)),(s(!0),r(m,null,f(l.usuarios,a=>(s(),r("option",{key:a.id,value:a.id},i(a.name),9,S))),128))],512),[[h,d.value.usuario_id]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"tipo_plantilla",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipo Plantilla",-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>d.value.tipo_plantilla=a),id:"tipo_plantilla",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},t[7]||(t[7]=[e("option",{value:""},"Todos",-1),e("option",{value:"demanda"},"Demanda",-1),e("option",{value:"carta"},"Carta",-1),e("option",{value:"medida cautelar"},"Medida Cautelar",-1),e("option",{value:"notificación"},"Notificación",-1),e("option",{value:"otros"},"Otros",-1)]),512),[[h,d.value.tipo_plantilla]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"fecha_desde",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Desde",-1)),x(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=a=>d.value.fecha_desde=a),id:"fecha_desde",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[k,d.value.fecha_desde]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"fecha_hasta",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Hasta",-1)),x(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=a=>d.value.fecha_hasta=a),id:"fecha_hasta",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[k,d.value.fecha_hasta]])]),e("div",q,[n(N,{onClick:y,class:"w-full justify-center h-10"},{default:c(()=>t[11]||(t[11]=[_("Filtrar",-1)])),_:1,__:[11]}),n(U,{onClick:C,class:"w-full justify-center h-10",title:"Limpiar Filtros"},{default:c(()=>[n(u(B),{class:"h-5 w-5"})]),_:1})])])])]),e("div",z,[e("div",G,[e("div",I,[e("table",X,[t[14]||(t[14]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Documento / Caso"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Usuario Generador"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Plantilla Usada"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Fecha de Creación"),e("th",{class:"relative px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",J,[l.documentos.data.length===0?(s(),r("tr",K,t[13]||(t[13]=[e("td",{colspan:"5",class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"},"No se encontraron documentos con los filtros aplicados.",-1)]))):(s(!0),r(m,{key:1},f(l.documentos.data,a=>(s(),r("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",Q,[e("div",R,[a.es_confidencial?(s(),p(u(H),{key:0,class:"h-5 w-5 text-yellow-500 mr-3 flex-shrink-0",title:"Documento Confidencial"})):b("",!0),e("div",null,[e("div",W,i(a.nombre_base)+".docx",1),a.caso?(s(),p(u(v),{key:0,href:o.route("casos.show",a.caso.id),class:"text-sm text-indigo-500 hover:underline"},{default:c(()=>[_("Caso #"+i(a.caso.id)+" - "+i(a.caso.deudor.nombre_completo),1)]),_:2},1032,["href"])):(s(),r("span",Y,"Caso eliminado"))])])]),e("td",Z,i(a.usuario.name),1),e("td",ee,[a.plantilla?(s(),r("span",te,i(a.plantilla.nombre)+" (v"+i(a.version_plantilla)+")",1)):(s(),r("span",ae,"Plantilla Eliminada"))]),e("td",se,i(D(a.created_at)),1),e("td",re,[e("a",{href:o.route("documentos.descargar.docx",a.id),class:"inline-flex items-center text-blue-600 hover:text-blue-800",title:"Descargar DOCX"},[n(u(w),{class:"h-5 w-5"})],8,oe),e("a",{href:o.route("documentos.descargar.pdf",a.id),class:"inline-flex items-center text-red-600 hover:text-red-800",title:"Descargar PDF"},[n(u(w),{class:"h-5 w-5"})],8,ie)])]))),128))])])]),l.documentos.links.length>3?(s(),r("div",de,[e("div",le,"Mostrando "+i(l.documentos.from)+" a "+i(l.documentos.to)+" de "+i(l.documentos.total)+" resultados",1),e("div",ne,[(s(!0),r(m,null,f(l.documentos.links,(a,T)=>(s(),r(m,{key:T},[a.url===null?(s(),r("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:a.label},null,8,ue)):(s(),p(u(v),{key:1,class:M(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-white dark:bg-gray-600":a.active}]),href:a.url,innerHTML:a.label},null,8,["class","href","innerHTML"]))],64))),128))])])):b("",!0)])])])])]),_:1})],64))}};export{_e as default};
