import{c as i,o as l,a as e,r as k,b as o,u as g,h as w,w as c,d as m,F as x,e as y,t as d,v as C,f,g as b,i as j,n as N,j as V}from"./app-vy-57Nhv.js";import{_ as D}from"./AuthenticatedLayout-9dgdh7FW.js";import{_ as E}from"./Pagination-BxCd-o-z.js";import{_ as F}from"./PrimaryButton-fsUrTFHq.js";import{_ as O}from"./SecondaryButton-BLV5g1jk.js";import{r as U}from"./ArrowPathIcon-DD2iliN_.js";import"./ApplicationLogo-jkf0VN9B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function T(n,u){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const A={class:"py-12"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},S={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},$={class:"p-6"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},I=["value"],M={class:"mt-6 flex justify-end space-x-4"},z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6"},H={class:"overflow-x-auto"},P={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},q={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Z={key:0},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},R={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 text-sm text-gray-700 dark:text-gray-300 max-w-md"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ie={__name:"Index",props:{eventos:Object,usuarios:Array,filtros:Object},setup(n){const u=n,a=k({user_id:u.filtros.user_id||"",evento:u.filtros.evento||"",fecha_desde:u.filtros.fecha_desde||"",fecha_hasta:u.filtros.fecha_hasta||""}),p=()=>{const r={...a.value};Object.keys(r).forEach(t=>{r[t]||delete r[t]}),V.get(route("admin.auditoria.index"),r,{preserveState:!0,replace:!0})},h=()=>{a.value={user_id:"",evento:"",fecha_desde:"",fecha_hasta:""},p()},v=r=>{if(!r)return"N/A";const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(r).toLocaleString("es-CO",t)},_={alta:"bg-red-100 text-red-800 border-red-500",media:"bg-yellow-100 text-yellow-800 border-yellow-500",baja:"bg-blue-100 text-blue-800 border-blue-500"};return(r,t)=>(l(),i(x,null,[o(g(w),{title:"Auditoría del Sistema"}),o(D,null,{header:c(()=>t[4]||(t[4]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Panel de Auditoría Global ",-1)])),default:c(()=>[e("div",A,[e("div",B,[e("div",S,[e("div",$,[t[12]||(t[12]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Filtrar Eventos",-1)),e("div",L,[e("div",null,[t[6]||(t[6]=e("label",{for:"filtro_usuario",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Usuario",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.user_id=s),id:"filtro_usuario",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[t[5]||(t[5]=e("option",{value:""},"Todos",-1)),(l(!0),i(x,null,y(n.usuarios,s=>(l(),i("option",{key:s.id,value:s.id},d(s.name),9,I))),128))],512),[[C,a.value.user_id]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"filtro_evento",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tipo de Evento",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.evento=s),id:"filtro_evento",placeholder:"Ej: LOGIN, DOCUMENTO",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[f,a.value.evento]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"fecha_desde",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Desde",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.fecha_desde=s),id:"fecha_desde",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[f,a.value.fecha_desde]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"fecha_hasta",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Hasta",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.fecha_hasta=s),id:"fecha_hasta",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[f,a.value.fecha_hasta]])])]),e("div",M,[o(O,{onClick:h,class:"flex items-center"},{default:c(()=>[o(g(U),{class:"h-5 w-5 mr-2"}),t[10]||(t[10]=b("Limpiar",-1))]),_:1,__:[10]}),o(F,{onClick:p,class:"flex items-center"},{default:c(()=>[o(g(T),{class:"h-5 w-5 mr-2"}),t[11]||(t[11]=b("Buscar",-1))]),_:1,__:[11]})])])]),e("div",z,[e("div",G,[e("div",H,[e("table",P,[t[14]||(t[14]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha y Hora"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Usuario"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Evento"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Criticidad"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Descripción"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"IP")])],-1)),e("tbody",q,[n.eventos.data.length===0?(l(),i("tr",Z,t[13]||(t[13]=[e("td",{colspan:"6",class:"px-6 py-10 text-center text-gray-500"},"No se encontraron eventos con los filtros aplicados.",-1)]))):j("",!0),(l(!0),i(x,null,y(n.eventos.data,s=>(l(),i("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",J,d(v(s.created_at)),1),e("td",K,d(s.usuario?s.usuario.name:"Sistema"),1),e("td",Q,d(s.evento),1),e("td",R,[e("span",{class:N(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full capitalize border",_[s.criticidad]])},d(s.criticidad),3)]),e("td",W,d(s.descripcion_breve),1),e("td",X,d(s.direccion_ip),1)]))),128))])])]),o(E,{class:"mt-6",links:n.eventos.links},null,8,["links"])])])])])]),_:1})],64))}};export{ie as default};
