import{l as S,r as O,s as F,z as lt,k as dt,c as n,o as i,b as d,u as a,h as nt,w as R,a as t,i as c,g as y,p as Me,t as l,n as V,F as M,e as Q,x as G,d as w,f as C,v as xe}from"./app-vy-57Nhv.js";import{_ as it}from"./AuthenticatedLayout-9dgdh7FW.js";import{_ as ye}from"./Pagination-BxCd-o-z.js";import{_ as L}from"./Modal-CcE9rne-.js";import{_ as x}from"./InputError--M3O5c6A.js";import{_ as ut}from"./PrimaryButton-fsUrTFHq.js";import{_ as mt}from"./SecondaryButton-BLV5g1jk.js";import{_ as D}from"./InputLabel-CuoiynRR.js";import{_ as z}from"./TextInput-CHd6m527.js";import{_ as gt}from"./Textarea-hTDVgN7r.js";import{o as bt}from"./index-51jR4Oxg.js";import"./ApplicationLogo-jkf0VN9B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ct={class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4"},pt={class:"text-sm text-gray-500 dark:text-gray-400"},xt={class:"font-mono"},yt={class:"flex items-center gap-2 flex-wrap"},ft=["href"],vt=["href"],kt={class:"py-8"},_t={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},ht={key:0,class:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 p-4 rounded-md shadow-sm"},wt={class:"flex"},Ct={class:"ml-3"},At={class:"text-sm font-semibold text-amber-800 dark:text-amber-300"},St={class:"mt-2 text-sm text-amber-700 dark:text-amber-400"},Ot={key:0,class:"mt-1 italic"},Mt={class:"grid grid-cols-2 md:grid-cols-4 gap-6"},Nt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5"},Et={class:"mt-1 text-2xl font-bold text-gray-900 dark:text-gray-100"},It={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5"},Rt={class:"mt-1 text-2xl font-bold text-blue-600 dark:text-blue-400"},Vt={key:0,class:"text-xs text-red-600 dark:text-red-400 font-semibold mt-1"},Tt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5"},Pt={class:"mt-1 text-2xl font-bold text-emerald-600 dark:text-emerald-400"},Dt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5"},jt={class:"mt-1 text-2xl font-bold text-red-600 dark:text-red-400"},Ut={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ft={class:"lg:col-span-2 space-y-6"},$t={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg"},Gt={class:"p-4 sm:p-6"},Lt={class:"border-b border-gray-200 dark:border-gray-700"},zt={class:"-mb-px flex space-x-4 sm:space-x-6 overflow-x-auto","aria-label":"Tabs"},Bt={class:"mt-6"},Ht={key:0,class:"space-y-4"},Xt={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},Jt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Yt={class:"flex-1"},Kt={class:"font-bold text-lg text-gray-800 dark:text-gray-100"},Qt={class:"text-sm text-gray-500"},Wt={class:"w-full sm:w-auto grid grid-cols-2 sm:flex sm:items-center gap-4 text-right"},Zt={class:"sm:pr-4 sm:border-r dark:border-gray-600"},qt={class:"font-mono"},eo={class:"sm:pr-4 sm:border-r dark:border-gray-600"},to={class:"font-mono text-red-600"},oo={class:"sm:pr-4 sm:border-r dark:border-gray-600"},ro={class:"font-mono text-emerald-600"},ao={class:"col-span-2 sm:col-span-1"},so={class:"font-bold text-lg font-mono text-indigo-600 dark:text-indigo-400"},lo={class:"flex-shrink-0"},no=["onClick"],io={key:1},uo={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},mo={key:1,class:"space-y-4"},go={class:"flex items-start sm:items-center gap-4 p-4 flex-col sm:flex-row"},bo={class:"flex-shrink-0"},co={key:0,class:"inline-flex justify-center items-center w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300"},po={key:1,class:"inline-flex justify-center items-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300"},xo={class:"flex-1 space-y-1 w-full"},yo={class:"flex items-center gap-3 text-sm flex-wrap"},fo={class:"font-bold text-gray-800 dark:text-gray-100"},vo={class:"text-gray-500"},ko={key:0,class:"text-xs sm:text-sm text-red-700 dark:text-red-300 font-medium"},_o={key:1,class:"text-xs sm:text-sm text-red-700 dark:text-red-300 font-medium"},ho=["textContent"],wo=["href"],Co={class:"flex items-center gap-4 self-end sm:self-center"},Ao=["onClick"],So={key:0,class:"bg-emerald-50 dark:bg-gray-700/50 border-t border-emerald-200 dark:border-emerald-800 px-4 py-3 text-sm"},Oo={class:"font-semibold text-emerald-800 dark:text-emerald-300"},Mo={key:0,class:"text-gray-600 dark:text-gray-400 mt-1 italic"},No=["href"],Eo={class:"mt-6 pt-4 border-t-2 border-dashed dark:border-gray-700 text-right"},Io={class:"text-sm text-gray-500"},Ro={class:"font-bold text-gray-800 dark:text-gray-200"},Vo={key:0,class:"text-xs text-red-600 dark:text-red-400"},To={class:"text-sm text-amber-600 mt-1"},Po={class:"font-bold"},Do={key:2},jo={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Uo={key:1,class:"space-y-4"},Fo={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},$o={class:"flex items-center gap-3"},Go={class:"font-medium"},Lo={class:"text-center"},zo={class:"text-right"},Bo={class:"font-mono font-semibold text-gray-800 dark:text-gray-200"},Ho={class:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm"},Xo={class:"font-medium"},Jo={class:"md:col-span-2"},Yo={class:"text-gray-700 dark:text-gray-300 break-words"},Ko={class:"mt-3"},Qo=["href"],Wo={key:1,class:"text-xs text-gray-400"},Zo={class:"space-y-6"},qo={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg"},er={class:"p-6 space-y-4 text-sm"},tr={class:"flex justify-between"},or={class:"font-medium text-gray-800 dark:text-gray-200"},rr={class:"flex justify-between"},ar={class:"font-medium text-gray-800 dark:text-gray-200"},sr={class:"flex justify-between"},lr={class:"font-medium text-gray-800 dark:text-gray-200"},dr={key:0,class:"flex justify-between"},nr={class:"font-bold text-purple-600 dark:text-purple-400"},ir={key:1,class:"flex justify-between"},ur={class:"font-medium text-gray-800 dark:text-gray-200"},mr={key:2,class:"flex justify-between"},gr={class:"font-medium text-gray-800 dark:text-gray-200"},br={key:3,class:"flex justify-between border-t pt-4 mt-4 dark:border-gray-700"},cr={class:"font-medium text-gray-800 dark:text-gray-200"},pr={class:"flex justify-between items-center"},xr={class:"p-6 border-b dark:border-gray-700"},yr={class:"font-semibold text-lg text-gray-800 dark:text-gray-100"},fr={class:"p-6 space-y-4"},vr={class:"mt-1 text-xs text-gray-500"},kr={class:"grid grid-cols-2 gap-4"},_r={class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-end gap-3 rounded-b-xl"},hr=["disabled"],wr={class:"p-6 space-y-4"},Cr={class:"p-4 rounded-md bg-gray-50 dark:bg-gray-900/50 text-sm"},Ar={class:"font-medium text-gray-700 dark:text-gray-300"},Sr={class:"text-gray-500"},Or={class:"text-xs"},Mr={class:"mt-1 text-xs text-gray-500"},Nr={class:"grid grid-cols-2 gap-4"},Er={class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-end gap-3 rounded-b-xl"},Ir=["disabled"],Rr={class:"p-6 space-y-4"},Vr={class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-end gap-3 rounded-b-xl"},Tr=["disabled"],Pr={class:"p-6 space-y-4"},Dr={class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-end gap-3 rounded-b-xl"},jr=["disabled"],Ur={class:"p-6 space-y-4"},Fr={class:"text-sm text-gray-600 dark:text-gray-400"},$r={class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-end gap-3 rounded-b-xl"},Gr=["disabled"],Lr={class:"p-6 border-b dark:border-gray-700"},zr={class:"font-semibold text-lg text-gray-800 dark:text-gray-100"},Br={class:"p-6 space-y-6"},Hr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xr=["value"],Jr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Yr={key:1},Kr=["value"],Qr={class:"px-6 py-4 bg-gray-50 dark:bg-gray-900/50 flex items-center justify-end gap-3 rounded-b-xl"},ua={__name:"Show",props:{contrato:{type:Object,default:()=>({})},contratoOrigen:{type:Object,default:null},cliente:{type:Object,default:()=>({})},cuotas:{type:Object,default:()=>({data:[]})},pagos:{type:Object,default:()=>({data:[]})},cargos:{type:Object,default:()=>({data:[]})},total_cargos_valor:{type:Number,default:0},total_pagos_valor:{type:Number,default:0},clientes:{type:Array,default:()=>[]},modalidades:{type:Array,default:()=>[]}},setup(Ne){const s=Ne,b=o=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(Number(o||0)),$=o=>o?new Date(String(o).replace(/-/g,"/")).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"}):"N/A",j=new Date().toISOString().slice(0,10),fe=o=>{if(!o)return null;const e=new Date(String(o).replace(/-/g,"/"));return isNaN(e.getTime())?null:e},Ee=(o,e)=>{const u=fe(o),g=fe(e||new Date().toISOString().slice(0,10));if(!u||!g)return null;const p=new Date(u.getFullYear(),u.getMonth(),u.getDate()),v=new Date(g.getFullYear(),g.getMonth(),g.getDate());return Math.floor((v-p)/864e5)},Ie=S(()=>{var o,e;return((o=s.cliente)==null?void 0:o.nombre)??`ID ${(e=s.cliente)==null?void 0:e.id}`}),Re=S(()=>{const o=s.contrato||{};return String(o.modalidad||"")==="LITIS"?0:Number(o.monto_total||0)}),ve=S(()=>{var e;const o=Number((e=s.contrato)==null?void 0:e.anticipo)||0;return Math.max(0,Re.value-o)}),Ve=S(()=>Math.abs(Number(s.total_cargos_valor)||0)),ke=S(()=>Math.abs(Number(s.total_pagos_valor)||0)),B=S(()=>{var u,g;const o=(((u=s.cuotas)==null?void 0:u.data)||[]).reduce((p,v)=>p+Number(v.intereses_mora_acumulados||0),0),e=(((g=s.cargos)==null?void 0:g.data)||[]).filter(p=>String(p.tipo||"")!=="INTERES_MORA").reduce((p,v)=>p+Number(v.intereses_mora_acumulados||0),0);return o+e}),W=S(()=>Ve.value+B.value),_e=S(()=>Math.max(0,ve.value+W.value-ke.value)),Te=S(()=>{var o;return(o=s.cargos)!=null&&o.data?s.cargos.data.filter(e=>e.estado==="PENDIENTE").reduce((e,u)=>{const g=Math.abs(Number(u.monto)||0),p=String(u.tipo||"")==="INTERES_MORA"?0:Math.abs(Number(u.intereses_mora_acumulados)||0);return e+g+p},0):0}),he=o=>o!=null&&o.comprobante?route("honorarios.contratos.pagos.verComprobante",{pago_id:o.id}):null,Pe=o=>o!=null&&o.comprobante?route("honorarios.contratos.cargos.verComprobante",{cargo_id:o.id}):null,De=o=>o!=null&&o.comprobante_pago_cargo?`/storage/${o.comprobante_pago_cargo}`:null,je=o=>{var e;return(((e=s.cuotas)==null?void 0:e.data)||[]).find(u=>u.id===o)},Ue=o=>{var e;return(((e=s.cargos)==null?void 0:e.data)||[]).find(u=>u.id===o)},we=o=>{if(String((o==null?void 0:o.tipo)||"")!=="INTERES_MORA")return null;const e=(o==null?void 0:o.cuota_id)??(o==null?void 0:o.cuotaId)??(o==null?void 0:o.rel_cuota_id)??(o==null?void 0:o.origen_cuota_id)??(o==null?void 0:o.sobre_cuota_id)??(o==null?void 0:o.cuota_referencia_id),u=(o==null?void 0:o.cargo_id)??(o==null?void 0:o.cargoId)??(o==null?void 0:o.rel_cargo_id)??(o==null?void 0:o.origen_cargo_id)??(o==null?void 0:o.sobre_cargo_id)??(o==null?void 0:o.cargo_referencia_id);return e?{tipo:"CUOTA",cuota:je(e)}:u?{tipo:"CARGO",cargo:Ue(u)}:null},Fe=o=>{var v,E;const e=we(o),u=j;let g=null;(e==null?void 0:e.tipo)==="CUOTA"&&((v=e.cuota)!=null&&v.fecha_vencimiento)?g=e.cuota.fecha_vencimiento:(e==null?void 0:e.tipo)==="CARGO"&&((E=e.cargo)!=null&&E.fecha_aplicado)?g=e.cargo.fecha_aplicado:g=o==null?void 0:o.fecha_aplicado;const p=Ee(g,u);return p&&p>0?p:0},$e=o=>{var g,p,v;const e=we(o),u=Fe(o);return(e==null?void 0:e.tipo)==="CUOTA"?`Interés de mora sobre cuota #${((g=e.cuota)==null?void 0:g.numero)??((p=e.cuota)==null?void 0:p.id)}${u?` · ${u} día${u===1?"":"s"} vencida`:""}`:(e==null?void 0:e.tipo)==="CARGO"?`Interés de mora sobre cargo aplicado el ${$((v=e.cargo)==null?void 0:v.fecha_aplicado)}${u?` · ${u} día${u===1?"":"s"} vencido`:""}`:`Interés de mora${u?` · ${u} día${u===1?"":"s"} vencido`:""}`},Ce=o=>{var e;return(((e=s.pagos)==null?void 0:e.data)||[]).filter(u=>u.cuota_id===o.id).reduce((u,g)=>u+Number(g.valor||0),0)},Ge=o=>Number((o==null?void 0:o.valor)||0)+Number((o==null?void 0:o.intereses_mora_acumulados)||0),Z=o=>Math.max(0,Ge(o)-Ce(o)),Y=o=>Number((o==null?void 0:o.monto)||0)+(String((o==null?void 0:o.tipo)||"")==="INTERES_MORA"?0:Number((o==null?void 0:o.intereses_mora_acumulados)||0)),Le=o=>{var e;if(o!=null&&o.cuota_id){const u=(((e=s.cuotas)==null?void 0:e.data)||[]).find(g=>g.id===o.cuota_id);return u?`Cuota #${u.numero}`:"Cuota"}return o!=null&&o.cargo_id?"Cargo adicional":"Abono General"},q=O(!1),ee=O(null),k=F({cuota_id:null,valor:"",fecha:j,metodo:"TRANSFERENCIA",nota:"",comprobante:null}),ze=o=>{ee.value=o,k.reset(),k.cuota_id=o.id,k.valor=Z(o),k.fecha=j,q.value=!0},te=()=>{q.value=!1},Be=()=>{k.post(route("honorarios.contratos.pagar",s.contrato.id),{preserveScroll:!0,forceFormData:!0,onSuccess:te})},oe=O(!1),A=O(null),_=F({cargo_id:null,valor:"",fecha:j,metodo:"TRANSFERENCIA",nota:"",comprobante:null}),He=o=>{A.value=o,_.reset(),_.cargo_id=o.id,_.valor=Y(o),_.fecha=j,oe.value=!0},re=()=>{oe.value=!1},Xe=()=>{_.post(route("honorarios.contratos.cargos.pagar",s.contrato.id),{preserveScroll:!0,forceFormData:!0,onSuccess:re})},ae=O(!1),h=F({monto:"",descripcion:"",fecha:j,comprobante:null,fecha_inicio_intereses:""}),Je=()=>{h.reset(),h.fecha=j,ae.value=!0},se=()=>{ae.value=!1},Ye=()=>{h.post(route("honorarios.contratos.cargos.store",s.contrato.id),{preserveScroll:!0,forceFormData:!0,onSuccess:se})},le=O(!1),N=F({monto:"",descripcion:"",fecha_inicio_intereses:""}),Ke=()=>{N.reset(),le.value=!0},de=()=>{le.value=!1},Qe=()=>{N.post(route("honorarios.contratos.cerrar",s.contrato.id),{preserveScroll:!0,onSuccess:de})},ne=O(!1),T=F({monto_base_litis:"",fecha_inicio_intereses:""}),We=()=>{T.reset(),ne.value=!0},ie=()=>{ne.value=!1},Ze=()=>{T.post(route("honorarios.contratos.resolverLitis",s.contrato.id),{preserveScroll:!0,onSuccess:ie})},ue=F({}),qe=()=>{const o=s.contrato;["LITIS","CUOTA_MIXTA"].includes(o==null?void 0:o.modalidad)&&!Number(o==null?void 0:o.monto_base_litis)&&!Number(o==null?void 0:o.litis_valor_ganado)?We():Ke()},K={ACTIVO:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300",PAGOS_PENDIENTES:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300",CERRADO:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},P=O("cargos"),me=o=>{P.value=o;const e=new URL(window.location);e.searchParams.set("tab",o),window.history.replaceState({},"",e)};lt(()=>{const o=new URLSearchParams(window.location.search).get("tab");o&&["cuotas","cargos","pagos"].includes(o)&&(P.value=o)});const ge=o=>{if(!o)return null;try{const e=new URL(o,window.location.origin);return e.searchParams.set("tab",P.value),e.toString()}catch{return o}},et=S(()=>{var o;return(((o=s.cuotas)==null?void 0:o.links)||[]).map(e=>({...e,url:ge(e.url)}))}),tt=S(()=>{var o;return(((o=s.cargos)==null?void 0:o.links)||[]).map(e=>({...e,url:ge(e.url)}))}),ot=S(()=>{var o;return(((o=s.pagos)==null?void 0:o.links)||[]).map(e=>({...e,url:ge(e.url)}))}),be=O(!1),m=F({cliente_id:null,modalidad:"CUOTAS",inicio:new Date().toISOString().slice(0,10),monto_total:"",cuotas:12,anticipo:"",porcentaje_litis:"",nota:"",contrato_origen_id:null}),U=O(""),ce=O(""),rt=O(!1),Ae=O(null);S(()=>U.value?s.clientes.filter(o=>o.nombre.toLowerCase().includes(U.value.toLowerCase())).slice(0,10):s.clientes.slice(0,10)),dt(U,o=>{o!==ce.value&&(m.cliente_id=null)}),bt(Ae,()=>rt.value=!1);const at=()=>{var e,u,g,p,v,E,r;m.defaults({cliente_id:((e=s.contrato)==null?void 0:e.cliente_id)??null,modalidad:((u=s.contrato)==null?void 0:u.modalidad)??"CUOTAS",inicio:new Date().toISOString().slice(0,10),monto_total:((g=s.contrato)==null?void 0:g.monto_total)??"",cuotas:12,anticipo:((p=s.contrato)==null?void 0:p.anticipo)??"",porcentaje_litis:((v=s.contrato)==null?void 0:v.porcentaje_litis)??"",nota:`Reestructuración del contrato #${((E=s.contrato)==null?void 0:E.id)??""}.`,contrato_origen_id:((r=s.contrato)==null?void 0:r.id)??null}),m.reset();const o=s.clientes.find(f=>f.id===s.contrato.cliente_id);o?(U.value=o.nombre,ce.value=o.nombre):(U.value="",ce.value=""),be.value=!0},pe=()=>{be.value=!1},st=()=>{m.post(route("honorarios.contratos.store"),{preserveScroll:!0,onSuccess:pe})};return(o,e)=>{var u;return i(),n(M,null,[d(a(nt),{title:`Honorarios · Contrato #${(u=s.contrato)==null?void 0:u.id}`},null,8,["title"]),d(it,null,{header:R(()=>{var g,p,v,E,r,f,H,X,J,I,Se;return[t("div",ct,[t("div",null,[e[36]||(e[36]=t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Detalle del Contrato",-1)),t("p",pt,[e[34]||(e[34]=y(" Contrato ",-1)),t("span",xt,"#"+l((g=s.contrato)==null?void 0:g.id),1),e[35]||(e[35]=t("span",{class:"mx-2"},"|",-1)),t("span",{class:V(["px-2 py-0.5 rounded-full text-xs font-semibold",K[(p=s.contrato)==null?void 0:p.estado]||K.CERRADO])},l((E=(v=s.contrato)==null?void 0:v.estado)==null?void 0:E.replace("_"," ")),3)])]),t("div",yt,[d(a(Me),{href:o.route("honorarios.contratos.index"),class:"text-sm px-3 py-1.5 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 flex items-center gap-2"},{default:R(()=>e[37]||(e[37]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),y(" Volver ",-1)])),_:1,__:[37]},8,["href"]),["ACTIVO","PAGOS_PENDIENTES"].includes((r=s.contrato)==null?void 0:r.estado)?(i(),n("button",{key:0,onClick:Je,class:"text-sm px-3 py-1.5 rounded-md bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900"}," Añadir Gasto ")):c("",!0),((f=s.contrato)==null?void 0:f.estado)==="ACTIVO"?(i(),n("button",{key:1,onClick:qe,class:"text-sm px-3 py-1.5 rounded-md bg-slate-700 text-white hover:bg-slate-800"},l(["LITIS","CUOTA_MIXTA"].includes((H=s.contrato)==null?void 0:H.modalidad)&&!Number((X=s.contrato)==null?void 0:X.monto_base_litis)&&!Number((J=s.contrato)==null?void 0:J.litis_valor_ganado)?"Registrar Resultado y Cerrar":"Cerrar Contrato"),1)):c("",!0),((I=s.contrato)==null?void 0:I.estado)==="PAGOS_PENDIENTES"?(i(),n(M,{key:2},[_e.value<=0?(i(),n("button",{key:0,onClick:e[0]||(e[0]=Oe=>a(ue).post(o.route("honorarios.contratos.saldar",s.contrato.id),{preserveScroll:!0})),class:"text-sm px-3 py-1.5 rounded-md bg-emerald-600 text-white hover:bg-emerald-700"}," Saldar y Cerrar ")):c("",!0),t("button",{onClick:e[1]||(e[1]=Oe=>a(ue).post(o.route("honorarios.contratos.reabrir",s.contrato.id),{preserveScroll:!0})),class:"text-sm px-3 py-1.5 rounded-md bg-amber-600 text-white hover:bg-amber-700"}," Reabrir ")],64)):c("",!0),((Se=s.contrato)==null?void 0:Se.estado)==="CERRADO"?(i(),n("button",{key:3,onClick:e[2]||(e[2]=Oe=>a(ue).post(o.route("honorarios.contratos.reabrir",s.contrato.id),{preserveScroll:!0})),class:"text-sm px-3 py-1.5 rounded-md bg-amber-600 text-white hover:bg-amber-700"}," Reabrir ")):c("",!0),t("button",{onClick:at,class:"text-sm px-3 py-1.5 rounded-md bg-indigo-50 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-200 border border-indigo-200 dark:border-indigo-800 hover:bg-indigo-100 dark:hover:bg-indigo-900"}," Reestructurar "),t("a",{href:o.route("honorarios.contratos.pdf.contrato",s.contrato.id),target:"_blank",rel:"noopener",class:"text-sm px-3 py-1.5 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}," PDF Contrato ",8,ft),t("a",{href:o.route("honorarios.contratos.pdf.liquidacion",s.contrato.id),target:"_blank",rel:"noopener",class:"text-sm px-3 py-1.5 rounded-md bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}," PDF Liquidación ",8,vt)])])]}),default:R(()=>{var g,p,v,E;return[t("div",kt,[t("div",_t,[s.contratoOrigen?(i(),n("div",ht,[t("div",wt,[e[44]||(e[44]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-amber-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),t("div",Ct,[t("p",At,[e[38]||(e[38]=y(" Este contrato es una reestructuración del ",-1)),d(a(Me),{href:o.route("honorarios.contratos.show",s.contratoOrigen.id),class:"underline hover:text-amber-600"},{default:R(()=>[y(" Contrato #"+l(s.contratoOrigen.id),1)]),_:1},8,["href"]),e[39]||(e[39]=y(". ",-1))]),t("div",St,[t("p",null,[e[40]||(e[40]=y(" El contrato original tenía un estado de ",-1)),t("strong",null,l(s.contratoOrigen.estado),1),e[41]||(e[41]=y(" con un monto de ",-1)),t("strong",null,l(b(s.contratoOrigen.monto_total)),1),e[42]||(e[42]=y(" en modalidad ",-1)),t("strong",null,l(s.contratoOrigen.modalidad.replace("_"," ")),1),e[43]||(e[43]=y(". ",-1))]),s.contrato.nota?(i(),n("p",Ot,' Nota de reestructuración: "'+l(s.contrato.nota)+'" ',1)):c("",!0)])])])])):c("",!0),t("div",Mt,[t("div",Nt,[e[45]||(e[45]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Neto Contrato",-1)),t("div",Et,l(b(ve.value)),1)]),t("div",It,[e[46]||(e[46]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"(+) Cargos Adicionales",-1)),t("div",Rt,l(b(W.value)),1),B.value>0?(i(),n("div",Vt," (Incluye "+l(b(B.value))+" en mora) ",1)):c("",!0)]),t("div",Tt,[e[47]||(e[47]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"(-) Total Pagado",-1)),t("div",Pt,l(b(ke.value)),1)]),t("div",Dt,[e[48]||(e[48]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"(=) Saldo Pendiente",-1)),t("div",jt,l(b(_e.value)),1)])]),t("div",Ut,[t("div",Ft,[t("div",$t,[t("div",Gt,[t("div",Lt,[t("nav",zt,[t("button",{onClick:e[3]||(e[3]=r=>me("cuotas")),class:V([P.value==="cuotas"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm"])},"Plan de Pagos",2),t("button",{onClick:e[4]||(e[4]=r=>me("cargos")),class:V([P.value==="cargos"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm"])},"Cargos Adicionales",2),t("button",{onClick:e[5]||(e[5]=r=>me("pagos")),class:V([P.value==="pagos"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700","whitespace-nowrap pb-3 px-1 border-b-2 font-medium text-sm"])},"Historial de Pagos",2)])]),t("div",Bt,[P.value==="cuotas"?(i(),n("div",Ht,[(((g=s.cuotas)==null?void 0:g.data)||[]).length?c("",!0):(i(),n("div",Xt,e[49]||(e[49]=[t("p",null,"No hay cuotas definidas para este contrato.",-1)]))),(i(!0),n(M,null,Q(s.cuotas.data,r=>(i(),n("div",{key:r.id,class:V(["border rounded-lg p-4 transition-all",r.estado==="PAGADA"?"bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-800":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"])},[t("div",Jt,[t("div",Yt,[t("p",Kt,[y(" Cuota #"+l(r.numero)+" ",1),t("span",{class:V(["ml-2 px-2.5 py-0.5 rounded-full text-xs font-semibold",r.estado==="PAGADA"?"bg-emerald-100 text-emerald-800":"bg-amber-100 text-amber-800"])},l(r.estado==="PAGADA"||r.fecha_pago?"PAGADA":r.estado||"PENDIENTE"),3)]),t("p",Qt,"Vence: "+l($(r.fecha_vencimiento)),1)]),t("div",Wt,[t("div",Zt,[e[50]||(e[50]=t("p",{class:"text-xs text-gray-500"},"Valor",-1)),t("p",qt,l(b(r.valor)),1)]),t("div",eo,[e[51]||(e[51]=t("p",{class:"text-xs text-red-500"},"Mora",-1)),t("p",to,l(b(r.intereses_mora_acumulados)),1)]),t("div",oo,[e[52]||(e[52]=t("p",{class:"text-xs text-gray-500"},"Pagado",-1)),t("p",ro,l(b(Ce(r))),1)]),t("div",ao,[e[53]||(e[53]=t("p",{class:"text-xs text-gray-500"},"Pendiente",-1)),t("p",so,l(b(Z(r))),1)])]),t("div",lo,[s.contrato.estado!=="CERRADO"&&r.estado!=="PAGADA"&&!r.fecha_pago?(i(),n("button",{key:0,onClick:f=>ze(r),class:"w-full sm:w-auto px-4 py-2 rounded-md bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700"}," Pagar ",8,no)):c("",!0)])])],2))),128)),d(ye,{class:"mt-6",links:et.value},null,8,["links"])])):c("",!0),P.value==="cargos"?(i(),n("div",io,[(((p=s.cargos)==null?void 0:p.data)||[]).length?(i(),n("div",mo,[(i(!0),n(M,null,Q(s.cargos.data,r=>(i(),n("div",{key:r.id,class:V(["border rounded-lg transition-all",r.estado==="PAGADO"?"bg-emerald-50/50 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-900":String(r.tipo||"")==="INTERES_MORA"?"bg-red-50/50 dark:bg-red-900/10 border-red-200 dark:border-red-900":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"])},[t("div",go,[t("div",bo,[String(r.tipo||"")==="INTERES_MORA"?(i(),n("span",co,e[55]||(e[55]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)]))):(i(),n("span",po,e[56]||(e[56]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),t("path",{"fill-rule":"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z","clip-rule":"evenodd"})],-1)])))]),t("div",xo,[t("div",yo,[t("span",fo,[String(r.tipo||"")!=="INTERES_MORA"&&Number(r.intereses_mora_acumulados||0)>0?(i(),n(M,{key:0},[y(l(b(Y(r))),1)],64)):(i(),n(M,{key:1},[y(l(b(r.monto)),1)],64))]),t("span",{class:V(["px-2 py-0.5 text-xs rounded-full font-semibold",String(r.tipo||"")==="INTERES_MORA"?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"])},l(String(r.tipo||"").replace("_"," ")||"CARGO"),3),t("span",vo,"Aplicado el "+l($(r.fecha_aplicado)),1)]),String(r.tipo||"")==="INTERES_MORA"?(i(),n("p",ko,l($e(r)),1)):c("",!0),String(r.tipo||"")!=="INTERES_MORA"&&Number(r.intereses_mora_acumulados||0)>0?(i(),n("p",_o," (Valor original: "+l(b(r.monto))+" + "+l(b(r.intereses_mora_acumulados))+" de mora) ",1)):c("",!0),t("p",{class:"text-sm text-gray-600 dark:text-gray-400",textContent:l(r.descripcion)},null,8,ho),r.comprobante?(i(),n("a",{key:2,href:Pe(r),target:"_blank",class:"text-xs text-indigo-600 hover:underline font-semibold"},"Ver comprobante de creación",8,wo)):c("",!0)]),t("div",Co,[t("span",{class:V(["px-2.5 py-0.5 rounded-full text-xs font-semibold",r.estado==="PAGADO"?"bg-emerald-100 text-emerald-800":"bg-amber-100 text-amber-800"])},l(r.estado),3),r.estado==="PENDIENTE"&&s.contrato.estado!=="CERRADO"?(i(),n("button",{key:0,onClick:f=>He(r),class:"px-3 py-1.5 rounded-md bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700"}," Pagar ",8,Ao)):c("",!0)])]),r.estado==="PAGADO"?(i(),n("div",So,[t("p",Oo,"Pagado el "+l($(r.fecha_pago_cargo))+" vía "+l(r.metodo_pago_cargo)+".",1),r.nota_pago_cargo?(i(),n("p",Mo,'"'+l(r.nota_pago_cargo)+'"',1)):c("",!0),r.comprobante_pago_cargo?(i(),n("a",{key:1,href:De(r),target:"_blank",class:"mt-1 inline-block text-xs text-indigo-600 hover:underline font-semibold"},"Ver comprobante de pago",8,No)):c("",!0)])):c("",!0)],2))),128)),t("div",Eo,[t("p",Io,[e[57]||(e[57]=y("Total Cargos: ",-1)),t("span",Ro,l(b(W.value)),1)]),B.value>0?(i(),n("p",Vo,"(Incluye "+l(b(B.value))+" en mora)",1)):c("",!0),t("p",To,[e[58]||(e[58]=y("Total Pendiente: ",-1)),t("span",Po,l(b(Te.value)),1)])]),d(ye,{class:"mt-6",links:tt.value},null,8,["links"])])):(i(),n("div",uo,e[54]||(e[54]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"Sin cargos adicionales",-1),t("p",{class:"mt-1 text-sm text-gray-500"},'Puedes añadir gastos desde el botón "Añadir Gasto".',-1)])))])):c("",!0),P.value==="pagos"?(i(),n("div",Do,[(((v=s.pagos)==null?void 0:v.data)||[]).length?(i(),n("div",Uo,[(i(!0),n(M,null,Q([...s.pagos.data||[]].sort((r,f)=>new Date(f.fecha)-new Date(r.fecha)),r=>(i(),n("div",{key:r.id,class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4"},[t("div",Fo,[t("div",$o,[e[60]||(e[60]=t("div",{class:"flex-shrink-0 inline-flex justify-center items-center w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-gray-600 dark:text-gray-300",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M2 5a2 2 0 012-2h2a2 2 0 012 2v1h2V5a2 2 0 012-2h2a2 2 0 012 2v1h1a1 1 0 110 2h-1v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8H2a1 1 0 110-2h1V5zm3 3v8h10V8H5z"})])],-1)),t("div",null,[e[59]||(e[59]=t("p",{class:"text-sm text-gray-500"},"Fecha",-1)),t("p",Go,l($(r.fecha)),1)])]),t("div",Lo,[t("span",{class:V(["px-2 py-1 rounded-md text-xs font-semibold",r.cargo_id?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},l(Le(r)),3)]),t("div",zo,[e[61]||(e[61]=t("p",{class:"text-sm text-gray-500"},"Valor",-1)),t("p",Bo,l(b(r.valor)),1)])]),t("div",Ho,[t("div",null,[e[62]||(e[62]=t("p",{class:"text-gray-500"},"Método",-1)),t("p",Xo,l(r.metodo?r.metodo.replace("_"," "):"-"),1)]),t("div",Jo,[e[63]||(e[63]=t("p",{class:"text-gray-500"},"Nota",-1)),t("p",Yo,l(r.nota||"—"),1)])]),t("div",Ko,[he(r)?(i(),n("a",{key:0,href:he(r),target:"_blank",class:"text-xs text-indigo-600 hover:underline font-semibold"},"Ver comprobante",8,Qo)):(i(),n("span",Wo,"Sin comprobante"))])]))),128)),d(ye,{class:"mt-6",links:ot.value},null,8,["links"])])):(i(),n("div",jo," No se han registrado pagos. "))])):c("",!0)])])])]),t("div",Zo,[t("div",qo,[e[72]||(e[72]=t("div",{class:"p-6 border-b dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},"Información del Contrato")],-1)),t("div",er,[t("div",tr,[e[64]||(e[64]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Cliente:",-1)),t("span",or,l(Ie.value),1)]),t("div",rr,[e[65]||(e[65]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Fecha de Inicio:",-1)),t("span",ar,l($(s.contrato.inicio)),1)]),t("div",sr,[e[66]||(e[66]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Modalidad:",-1)),t("span",lr,l((s.contrato.modalidad||"").replace("_"," ")),1)]),["LITIS","CUOTA_MIXTA"].includes(s.contrato.modalidad)?(i(),n("div",dr,[e[67]||(e[67]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Porcentaje de Éxito:",-1)),t("span",nr,l(s.contrato.porcentaje_litis)+"%",1)])):c("",!0),Number(s.contrato.monto_base_litis)>0?(i(),n("div",ir,[e[68]||(e[68]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Monto Base del Caso:",-1)),t("span",ur,l(b(s.contrato.monto_base_litis)),1)])):c("",!0),Number(s.contrato.litis_valor_ganado)>0?(i(),n("div",mr,[e[69]||(e[69]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Valor Litis (Ganado):",-1)),t("span",gr,l(b(s.contrato.litis_valor_ganado)),1)])):c("",!0),s.contrato.modalidad==="CUOTA_MIXTA"?(i(),n("div",br,[e[70]||(e[70]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Parte Fija (Cuotas):",-1)),t("span",cr,l(b(s.contrato.monto_total)),1)])):c("",!0),t("div",pr,[e[71]||(e[71]=t("span",{class:"text-gray-500 dark:text-gray-400"},"Estado:",-1)),t("span",{class:V(["px-2.5 py-0.5 rounded-full text-xs font-semibold",K[s.contrato.estado]||K.CERRADO])},l((E=s.contrato.estado)==null?void 0:E.replace("_"," ")),3)])])])])])])]),d(L,{show:q.value,onClose:te},{default:R(()=>{var r;return[t("form",{onSubmit:G(Be,["prevent"])},[t("div",xr,[t("h4",yr,"Abonar a la cuota #"+l((r=ee.value)==null?void 0:r.numero),1)]),t("div",fr,[t("div",null,[e[73]||(e[73]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Valor del Pago",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=f=>a(k).valor=f),type:"number",step:"0.01",min:"0",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(k).valor,void 0,{number:!0}]]),t("p",vr,"Debe ser igual o mayor a "+l(b(Z(ee.value)))+".",1),d(x,{message:a(k).errors.valor,class:"mt-2"},null,8,["message"])]),t("div",kr,[t("div",null,[e[74]||(e[74]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Fecha",-1)),w(t("input",{"onUpdate:modelValue":e[7]||(e[7]=f=>a(k).fecha=f),type:"date",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(k).fecha]]),d(x,{message:a(k).errors.fecha,class:"mt-2"},null,8,["message"])]),t("div",null,[e[76]||(e[76]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Método",-1)),w(t("select",{"onUpdate:modelValue":e[8]||(e[8]=f=>a(k).metodo=f),class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},e[75]||(e[75]=[t("option",null,"TRANSFERENCIA",-1),t("option",null,"EFECTIVO",-1),t("option",null,"TARJETA",-1),t("option",null,"OTRO",-1)]),512),[[xe,a(k).metodo]])])]),t("div",null,[e[77]||(e[77]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Nota (Opcional)",-1)),w(t("input",{"onUpdate:modelValue":e[9]||(e[9]=f=>a(k).nota=f),type:"text",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(k).nota]])]),t("div",null,[e[78]||(e[78]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Comprobante (Opcional)",-1)),t("input",{type:"file",onInput:e[10]||(e[10]=f=>a(k).comprobante=f.target.files[0]),class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/50 dark:file:text-blue-300 dark:hover:file:bg-blue-900"},null,32),d(x,{message:a(k).errors.comprobante,class:"mt-2"},null,8,["message"])])]),t("div",_r,[t("button",{type:"button",onClick:te,class:"px-4 py-2 rounded-md bg-white dark:bg-gray-700 border dark:border-gray-600 text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-600"},"Cancelar"),t("button",{type:"submit",disabled:a(k).processing,class:"px-4 py-2 rounded-md bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 disabled:opacity-50"},"Guardar Pago",8,hr)])],32)]}),_:1},8,["show"]),d(L,{show:oe.value,onClose:re},{default:R(()=>{var r,f,H,X,J;return[t("form",{onSubmit:G(Xe,["prevent"])},[e[87]||(e[87]=t("div",{class:"p-6 border-b dark:border-gray-700"},[t("h4",{class:"font-semibold text-lg text-gray-800 dark:text-gray-100"},"Abonar a Cargo Adicional")],-1)),t("div",wr,[t("div",Cr,[t("p",Ar,l((r=A.value)==null?void 0:r.descripcion),1),t("p",Sr,[A.value&&String(A.value.tipo||"")!=="INTERES_MORA"&&Number(A.value.intereses_mora_acumulados||0)>0?(i(),n(M,{key:0},[y(l(b(Y(A.value)))+" ",1),t("span",Or,"(Original: "+l(b((f=A.value)==null?void 0:f.monto))+" + Mora: "+l(b((H=A.value)==null?void 0:H.intereses_mora_acumulados))+")",1)],64)):(i(),n(M,{key:1},[y(l(b((X=A.value)==null?void 0:X.monto)),1)],64))])]),t("div",null,[e[81]||(e[81]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Valor del Pago",-1)),w(t("input",{"onUpdate:modelValue":e[11]||(e[11]=I=>a(_).valor=I),type:"number",step:"0.01",min:"0",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(_).valor,void 0,{number:!0}]]),t("p",Mr,[e[79]||(e[79]=y(" Debe ser igual o mayor a ",-1)),t("strong",null,[A.value&&String(A.value.tipo||"")!=="INTERES_MORA"&&Number(A.value.intereses_mora_acumulados||0)>0?(i(),n(M,{key:0},[y(l(b(Y(A.value))),1)],64)):(i(),n(M,{key:1},[y(l(b((J=A.value)==null?void 0:J.monto)),1)],64))]),e[80]||(e[80]=y(". ",-1))]),d(x,{message:a(_).errors.valor,class:"mt-2"},null,8,["message"])]),t("div",Nr,[t("div",null,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Fecha",-1)),w(t("input",{"onUpdate:modelValue":e[12]||(e[12]=I=>a(_).fecha=I),type:"date",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(_).fecha]]),d(x,{message:a(_).errors.fecha,class:"mt-2"},null,8,["message"])]),t("div",null,[e[84]||(e[84]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Método",-1)),w(t("select",{"onUpdate:modelValue":e[13]||(e[13]=I=>a(_).metodo=I),class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},e[83]||(e[83]=[t("option",null,"TRANSFERENCIA",-1),t("option",null,"EFECTIVO",-1),t("option",null,"TARJETA",-1),t("option",null,"OTRO",-1)]),512),[[xe,a(_).metodo]])])]),t("div",null,[e[85]||(e[85]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Nota (Opcional)",-1)),w(t("input",{"onUpdate:modelValue":e[14]||(e[14]=I=>a(_).nota=I),type:"text",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(_).nota]])]),t("div",null,[e[86]||(e[86]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Comprobante (Requerido)",-1)),t("input",{type:"file",onInput:e[15]||(e[15]=I=>a(_).comprobante=I.target.files[0]),required:"",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/50 dark:file:text-blue-300 dark:hover:file:bg-blue-900"},null,32),d(x,{message:a(_).errors.comprobante,class:"mt-2"},null,8,["message"])])]),t("div",Er,[t("button",{type:"button",onClick:re,class:"px-4 py-2 rounded-md bg-white dark:bg-gray-700 border dark:border-gray-600 text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-600"},"Cancelar"),t("button",{type:"submit",disabled:a(_).processing,class:"px-4 py-2 rounded-md bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 disabled:opacity-50"},"Guardar Pago",8,Ir)])],32)]}),_:1},8,["show"]),d(L,{show:ae.value,onClose:se},{default:R(()=>[t("form",{onSubmit:G(Ye,["prevent"])},[e[94]||(e[94]=t("div",{class:"p-6 border-b dark:border-gray-700"},[t("h4",{class:"font-semibold text-lg text-gray-800 dark:text-gray-100"},"Añadir Gasto Pagado")],-1)),t("div",Rr,[t("div",null,[e[88]||(e[88]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Monto del Gasto",-1)),w(t("input",{"onUpdate:modelValue":e[16]||(e[16]=r=>a(h).monto=r),type:"number",step:"0.01",min:"0",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(h).monto,void 0,{number:!0}]]),d(x,{message:a(h).errors.monto,class:"mt-2"},null,8,["message"])]),t("div",null,[e[89]||(e[89]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Fecha de Aplicación",-1)),w(t("input",{"onUpdate:modelValue":e[17]||(e[17]=r=>a(h).fecha=r),type:"date",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(h).fecha]]),d(x,{message:a(h).errors.fecha,class:"mt-2"},null,8,["message"])]),t("div",null,[e[90]||(e[90]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Descripción",-1)),w(t("input",{"onUpdate:modelValue":e[18]||(e[18]=r=>a(h).descripcion=r),type:"text",required:"",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(h).descripcion]]),d(x,{message:a(h).errors.descripcion,class:"mt-2"},null,8,["message"])]),t("div",null,[e[91]||(e[91]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Comprobante (Opcional)",-1)),t("input",{type:"file",onInput:e[19]||(e[19]=r=>a(h).comprobante=r.target.files[0]),class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/50 dark:file:text-blue-300 dark:hover:file:bg-blue-900"},null,32),d(x,{message:a(h).errors.comprobante,class:"mt-2"},null,8,["message"])]),t("div",null,[e[92]||(e[92]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Fecha de Inicio de Intereses (Opcional)",-1)),w(t("input",{"onUpdate:modelValue":e[20]||(e[20]=r=>a(h).fecha_inicio_intereses=r),type:"date",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(h).fecha_inicio_intereses]]),e[93]||(e[93]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Si no se especifica la fecha de cobro de intereses, no se cobrarán intereses.",-1)),d(x,{message:a(h).errors.fecha_inicio_intereses,class:"mt-2"},null,8,["message"])])]),t("div",Vr,[t("button",{type:"button",onClick:se,class:"px-4 py-2 rounded-md bg-white dark:bg-gray-700 border dark:border-gray-600 text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-600"},"Cancelar"),t("button",{type:"submit",disabled:a(h).processing,class:"px-4 py-2 rounded-md bg-indigo-600 text-white text-sm font-semibold hover:bg-indigo-700 disabled:opacity-50"},"Guardar Gasto",8,Tr)])],32)]),_:1},8,["show"]),d(L,{show:le.value,onClose:de},{default:R(()=>[t("form",{onSubmit:G(Qe,["prevent"])},[e[100]||(e[100]=t("div",{class:"p-6 border-b dark:border-gray-700"},[t("h4",{class:"font-semibold text-lg text-gray-800 dark:text-gray-100"},"Cerrar Contrato Manualmente")],-1)),t("div",Pr,[e[99]||(e[99]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},' Opcionalmente, añade un cargo final por gestión o cláusula penal. El contrato pasará a "Pagos Pendientes". ',-1)),t("div",null,[e[95]||(e[95]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Monto del Cargo (Opcional)",-1)),w(t("input",{"onUpdate:modelValue":e[21]||(e[21]=r=>a(N).monto=r),type:"number",step:"0.01",min:"0",placeholder:"Ej: 50000",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(N).monto,void 0,{number:!0}]]),d(x,{message:a(N).errors.monto,class:"mt-2"},null,8,["message"])]),t("div",null,[e[96]||(e[96]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Descripción del Cargo",-1)),w(t("input",{"onUpdate:modelValue":e[22]||(e[22]=r=>a(N).descripcion=r),type:"text",placeholder:"Ej: Cláusula penal por terminación",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(N).descripcion]]),d(x,{message:a(N).errors.descripcion,class:"mt-2"},null,8,["message"])]),t("div",null,[e[97]||(e[97]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Fecha de Inicio de Intereses (Opcional)",-1)),w(t("input",{"onUpdate:modelValue":e[23]||(e[23]=r=>a(N).fecha_inicio_intereses=r),type:"date",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(N).fecha_inicio_intereses]]),e[98]||(e[98]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Si no se especifica la fecha de cobro de intereses, no se cobrarán intereses.",-1)),d(x,{message:a(N).errors.fecha_inicio_intereses,class:"mt-2"},null,8,["message"])])]),t("div",Dr,[t("button",{type:"button",onClick:de,class:"px-4 py-2 rounded-md bg-white dark:bg-gray-700 border dark:border-gray-600 text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-600"},"Cancelar"),t("button",{type:"submit",disabled:a(N).processing,class:"px-4 py-2 rounded-md bg-slate-700 text-white text-sm font-semibold hover:bg-slate-800 disabled:opacity-50"},"Confirmar Cierre",8,jr)])],32)]),_:1},8,["show"]),d(L,{show:ne.value,onClose:ie},{default:R(()=>[t("form",{onSubmit:G(Ze,["prevent"])},[e[104]||(e[104]=t("div",{class:"p-6 border-b dark:border-gray-700"},[t("h4",{class:"font-semibold text-lg text-gray-800 dark:text-gray-100"},"Registrar Resultado del Caso (Litis)")],-1)),t("div",Ur,[t("p",Fr," Ingresa el monto final sobre el cual se calcularán los honorarios del "+l(s.contrato.porcentaje_litis)+"%. Esto generará un cargo final en el contrato. ",1),t("div",null,[e[101]||(e[101]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Monto Base Final",-1)),w(t("input",{"onUpdate:modelValue":e[24]||(e[24]=r=>a(T).monto_base_litis=r),type:"number",step:"0.01",min:"0",required:"",placeholder:"Ej: 15000000",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(T).monto_base_litis,void 0,{number:!0}]]),d(x,{message:a(T).errors.monto_base_litis,class:"mt-2"},null,8,["message"])]),t("div",null,[e[102]||(e[102]=t("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1"},"Fecha de Inicio de Intereses (Opcional)",-1)),w(t("input",{"onUpdate:modelValue":e[25]||(e[25]=r=>a(T).fecha_inicio_intereses=r),type:"date",class:"w-full rounded-md border-gray-300 dark:bg-gray-900 dark:border-gray-700 shadow-sm"},null,512),[[C,a(T).fecha_inicio_intereses]]),e[103]||(e[103]=t("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Si no se especifica la fecha de cobro de intereses, no se cobrarán intereses.",-1)),d(x,{message:a(T).errors.fecha_inicio_intereses,class:"mt-2"},null,8,["message"])])]),t("div",$r,[t("button",{type:"button",onClick:ie,class:"px-4 py-2 rounded-md bg-white dark:bg-gray-700 border dark:border-gray-600 text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-600"},"Cancelar"),t("button",{type:"submit",disabled:a(T).processing,class:"px-4 py-2 rounded-md bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700 disabled:opacity-50"},"Confirmar y Generar Cargo",8,Gr)])],32)]),_:1},8,["show"]),d(L,{show:be.value,onClose:pe},{default:R(()=>[t("form",{onSubmit:G(st,["prevent"])},[t("div",Lr,[t("h4",zr," Reestructurar Contrato #"+l(s.contrato.id),1)]),t("div",Br,[t("div",{class:"relative",ref_key:"clientDropdown",ref:Ae},[d(D,{for:"cliente_search",value:"Cliente"}),d(z,{id:"cliente_search",type:"text",modelValue:U.value,"onUpdate:modelValue":e[26]||(e[26]=r=>U.value=r),disabled:"",class:"mt-1 block w-full disabled:bg-gray-100 dark:disabled:bg-gray-800/50"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.cliente_id},null,8,["message"])],512),t("div",Hr,[t("div",null,[d(D,{for:"modalidad_re",value:"Modalidad del Contrato"}),w(t("select",{"onUpdate:modelValue":e[27]||(e[27]=r=>a(m).modalidad=r),id:"modalidad_re",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm dark:bg-gray-900 dark:border-gray-700"},[(i(!0),n(M,null,Q(s.modalidades,r=>(i(),n("option",{key:r,value:r},l(r.replace("_"," ")),9,Xr))),128))],512),[[xe,a(m).modalidad]]),d(x,{class:"mt-2",message:a(m).errors.modalidad},null,8,["message"])]),t("div",null,[d(D,{for:"inicio",value:"Fecha de Inicio"}),d(z,{id:"inicio",type:"date",modelValue:a(m).inicio,"onUpdate:modelValue":e[28]||(e[28]=r=>a(m).inicio=r),class:"mt-1 block w-full"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.inicio},null,8,["message"])])]),t("div",Jr,[["CUOTAS","PAGO_UNICO","CUOTA_MIXTA"].includes(a(m).modalidad)?(i(),n(M,{key:0},[t("div",null,[d(D,{for:"monto_total",value:"Monto Total (Parte Fija)"}),d(z,{id:"monto_total",type:"number",step:"0.01",modelValue:a(m).monto_total,"onUpdate:modelValue":e[29]||(e[29]=r=>a(m).monto_total=r),class:"mt-1 block w-full",placeholder:"Ej: 5000000"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.monto_total},null,8,["message"])]),t("div",null,[d(D,{for:"cuotas",value:"Número de Cuotas"}),d(z,{id:"cuotas",type:"number",modelValue:a(m).cuotas,"onUpdate:modelValue":e[30]||(e[30]=r=>a(m).cuotas=r),class:"mt-1 block w-full",placeholder:"Ej: 12"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.cuotas},null,8,["message"])]),t("div",null,[d(D,{for:"anticipo",value:"Anticipo (Opcional)"}),d(z,{id:"anticipo",type:"number",step:"0.01",modelValue:a(m).anticipo,"onUpdate:modelValue":e[31]||(e[31]=r=>a(m).anticipo=r),class:"mt-1 block w-full",placeholder:"Ej: 1000000"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.anticipo},null,8,["message"])])],64)):c("",!0),["LITIS","CUOTA_MIXTA"].includes(a(m).modalidad)?(i(),n("div",Yr,[d(D,{for:"porcentaje_litis",value:"Porcentaje de Éxito (%)"}),d(z,{id:"porcentaje_litis",type:"number",step:"0.01",modelValue:a(m).porcentaje_litis,"onUpdate:modelValue":e[32]||(e[32]=r=>a(m).porcentaje_litis=r),class:"mt-1 block w-full",placeholder:"Ej: 20"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.porcentaje_litis},null,8,["message"])])):c("",!0)]),t("div",null,[d(D,{for:"nota",value:"Nota (Opcional)"}),d(gt,{id:"nota",modelValue:a(m).nota,"onUpdate:modelValue":e[33]||(e[33]=r=>a(m).nota=r),rows:"3",class:"mt-1 block w-full"},null,8,["modelValue"]),d(x,{class:"mt-2",message:a(m).errors.nota},null,8,["message"])]),t("input",{type:"hidden",value:a(m).contrato_origen_id},null,8,Kr)]),t("div",Qr,[d(mt,{type:"button",onClick:pe},{default:R(()=>e[105]||(e[105]=[y("Cancelar",-1)])),_:1,__:[105]}),d(ut,{type:"submit",disabled:a(m).processing},{default:R(()=>[y(l(a(m).processing?"Guardando...":"Guardar Contrato"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show"])]}),_:1})],64)}}};export{ua as default};
