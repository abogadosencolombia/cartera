import{r as x,j as G,k as T,s as z,c as w,o as m,b as a,u as r,h as P,w as o,a as e,B as C,i as R,d as U,v as J,T as L,a4 as K,F as B,e as Q,n as _,p as k,t as n,g as l}from"./app-JQL7kpkv.js";import{_ as W}from"./AuthenticatedLayout-B92UnL5N.js";import{_ as X}from"./TextInput-BJeeigo0.js";import{_ as Y}from"./Pagination-hc3OV_ke.js";import{_ as y}from"./PrimaryButton-BZZjGzCv.js";import{_ as V}from"./SecondaryButton-BZnIH0Cw.js";import{D}from"./DangerButton-B5vHJ_xi.js";import{_ as E}from"./Modal-DRFJQBFO.js";import{_ as Z}from"./InputLabel-jQaTK5g0.js";import{_ as ee}from"./InputError-Cp1iGhwd.js";import{_ as te}from"./Textarea-CRQZ6-id.js";import{l as se}from"./lodash-EiU1kxPc.js";import{u as ae}from"./useProcesos-pDpoWs9U.js";import"./ApplicationLogo-B_nlfuyF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"flex flex-col md:flex-row items-center justify-between gap-4"},re={class:"flex items-center gap-2"},le={class:"py-12"},ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ie={class:"mb-6 p-4 bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},de={class:"flex flex-col md:flex-row items-center gap-4"},ue={class:"relative flex-grow w-full md:w-auto"},me={class:"flex-shrink-0 w-full md:w-auto"},fe={key:0,class:"relative"},ce={class:"flex flex-col md:flex-row justify-between md:items-start gap-6"},ve={class:"flex-grow min-w-0"},ge={class:"mb-4"},pe={class:"flex items-center gap-3 mb-1 flex-wrap"},xe=["title"],we=["title"],_e={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},ke={class:"space-y-3 text-sm"},ye={class:"flex items-start gap-3"},he={class:"text-gray-800 dark:text-gray-200 min-w-0"},be={class:"font-medium truncate"},Ce={class:"font-medium truncate"},Re={class:"flex items-start gap-3"},Ve={class:"text-gray-700 dark:text-gray-300 min-w-0 break-words"},je={class:"flex items-start gap-3"},Oe={class:"text-gray-700 dark:text-gray-300"},Se={class:"flex-shrink-0 flex flex-col items-start md:items-end justify-between gap-4 w-full md:w-auto md:min-w-[200px]"},Ae={class:"flex flex-col items-start md:items-end w-full"},Me={class:"flex items-center gap-3 self-stretch md:self-end mt-auto flex-wrap justify-end"},$e={key:1,class:"text-center bg-white dark:bg-gray-800 rounded-lg shadow-sm p-12"},Te={class:"mt-6"},ze={class:"p-6"},Be={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},De={class:"font-bold"},Ee={class:"mt-6"},Ne={class:"mt-6 flex justify-end gap-3"},He={class:"p-6"},Fe={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Ie={class:"font-bold"},qe={class:"mt-6 flex justify-end gap-3"},ot={__name:"Index",props:{procesos:{type:Object,required:!0},filtros:{type:Object,default:()=>({})}},setup(c){const j=c,{getRevisionStatus:O}=ae(),h=x(j.filtros.search),v=x(j.filtros.estado||"TODOS"),S=se.debounce(()=>{const i={search:h.value,estado:v.value==="TODOS"?"":v.value};G.get(route("procesos.index"),i,{preserveState:!0,replace:!0})},300);T(h,S),T(v,S);const d=x(null),g=x(!1),u=z({nota_cierre:""}),N=i=>{d.value=i,u.reset(),g.value=!0},H=()=>{d.value&&u.patch(route("procesos.close",d.value.id),{preserveScroll:!0,onSuccess:()=>{g.value=!1,d.value=null}})},p=x(!1),b=z({}),F=i=>{d.value=i,p.value=!0},I=()=>{d.value&&b.patch(route("procesos.reopen",d.value.id),{preserveScroll:!0,onSuccess:()=>{p.value=!1,d.value=null}})};return(i,t)=>(m(),w(B,null,[a(r(P),{title:"Gestión de Radicados"}),a(W,null,{header:o(()=>[e("div",oe,[t[8]||(t[8]=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gestión de Radicados ",-1)),e("div",re,[a(r(k),{href:i.route("procesos.create")},{default:o(()=>[a(y,null,{default:o(()=>t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),l(" Registrar Radicado ",-1)])),_:1,__:[7]})]),_:1},8,["href"])])])]),default:o(()=>[e("div",le,[e("div",ne,[e("div",ie,[e("div",de,[e("div",ue,[t[9]||(t[9]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})])],-1)),a(X,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),type:"text",class:"block w-full pl-10",placeholder:"Buscar por radicado, asunto, etc..."},null,8,["modelValue"])]),e("div",me,[t[11]||(t[11]=e("label",{for:"estado-filtro",class:"sr-only"},"Filtrar por estado",-1)),U(e("select",{id:"estado-filtro","onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},t[10]||(t[10]=[e("option",{value:"TODOS"},"Todos los Estados",-1),e("option",{value:"ACTIVO"},"Solo Activos",-1),e("option",{value:"CERRADO"},"Solo Cerrados",-1)]),512),[[J,v.value]])])])]),a(L,{mode:"out-in","enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform -translate-y-4"},{default:o(()=>[c.procesos.data.length>0?(m(),w("div",fe,[a(K,{tag:"div",class:"space-y-4","enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0 transform translate-x-8","enter-to-class":"opacity-100 transform translate-x-0","leave-active-class":"transition-all duration-300 ease-in absolute w-full","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:o(()=>[(m(!0),w(B,null,Q(c.procesos.data,s=>{var f,A,M,$;return m(),w("div",{key:s.id,class:_(["bg-white dark:bg-gray-800 overflow-hidden shadow-md sm:rounded-lg p-5 transition duration-300 ease-in-out hover:shadow-xl dark:hover:ring-1 dark:hover:ring-gray-700",{"opacity-60 grayscale-[50%]":s.estado==="CERRADO"}])},[e("div",ce,[e("div",ve,[e("div",ge,[e("div",pe,[a(r(k),{href:i.route("procesos.show",s.id),class:"group min-w-0"},{default:o(()=>[e("h3",{class:"text-lg font-bold text-indigo-600 dark:text-indigo-400 group-hover:underline truncate",title:s.radicado},n(s.radicado),9,xe)]),_:2},1032,["href"]),e("span",{class:_(["inline-flex flex-shrink-0 items-center rounded-md px-2 py-1 text-xs font-bold",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":s.estado==="ACTIVO","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":s.estado==="CERRADO"}])},n(s.estado),3)]),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 truncate",title:s.asunto},n(s.asunto||"Sin asunto"),9,we)]),e("div",_e,[e("dl",ke,[e("div",ye,[t[13]||(t[13]=e("dt",{class:"flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1a6 6 0 00-5.197-5.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-3.197 1.053m-2.454 4.092A3.986 3.986 0 013 18v-1a6 6 0 0112 0v1z"})])],-1)),e("dd",he,[e("span",be,n(((f=s.demandante)==null?void 0:f.nombre_completo)||"N/A"),1),t[12]||(t[12]=e("span",{class:"text-gray-400 mx-1"},"vs.",-1)),e("span",Ce,n(((A=s.demandado)==null?void 0:A.nombre_completo)||"N/A"),1)])]),e("div",Re,[t[14]||(t[14]=e("dt",{class:"flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z","clip-rule":"evenodd"})])],-1)),e("dd",Ve,n(((M=s.juzgado)==null?void 0:M.nombre)||"Juzgado no asignado"),1)]),e("div",je,[t[15]||(t[15]=e("dt",{class:"flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0A2.25 2.25 0 015.625 7.5h12.75c1.135 0 2.099.774 2.231 1.879M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),e("dd",Oe,n((($=s.tipo_proceso)==null?void 0:$.nombre)||"Tipo no definido"),1)])])])]),e("div",Se,[e("div",Ae,[t[16]||(t[16]=e("span",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"Próxima Revisión",-1)),e("span",{class:_(["inline-flex items-center rounded-md px-2 py-1 text-xs font-semibold",r(O)(s.fecha_proxima_revision).classes])},n(r(O)(s.fecha_proxima_revision).text),3)]),e("div",Me,[s.estado==="ACTIVO"?(m(),C(D,{key:0,onClick:q=>N(s),small:""},{default:o(()=>t[17]||(t[17]=[l("Cerrar",-1)])),_:2,__:[17]},1032,["onClick"])):R("",!0),s.estado==="CERRADO"?(m(),C(y,{key:1,onClick:q=>F(s),small:"",class:"!bg-blue-600"},{default:o(()=>t[18]||(t[18]=[l("Reabrir",-1)])),_:2,__:[18]},1032,["onClick"])):R("",!0),a(r(k),{href:i.route("procesos.edit",s.id)},{default:o(()=>[a(V,{small:""},{default:o(()=>t[19]||(t[19]=[l("Editar",-1)])),_:1,__:[19]})]),_:2},1032,["href"]),a(r(k),{href:i.route("procesos.show",s.id)},{default:o(()=>[a(y,{small:""},{default:o(()=>t[20]||(t[20]=[l("Ver Detalles",-1)])),_:1,__:[20]})]),_:2},1032,["href"])])])])],2)}),128))]),_:1})])):(m(),w("div",$e,[t[22]||(t[22]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[e("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)),t[23]||(t[23]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"No se encontraron radicados",-1)),t[24]||(t[24]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Intenta ajustar los filtros de búsqueda o registra un nuevo radicado.",-1)),e("div",Te,[a(r(k),{href:i.route("procesos.create")},{default:o(()=>[a(y,null,{default:o(()=>t[21]||(t[21]=[l(" + Registrar Nuevo Radicado ",-1)])),_:1,__:[21]})]),_:1},8,["href"])])]))]),_:1}),c.procesos.links.length>3?(m(),C(Y,{key:0,class:"mt-6",links:c.procesos.links},null,8,["links"])):R("",!0)])]),a(E,{show:g.value,onClose:t[4]||(t[4]=s=>g.value=!1)},{default:o(()=>{var s;return[e("div",ze,[t[28]||(t[28]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Cerrar Radicado",-1)),e("p",Be,[t[25]||(t[25]=l(" Estás a punto de cerrar el radicado ",-1)),e("span",De,n((s=d.value)==null?void 0:s.radicado),1),t[26]||(t[26]=l(". Por favor, añade una nota de cierre. ",-1))]),e("div",Ee,[a(Z,{for:"nota_cierre",value:"Nota de Cierre *",required:""}),a(te,{modelValue:r(u).nota_cierre,"onUpdate:modelValue":t[2]||(t[2]=f=>r(u).nota_cierre=f),id:"nota_cierre",class:"mt-1 block w-full",rows:"4"},null,8,["modelValue"]),a(ee,{message:r(u).errors.nota_cierre,class:"mt-2"},null,8,["message"])]),e("div",Ne,[a(V,{onClick:t[3]||(t[3]=f=>g.value=!1)},{default:o(()=>t[27]||(t[27]=[l("Cancelar",-1)])),_:1,__:[27]}),a(D,{onClick:H,disabled:r(u).processing,class:_({"opacity-25":r(u).processing})},{default:o(()=>[l(n(r(u).processing?"Cerrando...":"Confirmar Cierre"),1)]),_:1},8,["disabled","class"])])])]}),_:1},8,["show"]),a(E,{show:p.value,onClose:t[6]||(t[6]=s=>p.value=!1)},{default:o(()=>{var s;return[e("div",He,[t[32]||(t[32]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Reabrir Radicado",-1)),e("p",Fe,[t[29]||(t[29]=l(" ¿Estás seguro de que quieres reabrir el radicado ",-1)),e("span",Ie,n((s=d.value)==null?void 0:s.radicado),1),t[30]||(t[30]=l('? Su estado volverá a "ACTIVO". ',-1))]),e("div",qe,[a(V,{onClick:t[5]||(t[5]=f=>p.value=!1)},{default:o(()=>t[31]||(t[31]=[l("Cancelar",-1)])),_:1,__:[31]}),a(y,{onClick:I,disabled:r(b).processing,class:_([{"opacity-25":r(b).processing},"!bg-blue-600 hover:!bg-blue-700 focus:!bg-blue-700 active:!bg-blue-800 focus:!ring-blue-500"])},{default:o(()=>[l(n(r(b).processing?"Reabriendo...":"Sí, Reabrir"),1)]),_:1},8,["disabled","class"])])])]}),_:1},8,["show"])]),_:1})],64))}};export{ot as default};
