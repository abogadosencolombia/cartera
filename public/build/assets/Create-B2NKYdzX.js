import{s as R,r as J,c as i,o as u,b as s,u as r,h as Y,w as b,a,x as q,d as p,F as _,e as f,t as c,v as g,g as k,p as L,n as H,A as K}from"./app-D6fBSztB.js";import{_ as Q}from"./AuthenticatedLayout-_MACS7lg.js";import{_ as d}from"./InputError-HqrJXC_t.js";import{_ as n}from"./InputLabel-B78_-JR2.js";import{_ as W}from"./PrimaryButton-CvtAZ7tP.js";import{_ as v}from"./TextInput-Bef9WMy8.js";import{C as X}from"./vue-select-BzIV980o.js";import"./ApplicationLogo-Dh4pLsNN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},oo={class:"py-12"},eo={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},ao={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},ro={class:"p-6 md:p-8 text-gray-900 dark:text-gray-100"},lo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},so=["value"],to=["value"],no={class:"md:col-span-2"},io=["value"],uo=["value"],mo=["value"],co={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},po=["value"],go=["value"],_o={class:"lg:col-span-3"},fo={class:"md:col-span-2"},vo={class:"flex items-center justify-end mt-8 border-t pt-6"},zo={__name:"Create",props:{cooperativas:{type:Array,default:()=>[]},abogadosYGestores:{type:Array,default:()=>[]},personas:{type:Array,default:()=>[]},casoAClonar:{type:Object,default:null},subtipos_proceso:{type:Array,default:()=>[]},etapas_procesales:{type:Array,default:()=>[]}},setup(m){var V,A,x,j,z,U,S,T,N,h,O,P,D,E,F,G,$,B;const t=m,l=R({cooperativa_id:((V=t.casoAClonar)==null?void 0:V.cooperativa_id)||null,user_id:((A=t.casoAClonar)==null?void 0:A.user_id)||null,deudor_id:((x=t.casoAClonar)==null?void 0:x.deudor_id)||null,codeudor1_id:((j=t.casoAClonar)==null?void 0:j.codeudor1_id)||null,codeudor2_id:((z=t.casoAClonar)==null?void 0:z.codeudor2_id)||null,referencia_credito:((U=t.casoAClonar)==null?void 0:U.referencia_credito)||"",tipo_proceso:((S=t.casoAClonar)==null?void 0:S.tipo_proceso)||"ejecutivo singular",estado_proceso:"prejurídico",tipo_garantia_asociada:((T=t.casoAClonar)==null?void 0:T.tipo_garantia_asociada)||"codeudor",fecha_apertura:new Date().toISOString().slice(0,10),fecha_vencimiento:((N=t.casoAClonar)==null?void 0:N.fecha_vencimiento)||"",monto_total:((h=t.casoAClonar)==null?void 0:h.monto_total)||0,tasa_interes_corriente:((O=t.casoAClonar)==null?void 0:O.tasa_interes_corriente)||0,tasa_moratoria:((P=t.casoAClonar)==null?void 0:P.tasa_moratoria)||0,origen_documental:((D=t.casoAClonar)==null?void 0:D.origen_documental)||"pagaré",clonado_de_id:((E=t.casoAClonar)==null?void 0:E.id)||null,subtipo_proceso:((F=t.casoAClonar)==null?void 0:F.subtipo_proceso)||"",etapa_procesal:((G=t.casoAClonar)==null?void 0:G.etapa_procesal)||"",juzgado_id:(($=t.casoAClonar)==null?void 0:$.juzgado_id)||null}),C=J((B=t.casoAClonar)!=null&&B.juzgado?[t.casoAClonar.juzgado]:[]);let w=null;const I=(y,e)=>{clearTimeout(w),y.length>=3&&(e(!0),w=setTimeout(()=>{K.get(route("juzgados.search",{q:y})).then(o=>{C.value=o.data}).catch(o=>console.error("Error buscando juzgados:",o)).finally(()=>e(!1))},500))},M=()=>{l.post(route("casos.store"))};return(y,e)=>(u(),i(_,null,[s(r(Y),{title:m.casoAClonar?"Clonando Caso":"Registrar Nuevo Caso"},null,8,["title"]),s(Q,null,{header:b(()=>[a("h2",Z,c(m.casoAClonar?"Clonando Caso #"+m.casoAClonar.id:"Registrar Nuevo Caso"),1)]),default:b(()=>[a("div",oo,[a("div",eo,[a("div",ao,[a("div",ro,[a("form",{onSubmit:q(M,["prevent"]),class:"space-y-8"},[a("section",null,[e[22]||(e[22]=a("h3",{class:"text-lg font-medium border-b pb-2 mb-6"},"Partes Involucradas",-1)),a("div",lo,[a("div",null,[s(n,{for:"cooperativa_id",value:"Cooperativa *"}),p(a("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>r(l).cooperativa_id=o),id:"cooperativa_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[17]||(e[17]=a("option",{value:null},"-- Seleccione --",-1)),(u(!0),i(_,null,f(m.cooperativas,o=>(u(),i("option",{key:o.id,value:o.id},c(o.nombre),9,so))),128))],512),[[g,r(l).cooperativa_id]]),s(d,{message:r(l).errors.cooperativa_id,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"user_id",value:"Abogado/Gestor a Cargo *"}),p(a("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r(l).user_id=o),id:"user_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[18]||(e[18]=a("option",{value:null},"-- Seleccione --",-1)),(u(!0),i(_,null,f(m.abogadosYGestores,o=>(u(),i("option",{key:o.id,value:o.id},c(o.name),9,to))),128))],512),[[g,r(l).user_id]]),s(d,{message:r(l).errors.user_id,class:"mt-2"},null,8,["message"])]),a("div",no,[s(n,{for:"deudor_id",value:"Deudor Principal *"}),p(a("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>r(l).deudor_id=o),id:"deudor_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[19]||(e[19]=a("option",{value:null},"-- Seleccione --",-1)),(u(!0),i(_,null,f(m.personas,o=>(u(),i("option",{key:o.id,value:o.id},c(o.nombre_completo)+" ("+c(o.numero_documento)+")",9,io))),128))],512),[[g,r(l).deudor_id]]),s(d,{message:r(l).errors.deudor_id,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"codeudor1_id",value:"Codeudor 1 (Opcional)"}),p(a("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>r(l).codeudor1_id=o),id:"codeudor1_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[20]||(e[20]=a("option",{value:null},"Ninguno",-1)),(u(!0),i(_,null,f(m.personas,o=>(u(),i("option",{key:o.id,value:o.id},c(o.nombre_completo)+" ("+c(o.numero_documento)+")",9,uo))),128))],512),[[g,r(l).codeudor1_id]]),s(d,{message:r(l).errors.codeudor1_id,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"codeudor2_id",value:"Codeudor 2 (Opcional)"}),p(a("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r(l).codeudor2_id=o),id:"codeudor2_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[21]||(e[21]=a("option",{value:null},"Ninguno",-1)),(u(!0),i(_,null,f(m.personas,o=>(u(),i("option",{key:o.id,value:o.id},c(o.nombre_completo)+" ("+c(o.numero_documento)+")",9,mo))),128))],512),[[g,r(l).codeudor2_id]]),s(d,{message:r(l).errors.codeudor2_id,class:"mt-2"},null,8,["message"])])])]),a("section",null,[e[29]||(e[29]=a("h3",{class:"text-lg font-medium border-b pb-2 mb-6"},"Información del Crédito y Proceso",-1)),a("div",co,[a("div",null,[s(n,{for:"referencia_credito",value:"Referencia del Crédito"}),s(v,{modelValue:r(l).referencia_credito,"onUpdate:modelValue":e[5]||(e[5]=o=>r(l).referencia_credito=o),id:"referencia_credito",type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),s(d,{message:r(l).errors.referencia_credito,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"monto_total",value:"Monto Total *"}),s(v,{modelValue:r(l).monto_total,"onUpdate:modelValue":e[6]||(e[6]=o=>r(l).monto_total=o),id:"monto_total",type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"]),s(d,{message:r(l).errors.monto_total,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"tasa_interes_corriente",value:"Tasa Interés Corriente (%) *"}),s(v,{modelValue:r(l).tasa_interes_corriente,"onUpdate:modelValue":e[7]||(e[7]=o=>r(l).tasa_interes_corriente=o),id:"tasa_interes_corriente",type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"]),s(d,{message:r(l).errors.tasa_interes_corriente,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"tasa_moratoria",value:"Tasa Moratoria (%) *"}),s(v,{modelValue:r(l).tasa_moratoria,"onUpdate:modelValue":e[8]||(e[8]=o=>r(l).tasa_moratoria=o),id:"tasa_moratoria",type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"]),s(d,{message:r(l).errors.tasa_moratoria,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"fecha_apertura",value:"Fecha de Apertura *"}),s(v,{modelValue:r(l).fecha_apertura,"onUpdate:modelValue":e[9]||(e[9]=o=>r(l).fecha_apertura=o),id:"fecha_apertura",type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),s(d,{message:r(l).errors.fecha_apertura,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"fecha_vencimiento",value:"Fecha de Vencimiento"}),s(v,{modelValue:r(l).fecha_vencimiento,"onUpdate:modelValue":e[10]||(e[10]=o=>r(l).fecha_vencimiento=o),id:"fecha_vencimiento",type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),s(d,{message:r(l).errors.fecha_vencimiento,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"tipo_proceso",value:"Tipo de Proceso *"}),p(a("select",{"onUpdate:modelValue":e[11]||(e[11]=o=>r(l).tipo_proceso=o),id:"tipo_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},e[23]||(e[23]=[a("option",null,"ejecutivo singular",-1),a("option",null,"hipotecario",-1),a("option",null,"prendario",-1),a("option",null,"libranza",-1)]),512),[[g,r(l).tipo_proceso]]),s(d,{message:r(l).errors.tipo_proceso,class:"mt-2"},null,8,["message"])]),a("div",null,[s(n,{for:"subtipo_proceso",value:"Subtipo de Proceso"}),p(a("select",{"onUpdate:modelValue":e[12]||(e[12]=o=>r(l).subtipo_proceso=o),id:"subtipo_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[24]||(e[24]=a("option",{value:""},"-- Sin especificar --",-1)),(u(!0),i(_,null,f(m.subtipos_proceso,o=>(u(),i("option",{key:o,value:o},c(o),9,po))),128))],512),[[g,r(l).subtipo_proceso]]),s(d,{class:"mt-2",message:r(l).errors.subtipo_proceso},null,8,["message"])]),a("div",null,[s(n,{for:"etapa_procesal",value:"Etapa Procesal"}),p(a("select",{"onUpdate:modelValue":e[13]||(e[13]=o=>r(l).etapa_procesal=o),id:"etapa_procesal",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[25]||(e[25]=a("option",{value:""},"-- Sin especificar --",-1)),(u(!0),i(_,null,f(m.etapas_procesales,o=>(u(),i("option",{key:o,value:o},c(o),9,go))),128))],512),[[g,r(l).etapa_procesal]]),s(d,{class:"mt-2",message:r(l).errors.etapa_procesal},null,8,["message"])]),a("div",_o,[s(n,{for:"juzgado_id",value:"Juzgado"}),s(r(X),{id:"juzgado_id",modelValue:r(l).juzgado_id,"onUpdate:modelValue":e[14]||(e[14]=o=>r(l).juzgado_id=o),options:C.value,label:"nombre",reduce:o=>o.id,placeholder:"Escribe para buscar un juzgado...",onSearch:I,filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{"no-options":b(()=>e[26]||(e[26]=[k(" Escribe al menos 3 caracteres para buscar... ",-1)])),_:1},8,["modelValue","options","reduce"]),s(d,{class:"mt-2",message:r(l).errors.juzgado_id},null,8,["message"])]),a("div",null,[s(n,{for:"tipo_garantia_asociada",value:"Tipo de Garantía *"}),p(a("select",{"onUpdate:modelValue":e[15]||(e[15]=o=>r(l).tipo_garantia_asociada=o),id:"tipo_garantia_asociada",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},e[27]||(e[27]=[a("option",null,"codeudor",-1),a("option",null,"hipotecaria",-1),a("option",null,"prendaria",-1),a("option",null,"sin garantía",-1)]),512),[[g,r(l).tipo_garantia_asociada]]),s(d,{message:r(l).errors.tipo_garantia_asociada,class:"mt-2"},null,8,["message"])]),a("div",fo,[s(n,{for:"origen_documental",value:"Origen Documental *"}),p(a("select",{"onUpdate:modelValue":e[16]||(e[16]=o=>r(l).origen_documental=o),id:"origen_documental",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},e[28]||(e[28]=[a("option",null,"pagaré",-1),a("option",null,"libranza",-1),a("option",null,"contrato",-1),a("option",null,"otro",-1)]),512),[[g,r(l).origen_documental]]),s(d,{message:r(l).errors.origen_documental,class:"mt-2"},null,8,["message"])])])]),a("div",vo,[s(r(L),{href:y.route("casos.index"),class:"text-sm text-gray-600 hover:underline mr-4"},{default:b(()=>e[30]||(e[30]=[k("Cancelar",-1)])),_:1,__:[30]},8,["href"]),s(W,{class:H({"opacity-25":r(l).processing}),disabled:r(l).processing},{default:b(()=>[k(c(m.casoAClonar?"Crear Copia del Caso":"Guardar Nuevo Caso"),1)]),_:1},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{zo as default};
