import{q as E,s as w,r as q,c as s,o as r,b as i,u as a,h as S,w as p,a as e,x as V,d as _,F as m,e as g,t as l,v,n as N,g as c,i as C}from"./app-vy-57Nhv.js";import{_ as T}from"./AuthenticatedLayout-9dgdh7FW.js";import{_ as f}from"./InputLabel-CuoiynRR.js";import{_ as $}from"./PrimaryButton-fsUrTFHq.js";import{D as B}from"./DangerButton-BwhA9wEd.js";import{_ as P}from"./Modal-CcE9rne-.js";import{_ as F}from"./SecondaryButton-BLV5g1jk.js";import{r as G}from"./TrashIcon-CNnZNk9R.js";import"./ApplicationLogo-jkf0VN9B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-3 gap-8"},j={class:"lg:col-span-1"},I={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6"},z=["value"],L=["value"],O=["value"],H={class:"flex items-center justify-end"},J={class:"lg:col-span-2"},K={key:0,class:"mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md shadow-md",role:"alert"},Q={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6 text-gray-900 dark:text-gray-100"},X={class:"overflow-x-auto"},Y={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Z={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ee={key:0},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},re={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ae=["onClick"],de={class:"p-6"},ie={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},le={class:"font-bold"},ne={class:"font-bold"},ue={class:"mt-6 flex justify-end"},he={__name:"Index",props:{requisitos:Array,cooperativas:Array,tipos_proceso:Array,tipos_documento:Array},setup(n){const k=n,b=E(),d=w({cooperativa_id:null,tipo_proceso:k.tipos_proceso[0],tipo_documento_requerido:k.tipos_documento[0]}),D=()=>{d.post(route("requisitos.store"),{onSuccess:()=>d.reset("tipo_documento_requerido")})},y=q(!1),u=q(null),R=h=>{u.value=h,y.value=!0},A=()=>{w({}).delete(route("requisitos.destroy",u.value.id),{preserveScroll:!0,onSuccess:()=>x()})},x=()=>{y.value=!1,u.value=null};return(h,t)=>(r(),s(m,null,[i(a(S),{title:"Gestión de Requisitos"}),i(T,null,{header:p(()=>t[3]||(t[3]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gestión de Requisitos de Documentos ",-1)])),default:p(()=>[e("div",M,[e("div",U,[e("div",j,[e("div",I,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Crear Nueva Regla ",-1)),t[7]||(t[7]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Define qué documentos son obligatorios para cada tipo de proceso. ",-1)),e("form",{onSubmit:V(D,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[i(f,{for:"cooperativa_id",value:"Aplicar a Cooperativa (Opcional)"}),_(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a(d).cooperativa_id=o),id:"cooperativa_id",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[t[4]||(t[4]=e("option",{value:null},"Todas las Cooperativas",-1)),(r(!0),s(m,null,g(n.cooperativas,o=>(r(),s("option",{key:o.id,value:o.id},l(o.nombre),9,z))),128))],512),[[v,a(d).cooperativa_id]])]),e("div",null,[i(f,{for:"tipo_proceso",value:"Para el Tipo de Proceso"}),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a(d).tipo_proceso=o),id:"tipo_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[(r(!0),s(m,null,g(n.tipos_proceso,o=>(r(),s("option",{key:o,value:o},l(o),9,L))),128))],512),[[v,a(d).tipo_proceso]])]),e("div",null,[i(f,{for:"tipo_documento_requerido",value:"El Documento Requerido es"}),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a(d).tipo_documento_requerido=o),id:"tipo_documento_requerido",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[(r(!0),s(m,null,g(n.tipos_documento,o=>(r(),s("option",{key:o,value:o},l(o),9,O))),128))],512),[[v,a(d).tipo_documento_requerido]])]),e("div",H,[i($,{class:N({"opacity-25":a(d).processing}),disabled:a(d).processing},{default:p(()=>t[5]||(t[5]=[c(" Guardar Regla ",-1)])),_:1,__:[5]},8,["class","disabled"])])],32)])]),e("div",J,[a(b).props.flash.success?(r(),s("div",K,[t[8]||(t[8]=e("p",{class:"font-bold"},"¡Éxito!",-1)),e("p",null,l(a(b).props.flash.success),1)])):C("",!0),e("div",Q,[e("div",W,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium mb-4"},"Reglas Actuales",-1)),e("div",X,[e("table",Y,[t[10]||(t[10]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Aplica a"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Tipo de Proceso"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Documento Requerido"),e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Eliminar")])])],-1)),e("tbody",Z,[n.requisitos.length===0?(r(),s("tr",ee,t[9]||(t[9]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"}," No hay requisitos definidos. ",-1)]))):(r(!0),s(m,{key:1},g(n.requisitos,o=>(r(),s("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",te,l(o.cooperativa?o.cooperativa.nombre:"Todas"),1),e("td",oe,l(o.tipo_proceso),1),e("td",se,l(o.tipo_documento_requerido),1),e("td",re,[e("button",{onClick:pe=>R(o),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[i(a(G),{class:"h-5 w-5"})],8,ae)])]))),128))])])])])])])])]),i(P,{show:y.value,onClose:x},{default:p(()=>[e("div",de,[t[17]||(t[17]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," ¿Eliminar Requisito? ",-1)),u.value?(r(),s("p",ie,[t[12]||(t[12]=c(" Estás a punto de eliminar la regla que requiere el documento ",-1)),e("span",le,l(u.value.tipo_documento_requerido),1),t[13]||(t[13]=c(" para los casos de tipo ",-1)),e("span",ne,l(u.value.tipo_proceso),1),t[14]||(t[14]=c(". Esta acción no se puede deshacer. ",-1))])):C("",!0),e("div",ue,[i(F,{onClick:x},{default:p(()=>t[15]||(t[15]=[c(" Cancelar ",-1)])),_:1,__:[15]}),i(B,{class:"ms-3",onClick:A},{default:p(()=>t[16]||(t[16]=[c(" Sí, Eliminar ",-1)])),_:1,__:[16]})])])]),_:1},8,["show"])]),_:1})],64))}};export{he as default};
