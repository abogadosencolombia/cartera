import{r as u,z as b,c as d,o as i,b as m,u as k,h as w,w as _,a as t,i as y,d as C,f as A,t as a,F as v,e as D,A as V}from"./app-vy-57Nhv.js";import{_ as N}from"./AuthenticatedLayout-9dgdh7FW.js";import"./ApplicationLogo-jkf0VN9B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},$={class:"py-6"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},E={class:"p-6 text-gray-900 dark:text-gray-100"},I={class:"flex items-center gap-3 mb-4"},M=["disabled"],z={key:0,class:"mb-4 rounded border border-red-200 bg-red-50 p-3 text-red-700"},F={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},U={class:"divide-y divide-gray-100 dark:divide-gray-700"},G={class:"px-4 py-2 text-sm"},L={class:"px-4 py-2 text-sm"},P={class:"px-4 py-2 text-sm"},T={class:"px-4 py-2 text-sm"},j={class:"px-4 py-2 text-sm"},H={class:"px-4 py-2 text-sm"},J={class:"px-4 py-2 text-sm"},K={key:0},O={colspan:"7",class:"px-4 py-6 text-sm text-gray-500 dark:text-gray-400"},Q={key:1},tt={__name:"BaseAlertas",props:{titulo:{type:String,required:!0},endpoint:{type:String,required:!0},defaultDays:{type:Number,default:7}},setup(x){const p=x,l=u(p.defaultDays),n=u([]),o=u(!1),c=u("");async function g(){c.value="",o.value=!0;try{const{data:s}=await V.get(`${p.endpoint}`,{params:{days:l.value}});n.value=Array.isArray(s==null?void 0:s.items)?s.items:[]}catch(s){console.error(s),c.value="No fue posible cargar los datos. Verifica que la API responda y la sesión esté activa.",n.value=[]}finally{o.value=!1}}function f(){const s=`${p.endpoint}/export?days=${encodeURIComponent(l.value)}`;window.location.href=`/api${s}`}return b(g),(s,r)=>(i(),d(v,null,[m(k(w),{title:x.titulo},null,8,["title"]),m(N,null,{header:_(()=>[t("h2",S,a(x.titulo),1)]),default:_(()=>[t("div",$,[t("div",B,[t("div",q,[t("div",E,[t("div",I,[r[1]||(r[1]=t("label",{class:"text-sm"},"Días",-1)),C(t("input",{type:"number",min:"1","onUpdate:modelValue":r[0]||(r[0]=e=>l.value=e),class:"w-24 rounded border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100"},null,512),[[A,l.value,void 0,{number:!0}]]),t("button",{onClick:g,disabled:o.value,class:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60"},a(o.value?"Cargando...":"Actualizar"),9,M),t("button",{onClick:f,class:"px-4 py-2 rounded bg-gray-700 text-white hover:bg-gray-800"}," Descargar ")]),c.value?(i(),d("div",z,a(c.value),1)):y("",!0),t("div",F,[t("table",R,[r[3]||(r[3]=t("thead",{class:"bg-gray-50 dark:bg-gray-900"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"ID"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Rad. Corto"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Etapa"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Últ. Actuación"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Vencimiento"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Días sin gestión"),t("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Encargado")])],-1)),t("tbody",U,[(i(!0),d(v,null,D(n.value,(e,h)=>(i(),d("tr",{key:h},[t("td",G,a(e.id??"-"),1),t("td",L,a(e.rad_corto??e.radCorto??"-"),1),t("td",P,a(e.etapa??"-"),1),t("td",T,a(e.ultima_actuacion??e.ultActuacion??"-"),1),t("td",j,a(e.vencimiento??"-"),1),t("td",H,a(e.dias_sin_gestion??e.diasSinGestion??"-"),1),t("td",J,a(e.encargado??"-"),1)]))),128)),!o.value&&n.value.length===0?(i(),d("tr",K,[t("td",O," Sin resultados para los últimos "+a(l.value)+" días. ",1)])):y("",!0),o.value?(i(),d("tr",Q,r[2]||(r[2]=[t("td",{colspan:"7",class:"px-4 py-6 text-sm text-gray-500 dark:text-gray-400"}," Cargando… ",-1)]))):y("",!0)])])])])])])])]),_:1})],64))}};export{tt as default};
