import{c as n,o as c,a as e,l as p,q as W,s as V,k as z,j as J,r as K,b as a,u as s,h as Q,w as i,i as C,F as b,t as u,g as x,d as j,e as P,v as X,f as F,n as M,p as Y,x as Z}from"./app-BQ1fBOAU.js";import{d as S,b as ee,r as O,a as te,_ as ae}from"./AuthenticatedLayout-Bawsgd7W.js";import h from"./KpiCard-HGY5IYAn.js";import D from"./ChartCard-DLnlPBFG.js";import{_ as B}from"./SecondaryButton-CTAXiBUM.js";import{_ as se}from"./Modal-Bv-J7BHH.js";import{_ as re}from"./PrimaryButton-CAb3hnw6.js";import{_ as oe}from"./TextInput-Dq4SX4hN.js";import{_ as de}from"./Textarea-C1OczT14.js";import{_ as T}from"./InputLabel-ZJL6u2KB.js";import{_ as N}from"./InputError-8Zq05OkV.js";import{l as R}from"./lodash-0cUgVXDq.js";import{B as le,L as ie,P as ne}from"./index-DFsncGVm.js";import{C as ce,p as me,a as ue,b as ge,B as fe,c as pe,L as be,P as xe,d as he,A as ke}from"./chart-C86AlZa2.js";import{r as ve}from"./ArrowPathIcon-D4r4tyYO.js";import{r as ye}from"./UserGroupIcon-BzWCj8YG.js";import{r as _e}from"./EnvelopeIcon-DA_csiMP.js";import{r as we}from"./UserCircleIcon-4CxqZUYO.js";import"./ApplicationLogo-CLvo8GpJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function Ce(r,g){return c(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"})])}const je={class:"py-12 bg-gray-50 dark:bg-gray-900/50"},De={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8"},$e={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md"},Ae={class:"flex flex-col md:flex-row justify-between md:items-center gap-4 mb-4"},Ee={class:"text-3xl font-bold text-gray-800 dark:text-white"},Ve={class:"flex-shrink-0"},Pe={class:"border-t border-gray-200 dark:border-gray-700 pt-4"},Fe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Me=["value"],Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Be={class:"lg:col-span-2 space-y-6"},Te={class:"lg:col-span-1 space-y-6"},Ne={class:"h-64 flex items-center justify-center"},Re={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg"},Le={class:"font-bold text-lg text-gray-900 dark:text-white mb-4 flex items-center"},Ue={class:"space-y-3"},Ie={class:"ml-4"},qe={class:"text-sm font-medium text-gray-900 dark:text-white"},Ge={class:"text-sm text-gray-500 dark:text-gray-400"},He={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-8"},We={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ze={class:"lg:col-span-2 space-y-6"},Je={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md"},Ke={class:"text-3xl font-bold text-gray-800 dark:text-white"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xe={class:"bg-red-50 dark:bg-red-900/50 p-6 rounded-2xl shadow-lg border-l-4 border-red-500"},Ye={class:"flex items-center space-x-4"},Ze={class:"flex-shrink-0 bg-red-100 dark:bg-red-900 p-3 rounded-full"},et={class:"mt-1 text-4xl font-bold text-red-700 dark:text-red-300"},tt={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg border-l-4 border-indigo-500"},at={class:"flex items-center space-x-4"},st={class:"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-full"},rt={class:"mt-1 text-4xl font-bold text-gray-900 dark:text-white"},ot={class:"lg:col-span-1 space-y-6"},dt={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg"},lt={class:"space-y-4"},it={href:"https://wa.me/573152819233",target:"_blank",class:"w-full group flex items-center p-3 rounded-lg transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700/50"},nt={class:"flex-shrink-0 bg-green-100 dark:bg-green-900/50 p-2 rounded-full"},ct={class:"flex-shrink-0 bg-blue-100 dark:bg-blue-900/50 p-2 rounded-full"},mt={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-lg"},ut={class:"flex-shrink-0 bg-gray-100 dark:bg-gray-700 p-2 rounded-full"},gt={class:"mt-6"},ft={class:"mt-6"},pt={class:"mt-6 flex justify-end"},Bt={__name:"Index",props:{kpis:Object,chartData:Object,cooperativas:Array,filters:Object,rankingAbogados:Array,userRole:String,kpis_comparison:{type:Object,default:()=>({casos_activos:{value:"+5.2%",direction:"up"},casos_demandados:{value:"-1.0%",direction:"down"},mora_total:{value:"+2.1%",direction:"up"},cumplimiento_legal:{value:"+0.5%",direction:"up"}})},sparkline_data:{type:Object,default:()=>({casos:[30,41,35,51,49,62,69],demanda:[1,2,1,3,2,4,3],mora:[10.8,12.1,9.5,11.3,13,12.5,14.2],cumplimiento:[28,30,31,29,32,33,31.3]})}},setup(r){var $,A,E;ce.register(me,ue,ge,fe,pe,be,xe,he,ke);const g=r,k=p(()=>W().props.auth.user),m=V({cooperativa_id:(($=g.filters)==null?void 0:$.cooperativa_id)||"",fecha_desde:((A=g.filters)==null?void 0:A.fecha_desde)||"",fecha_hasta:((E=g.filters)==null?void 0:E.fecha_hasta)||""}),L=()=>m.reset();z(()=>m.data(),R.debounce(function(d){J.get(route("dashboard"),R.pickBy(d),{preserveState:!0,replace:!0})},500),{deep:!0});const v=K(!1),U=()=>{l.asunto=`Consulta sobre mi caso - Cliente: ${k.value.name}`,v.value=!0},y=()=>{v.value=!1,l.reset()},l=V({asunto:"",mensaje:""}),I=()=>{l.post(route("contacto.cliente.enviar"),{preserveScroll:!0,onSuccess:()=>y()})},_=d=>{const t=parseFloat(d);return isFinite(t)?new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):"$ 0"},q=p(()=>{var t;const d=((t=g.chartData)==null?void 0:t.casosPorEstado)??{};return{labels:Object.keys(d).map(o=>o.charAt(0).toUpperCase()+o.slice(1)),datasets:[{label:"Total de Casos",backgroundColor:"#4338CA",borderRadius:6,data:Object.values(d)}]}}),G=p(()=>{var t;const d=((t=g.chartData)==null?void 0:t.incidentesPorMes)??{};return{labels:Object.keys(d),datasets:[{label:"Incidentes",borderColor:"#F97316",backgroundColor:"rgba(249, 115, 22, 0.1)",fill:!0,tension:.4,data:Object.values(d)}]}}),H=p(()=>{var t;const d=((t=g.chartData)==null?void 0:t.validacionesPorEstado)??{};return{labels:["Cumple","Incumple"],datasets:[{backgroundColor:["#10B981","#EF4444"],borderColor:["#fff","#fff"],borderWidth:2,data:[d.cumple||0,d.incumple||0]}]}}),w={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,pointStyle:"circle"}}},interaction:{intersect:!1,mode:"index"}};return(d,t)=>(c(),n(b,null,[a(s(Q),{title:"Dashboard"}),a(ae,null,{header:i(()=>t[5]||(t[5]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Dashboard ",-1)])),default:i(()=>[e("div",je,[e("div",De,[r.userRole!=="cliente"?(c(),n(b,{key:0},[e("div",$e,[e("div",Ae,[e("div",null,[e("h1",Ee,"Hola de nuevo, "+u(k.value.name),1),t[6]||(t[6]=e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"Aquí tienes un resumen del estado actual de la cartera.",-1))]),e("div",Ve,[a(B,{onClick:L},{default:i(()=>[a(s(ve),{class:"h-5 w-5 mr-2"}),t[7]||(t[7]=x(" Reiniciar Filtros ",-1))]),_:1,__:[7]})])]),e("div",Pe,[e("div",Fe,[e("div",null,[t[9]||(t[9]=e("label",{for:"cooperativa_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Cooperativa",-1)),j(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s(m).cooperativa_id=o),id:"cooperativa_id",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[8]||(t[8]=e("option",{value:""},"Todas",-1)),(c(!0),n(b,null,P(r.cooperativas,o=>(c(),n("option",{key:o.id,value:o.id},u(o.nombre),9,Me))),128))],512),[[X,s(m).cooperativa_id]])]),e("div",null,[t[10]||(t[10]=e("label",{for:"fecha_desde",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Desde",-1)),j(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>s(m).fecha_desde=o),id:"fecha_desde",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm"},null,512),[[F,s(m).fecha_desde]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"fecha_hasta",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Hasta",-1)),j(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>s(m).fecha_hasta=o),id:"fecha_hasta",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm"},null,512),[[F,s(m).fecha_hasta]])])])])]),e("div",Se,[a(h,{title:"Casos Activos",metric:r.kpis.casos_activos,icon:s(S),color:"indigo",trend:r.kpis_comparison.casos_activos,chartData:r.sparkline_data.casos},null,8,["metric","icon","trend","chartData"]),a(h,{title:"Casos en Demanda",metric:r.kpis.casos_demandados,icon:s(ee),color:"orange",trend:r.kpis_comparison.casos_demandados,chartData:r.sparkline_data.demanda},null,8,["metric","icon","trend","chartData"]),a(h,{title:"Saldo Total Activo",metric:_(r.kpis.mora_total),icon:s(O),color:"red",trend:r.kpis_comparison.mora_total,chartData:r.sparkline_data.mora},null,8,["metric","icon","trend","chartData"]),a(h,{title:"Nivel de Cumplimiento",metric:`${r.kpis.cumplimiento_legal}%`,icon:s(te),color:"green",trend:r.kpis_comparison.cumplimiento_legal,chartData:r.sparkline_data.cumplimiento},null,8,["metric","icon","trend","chartData"])]),e("div",Oe,[e("div",Be,[a(D,{title:"Distribución de Casos por Estado"},{default:i(()=>[a(s(le),{data:q.value,options:w},null,8,["data"])]),_:1}),a(D,{title:"Tendencia de Incidentes",subtitle:"Registros durante el último año"},{default:i(()=>[a(s(ie),{data:G.value,options:w},null,8,["data"])]),_:1})]),e("div",Te,[a(D,{title:"Nivel de Cumplimiento Legal"},{default:i(()=>[e("div",Ne,[a(s(ne),{data:H.value,options:w},null,8,["data"])])]),_:1}),e("div",Re,[e("h3",Le,[a(s(ye),{class:"h-6 w-6 mr-2 text-yellow-500"}),t[12]||(t[12]=x(" Ranking de Abogados",-1))]),t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},"Top 3 por monto recuperado.",-1)),e("ol",Ue,[(c(!0),n(b,null,P(r.rankingAbogados,(o,f)=>(c(),n("li",{key:o.id,class:"flex items-center p-3 rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("div",{class:M(["flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center text-white font-bold text-lg",{"bg-yellow-400":f===0,"bg-gray-400":f===1,"bg-amber-600":f===2}])},u(f+1),3),e("div",Ie,[e("p",qe,u(o.name),1),e("p",Ge,u(_(o.total_recuperado)),1)])]))),128)),!r.rankingAbogados||r.rankingAbogados.length===0?(c(),n("li",He,"No hay datos de recuperación.")):C("",!0)])])])])],64)):C("",!0),r.userRole==="cliente"?(c(),n("div",We,[e("div",ze,[e("div",Je,[e("h1",Ke,"Bienvenido(a), "+u(k.value.name),1),t[14]||(t[14]=e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"Este es el resumen de tu estado de cuenta actual.",-1))]),e("div",Qe,[e("div",Xe,[e("div",Ye,[e("div",Ze,[a(s(O),{class:"h-8 w-8 text-red-600 dark:text-red-400"})]),e("div",null,[t[15]||(t[15]=e("h3",{class:"text-base font-medium text-red-800 dark:text-red-200"},"Saldo Pendiente Total",-1)),e("p",et,u(_(r.kpis.saldo_total_pendiente)),1)])])]),e("div",tt,[e("div",at,[e("div",st,[a(s(S),{class:"h-8 w-8 text-indigo-600 dark:text-indigo-400"})]),e("div",null,[t[16]||(t[16]=e("h3",{class:"text-base font-medium text-gray-500 dark:text-gray-400"},"Casos Activos a tu nombre",-1)),e("p",rt,u(r.kpis.casos_activos),1)])])])])]),e("div",ot,[e("div",dt,[t[19]||(t[19]=e("h3",{class:"font-bold text-lg text-gray-900 dark:text-white mb-4"},"Contacte a su Gestor",-1)),e("div",lt,[e("a",it,[e("div",nt,[a(s(Ce),{class:"h-6 w-6 text-green-600 dark:text-green-400"})]),t[17]||(t[17]=e("span",{class:"ml-4 text-sm font-medium text-gray-800 dark:text-gray-200"},"Escribir por WhatsApp",-1))]),e("button",{onClick:U,class:"w-full text-left flex items-center p-3 rounded-lg transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700/50"},[e("div",ct,[a(s(_e),{class:"h-6 w-6 text-blue-600 dark:text-blue-400"})]),t[18]||(t[18]=e("span",{class:"ml-4 text-sm font-medium text-gray-800 dark:text-gray-200"},"Enviar un Correo",-1))])])]),e("div",mt,[t[21]||(t[21]=e("h3",{class:"font-bold text-lg text-gray-900 dark:text-white mb-4"},"Mi Cuenta",-1)),a(s(Y),{href:d.route("profile.edit"),class:"flex items-center p-3 rounded-lg transition-colors duration-200 hover:bg-gray-100 dark:hover:bg-gray-700/50"},{default:i(()=>[e("div",ut,[a(s(we),{class:"h-6 w-6 text-gray-600 dark:text-gray-400"})]),t[20]||(t[20]=e("span",{class:"ml-4 text-sm font-medium text-gray-800 dark:text-gray-200"},"Editar mi Perfil",-1))]),_:1,__:[20]},8,["href"])])])])):C("",!0)])]),a(se,{show:v.value,onClose:y},{default:i(()=>[e("form",{onSubmit:Z(I,["prevent"]),class:"p-6"},[t[24]||(t[24]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Enviar Mensaje a mi Gestor",-1)),t[25]||(t[25]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Tu mensaje será enviado directamente a la firma de abogados.",-1)),e("div",gt,[a(T,{for:"asunto",value:"Asunto"}),a(oe,{id:"asunto",modelValue:s(l).asunto,"onUpdate:modelValue":t[3]||(t[3]=o=>s(l).asunto=o),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),a(N,{class:"mt-2",message:s(l).errors.asunto},null,8,["message"])]),e("div",ft,[a(T,{for:"mensaje",value:"Mensaje"}),a(de,{id:"mensaje",modelValue:s(l).mensaje,"onUpdate:modelValue":t[4]||(t[4]=o=>s(l).mensaje=o),class:"mt-1 block w-full",rows:"6",required:""},null,8,["modelValue"]),a(N,{class:"mt-2",message:s(l).errors.mensaje},null,8,["message"])]),e("div",pt,[a(B,{onClick:y},{default:i(()=>t[22]||(t[22]=[x(" Cancelar ",-1)])),_:1,__:[22]}),a(re,{class:M(["ms-3",{"opacity-25":s(l).processing}]),disabled:s(l).processing},{default:i(()=>t[23]||(t[23]=[x(" Enviar Mensaje ",-1)])),_:1,__:[23]},8,["class","disabled"])])],32)]),_:1},8,["show"])]),_:1})],64))}};export{Bt as default};
