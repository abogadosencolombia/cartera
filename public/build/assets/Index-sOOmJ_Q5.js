import{_ as D}from"./AuthenticatedLayout-CjDncLrz.js";import{_ as A}from"./Modal-Dfvvi1ej.js";import{D as N}from"./DangerButton-BT4upccn.js";import{_ as E}from"./SecondaryButton-CTekWCLN.js";import{r as _,s as F,c as d,o as i,b as r,u as n,h as T,w as l,a as e,F as h,e as V,i as g,t as a,n as b,p as k,g as u}from"./app-CJXh-Pjp.js";import{r as $}from"./DocumentDuplicateIcon-CREjhsLJ.js";import{r as B}from"./TrashIcon-DFonUCa6.js";import"./ApplicationLogo-BzDRqvbd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"flex justify-between items-center"},S={class:"py-12"},j={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6 text-gray-900 dark:text-gray-100"},q={class:"overflow-x-auto"},L={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},I={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},M={class:"px-6 py-4 whitespace-nowrap"},R={class:"flex items-center"},H=["title"],J={class:"text-sm font-medium text-gray-900 dark:text-white"},K={class:"text-sm text-gray-500 dark:text-gray-400"},P={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Q={class:"px-6 py-4 whitespace-nowrap"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},X={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4"},Y=["onClick"],Z={class:"p-6"},ee={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},te={class:"font-bold"},se={class:"mt-6 flex justify-end"},xe={__name:"Index",props:{casos:Array,can:Object},setup(y){const x=_(!1),c=_(null),p=F({}),w=o=>{c.value=o,x.value=!0},v=()=>{p.delete(route("casos.destroy",c.value.id),{preserveScroll:!0,onSuccess:()=>m()})},m=()=>{x.value=!1,c.value=null},f={red:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",green:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",blue:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},C=o=>{if(!o)return"N/A";const t=new Date(o),s=t.getTimezoneOffset()*6e4;return new Date(t.getTime()+s).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"})};return(o,t)=>(i(),d(h,null,[r(n(T),{title:"Gestión de Casos"}),r(D,null,{header:l(()=>[e("div",O,[t[1]||(t[1]=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gestión de Casos ",-1)),r(n(k),{href:o.route("casos.create"),class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:l(()=>t[0]||(t[0]=[u(" Registrar Nuevo Caso ",-1)])),_:1,__:[0]},8,["href"])])]),default:l(()=>[e("div",S,[e("div",j,[e("div",z,[e("div",G,[e("div",q,[e("table",L,[t[3]||(t[3]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Deudor"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Cooperativa"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Estado Actual"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Fecha Apertura"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Abogado/Gestor"),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Acciones")])])],-1)),e("tbody",I,[(i(!0),d(h,null,V(y.casos,s=>(i(),d("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition"},[e("td",M,[e("div",R,[s.clonado_de_id?(i(),d("div",{key:0,class:"mr-3 flex-shrink-0",title:"Clon del caso #"+s.clonado_de_id},[r(n($),{class:"h-5 w-5 text-blue-400"})],8,H)):g("",!0),e("div",null,[e("div",J,a(s.deudor.nombre_completo),1),e("div",K,"Doc. "+a(s.deudor.numero_documento),1)])])]),e("td",P,a(s.cooperativa?s.cooperativa.nombre:"N/A"),1),e("td",Q,[s.semaforo?(i(),d("span",{key:0,class:b(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",f[s.semaforo.color]||f.gray])},a(s.semaforo.text),3)):g("",!0)]),e("td",U,a(C(s.fecha_apertura)),1),e("td",W,a(s.user?s.user.name:"N/A"),1),e("td",X,[r(n(k),{href:o.route("casos.show",s.id),class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},{default:l(()=>t[2]||(t[2]=[u("Ver Ficha",-1)])),_:2,__:[2]},1032,["href"]),y.can.delete_cases?(i(),d("button",{key:0,onClick:re=>w(s),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[r(n(B),{class:"h-5 w-5"})],8,Y)):g("",!0)])]))),128))])])])])])])]),r(A,{show:x.value,onClose:m},{default:l(()=>[e("div",Z,[t[7]||(t[7]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," ¿Estás seguro de que quieres eliminar este caso? ",-1)),c.value?(i(),d("p",ee,[u(" Estás a punto de eliminar permanentemente el Caso #"+a(c.value.id)+" del deudor ",1),e("span",te,a(c.value.deudor.nombre_completo),1),t[4]||(t[4]=u(". Esta acción no se puede deshacer. ",-1))])):g("",!0),e("div",se,[r(E,{onClick:m},{default:l(()=>t[5]||(t[5]=[u(" Cancelar ",-1)])),_:1,__:[5]}),r(N,{class:b(["ms-3",{"opacity-25":n(p).processing}]),disabled:n(p).processing,onClick:v},{default:l(()=>t[6]||(t[6]=[u(" Sí, Eliminar Caso ",-1)])),_:1,__:[6]},8,["class","disabled"])])])]),_:1},8,["show"])]),_:1})],64))}};export{xe as default};
