import{P as S,a2 as ke,r as E,k as Te,j as je,c as y,o as h,b as Z,u as Se,h as Oe,w as ee,a as t,i as qe,d as I,f as N,F as te,e as Re,t as p,x as Ee}from"./app-D6fBSztB.js";import{_ as Ie}from"./AuthenticatedLayout-_MACS7lg.js";import"./ApplicationLogo-Dh4pLsNN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var L,re;function X(){if(re)return L;re=1;function a(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}return L=a,L}var C,ae;function Ne(){if(ae)return C;ae=1;var a=typeof S=="object"&&S&&S.Object===Object&&S;return C=a,C}var D,ie;function pe(){if(ie)return D;ie=1;var a=Ne(),r=typeof self=="object"&&self&&self.Object===Object&&self,i=a||r||Function("return this")();return D=i,D}var G,ne;function Le(){if(ne)return G;ne=1;var a=pe(),r=function(){return a.Date.now()};return G=r,G}var F,se;function Ce(){if(se)return F;se=1;var a=/\s/;function r(i){for(var n=i.length;n--&&a.test(i.charAt(n)););return n}return F=r,F}var M,oe;function De(){if(oe)return M;oe=1;var a=Ce(),r=/^\s+/;function i(n){return n&&n.slice(0,a(n)+1).replace(r,"")}return M=i,M}var V,de;function ve(){if(de)return V;de=1;var a=pe(),r=a.Symbol;return V=r,V}var P,le;function Ge(){if(le)return P;le=1;var a=ve(),r=Object.prototype,i=r.hasOwnProperty,n=r.toString,d=a?a.toStringTag:void 0;function f(l){var u=i.call(l,d),o=l[d];try{l[d]=void 0;var e=!0}catch{}var s=n.call(l);return e&&(u?l[d]=o:delete l[d]),s}return P=f,P}var W,ue;function Fe(){if(ue)return W;ue=1;var a=Object.prototype,r=a.toString;function i(n){return r.call(n)}return W=i,W}var B,ce;function Me(){if(ce)return B;ce=1;var a=ve(),r=Ge(),i=Fe(),n="[object Null]",d="[object Undefined]",f=a?a.toStringTag:void 0;function l(u){return u==null?u===void 0?d:n:f&&f in Object(u)?r(u):i(u)}return B=l,B}var U,fe;function Ve(){if(fe)return U;fe=1;function a(r){return r!=null&&typeof r=="object"}return U=a,U}var A,ge;function Pe(){if(ge)return A;ge=1;var a=Me(),r=Ve(),i="[object Symbol]";function n(d){return typeof d=="symbol"||r(d)&&a(d)==i}return A=n,A}var $,me;function We(){if(me)return $;me=1;var a=De(),r=X(),i=Pe(),n=NaN,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function o(e){if(typeof e=="number")return e;if(i(e))return n;if(r(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=r(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=a(e);var m=f.test(e);return m||l.test(e)?u(e.slice(2),m?2:8):d.test(e)?n:+e}return $=o,$}var J,xe;function Be(){if(xe)return J;xe=1;var a=X(),r=Le(),i=We(),n="Expected a function",d=Math.max,f=Math.min;function l(u,o,e){var s,m,T,v,g,b,_=0,z=!1,w=!1,O=!0;if(typeof u!="function")throw new TypeError(n);o=i(o)||0,a(e)&&(z=!!e.leading,w="maxWait"in e,T=w?d(i(e.maxWait)||0,o):T,O="trailing"in e?!!e.trailing:O);function q(c){var x=s,k=m;return s=m=void 0,_=c,v=u.apply(k,x),v}function ye(c){return _=c,g=setTimeout(j,o),z?q(c):v}function he(c){var x=c-b,k=c-_,Y=o-x;return w?f(Y,T-k):Y}function K(c){var x=c-b,k=c-_;return b===void 0||x>=o||x<0||w&&k>=T}function j(){var c=r();if(K(c))return Q(c);g=setTimeout(j,he(c))}function Q(c){return g=void 0,O&&s?q(c):(s=m=void 0,v)}function _e(){g!==void 0&&clearTimeout(g),_=0,s=b=m=g=void 0}function we(){return g===void 0?v:Q(r())}function R(){var c=r(),x=K(c);if(s=arguments,m=this,b=c,x){if(g===void 0)return ye(b);if(w)return clearTimeout(g),g=setTimeout(j,o),q(b)}return g===void 0&&(g=setTimeout(j,o)),v}return R.cancel=_e,R.flush=we,R}return J=l,J}var H,be;function Ue(){if(be)return H;be=1;var a=Be(),r=X(),i="Expected a function";function n(d,f,l){var u=!0,o=!0;if(typeof d!="function")throw new TypeError(i);return r(l)&&(u="leading"in l?!!l.leading:u,o="trailing"in l?!!l.trailing:o),a(d,f,{leading:u,maxWait:f,trailing:o})}return H=n,H}var Ae=Ue();const $e=ke(Ae),Je={class:"py-12"},He={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Xe={class:"mb-6 bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6"},ze={class:"flex flex-col md:flex-row md:justify-between md:items-end gap-4"},Ke={class:"grid grid-cols-1 sm:grid-cols-3 gap-4 flex-grow"},Qe={class:"mt-4 md:mt-0"},Ye=["href"],Ze={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},et={class:"p-6 text-gray-900 dark:text-gray-100"},tt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},rt={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},at={class:"px-6 py-4 whitespace-nowrap text-sm"},it={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 truncate max-w-xs"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-sm"},dt={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},lt={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"},ut={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},ct=["onClick"],ft={class:"p-6"},gt={class:"flex justify-between items-center pb-3 border-b dark:border-gray-700"},mt={class:"text-xl font-semibold text-gray-900 dark:text-white"},xt={class:"mt-4 space-y-4 max-h-[60vh] overflow-y-auto"},bt={class:"bg-gray-100 dark:bg-gray-900 p-3 rounded-md text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap"},pt={class:"bg-gray-100 dark:bg-gray-900 p-3 rounded-md text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap"},wt={__name:"Index",props:{logs:Object,filters:Object},setup(a){const r=a,i=E({servicio:r.filters.servicio||"",fecha_desde:r.filters.fecha_desde||"",fecha_hasta:r.filters.fecha_hasta||""}),n=E(!1),d=E(null),f=o=>{d.value=o,n.value=!0},l=()=>{n.value=!1,d.value=null},u=o=>{try{const e=typeof o=="string"?JSON.parse(o):o;return JSON.stringify(e,null,2)}catch{return o}};return Te(i,$e(()=>{je.get(route("integraciones.index"),i.value,{preserveState:!0,replace:!0})},300),{deep:!0}),(o,e)=>(h(),y(te,null,[Z(Se(Oe),{title:"Logs de Integraciones"}),Z(Ie,null,{header:ee(()=>e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Panel de Integraciones Externas ",-1)])),default:ee(()=>[t("div",Je,[t("div",He,[t("div",Xe,[t("div",ze,[t("div",Ke,[t("div",null,[e[5]||(e[5]=t("label",{for:"servicio",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Servicio",-1)),I(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value.servicio=s),type:"text",id:"servicio",class:"mt-1 block w-full rounded-md ..."},null,512),[[N,i.value.servicio]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"fecha_desde",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Desde",-1)),I(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.fecha_desde=s),type:"date",id:"fecha_desde",class:"mt-1 block w-full rounded-md ..."},null,512),[[N,i.value.fecha_desde]])]),t("div",null,[e[7]||(e[7]=t("label",{for:"fecha_hasta",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Hasta",-1)),I(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.fecha_hasta=s),type:"date",id:"fecha_hasta",class:"mt-1 block w-full rounded-md ..."},null,512),[[N,i.value.fecha_hasta]])])]),t("div",Qe,[t("a",{href:o.route("integraciones.exportar",i.value),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700"}," Exportar a Excel ",8,Ye)])])]),t("div",Ze,[t("div",et,[t("table",tt,[e[8]||(e[8]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Servicio"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Endpoint"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones")])],-1)),t("tbody",rt,[(h(!0),y(te,null,Re(a.logs.data,s=>(h(),y("tr",{key:s.id},[t("td",at,p(s.id),1),t("td",it,p(s.servicio),1),t("td",nt,p(s.endpoint),1),t("td",st,p(new Date(s.fecha_solicitud).toLocaleString()),1),t("td",ot,[JSON.stringify(s.respuesta).includes("error")?(h(),y("span",lt," Error ")):(h(),y("span",dt," Éxito "))]),t("td",ut,[t("button",{onClick:m=>f(s),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200"}," Ver Detalle ",8,ct)])]))),128))])])])])])]),n.value?(h(),y("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:l},[t("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4",onClick:e[3]||(e[3]=Ee(()=>{},["stop"]))},[t("div",ft,[t("div",gt,[t("h3",mt,"Detalle del Log #"+p(d.value.id),1),t("button",{onClick:l,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},"×")]),t("div",xt,[t("div",null,[e[9]||(e[9]=t("h4",{class:"font-bold text-gray-800 dark:text-gray-200"},"Datos Enviados:",-1)),t("pre",bt,p(u(d.value.datos_enviados)),1)]),t("div",null,[e[10]||(e[10]=t("h4",{class:"font-bold text-gray-800 dark:text-gray-200"},"Respuesta Recibida:",-1)),t("pre",pt,p(u(d.value.respuesta)),1)])])])])])):qe("",!0)]),_:1})],64))}};export{wt as default};
