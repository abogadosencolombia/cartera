import{r as F,s as B,l as N,c as M,o as h,b as a,u as s,h as S,w as c,a as o,i as $,t as x,x as P,n as w,g as _,B as T,p as H,F as O,j as G}from"./app-CJXh-Pjp.js";import{_ as q}from"./AuthenticatedLayout-CjDncLrz.js";import{_ as I}from"./PrimaryButton-D7hB7Y7-.js";import{_ as E}from"./SecondaryButton-CTekWCLN.js";import{D}from"./DangerButton-BT4upccn.js";import{_ as t}from"./InputLabel-DWTjBLJB.js";import{_ as i}from"./InputError-D6J_Ekxe.js";import{_ as p}from"./TextInput-A7ldSpJd.js";import{_ as k}from"./Textarea-DnSdfpkz.js";import{_ as f}from"./AsyncSelect-BWKrjmsh.js";import{_ as J}from"./Modal-Dfvvi1ej.js";import"./ApplicationLogo-BzDRqvbd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"flex flex-col md:flex-row items-center justify-between gap-4"},K={class:"flex items-center gap-3"},Q={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},W={class:"text-indigo-600 dark:text-indigo-400"},X={class:"flex items-center gap-3"},Y={class:"py-12"},Z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ee={key:0,class:"bg-yellow-50 dark:bg-gray-800 border-l-4 border-yellow-400 p-4 mb-8 rounded-r-lg"},oe={class:"flex"},ae={class:"ml-3"},se={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},le={class:"whitespace-pre-wrap"},re={class:"lg:col-span-2 space-y-8"},de=["disabled"],te={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6"},ie={class:"border-t border-gray-200 dark:border-gray-700 pt-6 grid grid-cols-1 md:grid-cols-2 gap-6"},ne={class:"md:col-span-2"},ue={class:"md:col-span-2"},me={class:"md:col-span-2"},ce={class:"md:col-span-2"},pe={class:"lg:col-span-1"},ge=["disabled"],ve={class:"sticky top-8 space-y-6"},_e={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6"},fe={class:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-6"},be={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6"},xe={class:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-6"},we={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg p-6"},ke={class:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-6"},ye={class:"p-6"},he={class:"mt-6"},Ve={class:"mt-6 flex justify-end gap-3"},Se={__name:"Edit",props:{proceso:{type:Object,required:!0}},setup(g){const d=g,b=F(!1),m=B({nota_cierre:""}),R=()=>{m.reset(),b.value=!0},A=()=>{m.patch(route("procesos.close",d.proceso.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1,m.reset()}})},y=n=>n?n.substring(0,10):"",v=(n,e)=>n?{id:n.id,label:n[e]}:null,l=B({_method:"PATCH",abogado_id:v(d.proceso.abogado,"name"),responsable_revision_id:v(d.proceso.responsable_revision,"name"),juzgado_id:v(d.proceso.juzgado,"nombre"),tipo_proceso_id:v(d.proceso.tipo_proceso,"nombre"),demandante_id:v(d.proceso.demandante,"nombre_completo"),demandado_id:v(d.proceso.demandado,"nombre_completo"),radicado:d.proceso.radicado??"",fecha_radicado:y(d.proceso.fecha_radicado),fecha_revision:y(d.proceso.fecha_revision),fecha_proxima_revision:y(d.proceso.fecha_proxima_revision),naturaleza:d.proceso.naturaleza??"",asunto:d.proceso.asunto??"",correo_radicacion:d.proceso.correo_radicacion??"",ultima_actuacion:d.proceso.ultima_actuacion??"",link_expediente:d.proceso.link_expediente??"",ubicacion_drive:d.proceso.ubicacion_drive??"",correos_juzgado:d.proceso.correos_juzgado??"",observaciones:d.proceso.observaciones??""}),V=()=>{var e,r,z,C,j,U;const n={...l.data(),abogado_id:((e=l.abogado_id)==null?void 0:e.id)??null,responsable_revision_id:((r=l.responsable_revision_id)==null?void 0:r.id)??null,juzgado_id:((z=l.juzgado_id)==null?void 0:z.id)??null,tipo_proceso_id:((C=l.tipo_proceso_id)==null?void 0:C.id)??null,demandante_id:((j=l.demandante_id)==null?void 0:j.id)??null,demandado_id:((U=l.demandado_id)==null?void 0:U.id)??null};G.post(route("procesos.update",d.proceso.id),n,{preserveScroll:!0})},u=N(()=>d.proceso.estado==="CERRADO");return(n,e)=>(h(),M(O,null,[a(s(S),{title:`Editar Radicado ${g.proceso.radicado??""}`},null,8,["title"]),a(q,null,{header:c(()=>[o("div",L,[o("div",null,[o("div",K,[o("h2",Q,[e[21]||(e[21]=_(" Editar Expediente ",-1)),o("span",W,x(g.proceso.radicado??"—"),1)]),o("span",{class:w(["inline-flex items-center rounded-md px-2 py-1 text-xs font-bold",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":!u.value,"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":u.value}])},x(g.proceso.estado),3)]),e[22]||(e[22]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Actualiza la información y el estado del proceso.",-1))]),o("div",X,[a(s(H),{href:n.route("procesos.show",g.proceso.id)},{default:c(()=>[a(E,null,{default:c(()=>e[23]||(e[23]=[_("Cancelar",-1)])),_:1,__:[23]})]),_:1},8,["href"]),a(I,{onClick:V,disabled:s(l).processing||u.value,class:w({"opacity-25":s(l).processing||u.value})},{default:c(()=>[e[24]||(e[24]=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})],-1)),_(" "+x(s(l).processing?"Guardando…":"Guardar Cambios"),1)]),_:1,__:[24]},8,["disabled","class"]),u.value?$("",!0):(h(),T(D,{key:0,onClick:R},{default:c(()=>e[25]||(e[25]=[_("Cerrar Caso",-1)])),_:1,__:[25]}))])])]),default:c(()=>[o("div",Y,[o("div",Z,[u.value?(h(),M("div",ee,[o("div",oe,[e[28]||(e[28]=o("div",{class:"flex-shrink-0"},[o("svg",{class:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),o("div",ae,[e[27]||(e[27]=o("p",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},"Este caso está cerrado.",-1)),o("div",se,[e[26]||(e[26]=o("p",{class:"font-semibold"},"Nota de cierre:",-1)),o("p",le,x(g.proceso.nota_cierre),1)])])])])):$("",!0),o("form",{onSubmit:P(V,["prevent"]),class:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start"},[o("div",re,[o("fieldset",{disabled:u.value,class:w({"opacity-60":u.value})},[o("div",te,[e[29]||(e[29]=o("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-4"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),o("span",null,"Información del Proceso")],-1)),o("div",ie,[o("div",ne,[a(t,{for:"asunto",value:"Asunto"}),a(k,{id:"asunto",modelValue:s(l).asunto,"onUpdate:modelValue":e[0]||(e[0]=r=>s(l).asunto=r),rows:"2",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.asunto,class:"mt-2"},null,8,["message"])]),o("div",ue,[a(t,{for:"juzgado",value:"Juzgado / Entidad"}),a(f,{id:"juzgado",modelValue:s(l).juzgado_id,"onUpdate:modelValue":e[1]||(e[1]=r=>s(l).juzgado_id=r),endpoint:n.route("juzgados.search"),"min-chars":3,placeholder:"Buscar juzgado..."},null,8,["modelValue","endpoint"]),a(i,{message:s(l).errors.juzgado_id,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"tipo_proceso",value:"Tipo de Proceso"}),a(f,{id:"tipo_proceso",modelValue:s(l).tipo_proceso_id,"onUpdate:modelValue":e[2]||(e[2]=r=>s(l).tipo_proceso_id=r),endpoint:n.route("tipos-proceso.search"),placeholder:"Buscar tipo..."},null,8,["modelValue","endpoint"]),a(i,{message:s(l).errors.tipo_proceso_id,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"naturaleza",value:"Naturaleza (opcional)"}),a(p,{id:"naturaleza",modelValue:s(l).naturaleza,"onUpdate:modelValue":e[3]||(e[3]=r=>s(l).naturaleza=r),class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.naturaleza,class:"mt-2"},null,8,["message"])]),o("div",me,[a(t,{for:"ultima_actuacion",value:"Última Actuación"}),a(k,{id:"ultima_actuacion",modelValue:s(l).ultima_actuacion,"onUpdate:modelValue":e[4]||(e[4]=r=>s(l).ultima_actuacion=r),rows:"4",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.ultima_actuacion,class:"mt-2"},null,8,["message"])]),o("div",ce,[a(t,{for:"observaciones",value:"Observaciones (opcional)"}),a(k,{id:"observaciones",modelValue:s(l).observaciones,"onUpdate:modelValue":e[5]||(e[5]=r=>s(l).observaciones=r),rows:"4",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.observaciones,class:"mt-2"},null,8,["message"])])])])],10,de)]),o("div",pe,[o("fieldset",{disabled:u.value,class:w({"opacity-60":u.value})},[o("div",ve,[o("div",_e,[e[30]||(e[30]=o("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-4"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18"})]),o("span",null,"Seguimiento y Fechas")],-1)),o("div",fe,[o("div",null,[a(t,{for:"radicado",value:"Radicado"}),a(p,{id:"radicado",modelValue:s(l).radicado,"onUpdate:modelValue":e[6]||(e[6]=r=>s(l).radicado=r),class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.radicado,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"fecha_radicado",value:"Fecha de Radicado"}),a(p,{id:"fecha_radicado",modelValue:s(l).fecha_radicado,"onUpdate:modelValue":e[7]||(e[7]=r=>s(l).fecha_radicado=r),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.fecha_radicado,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"fecha_revision",value:"Fecha de Revisión"}),a(p,{id:"fecha_revision",modelValue:s(l).fecha_revision,"onUpdate:modelValue":e[8]||(e[8]=r=>s(l).fecha_revision=r),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.fecha_revision,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"fecha_proxima_revision",value:"Fecha Próxima Revisión"}),a(p,{id:"fecha_proxima_revision",modelValue:s(l).fecha_proxima_revision,"onUpdate:modelValue":e[9]||(e[9]=r=>s(l).fecha_proxima_revision=r),type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.fecha_proxima_revision,class:"mt-2"},null,8,["message"])])])]),o("div",be,[e[31]||(e[31]=o("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-4"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197"})]),o("span",null,"Partes y Responsables")],-1)),o("div",xe,[o("div",null,[a(t,{for:"demandante",value:"Demandante / Denunciante"}),a(f,{id:"demandante",modelValue:s(l).demandante_id,"onUpdate:modelValue":e[10]||(e[10]=r=>s(l).demandante_id=r),endpoint:n.route("personas.search"),placeholder:"Buscar persona..."},null,8,["modelValue","endpoint"]),a(i,{message:s(l).errors.demandante_id,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"demandado",value:"Demandado / Denunciado"}),a(f,{id:"demandado",modelValue:s(l).demandado_id,"onUpdate:modelValue":e[11]||(e[11]=r=>s(l).demandado_id=r),endpoint:n.route("personas.search"),placeholder:"Buscar persona..."},null,8,["modelValue","endpoint"]),a(i,{message:s(l).errors.demandado_id,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"abogado",value:"Abogado / Gestor"}),a(f,{id:"abogado",modelValue:s(l).abogado_id,"onUpdate:modelValue":e[12]||(e[12]=r=>s(l).abogado_id=r),endpoint:n.route("users.search"),placeholder:"Buscar abogado..."},null,8,["modelValue","endpoint"]),a(i,{message:s(l).errors.abogado_id,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"responsable",value:"Responsable de Revisión"}),a(f,{id:"responsable",modelValue:s(l).responsable_revision_id,"onUpdate:modelValue":e[13]||(e[13]=r=>s(l).responsable_revision_id=r),endpoint:n.route("users.search"),placeholder:"Buscar responsable..."},null,8,["modelValue","endpoint"]),a(i,{message:s(l).errors.responsable_revision_id,class:"mt-2"},null,8,["message"])])])]),o("div",we,[e[32]||(e[32]=o("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-4"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})]),o("span",null,"Enlaces y Contacto")],-1)),o("div",ke,[o("div",null,[a(t,{for:"link_expediente",value:"Link de expediente digital"}),a(p,{id:"link_expediente",modelValue:s(l).link_expediente,"onUpdate:modelValue":e[14]||(e[14]=r=>s(l).link_expediente=r),type:"url",class:"mt-1 block w-full",placeholder:"https://…"},null,8,["modelValue"]),a(i,{message:s(l).errors.link_expediente,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"ubicacion_drive",value:"Ubicación en Drive"}),a(p,{id:"ubicacion_drive",modelValue:s(l).ubicacion_drive,"onUpdate:modelValue":e[15]||(e[15]=r=>s(l).ubicacion_drive=r),type:"url",class:"mt-1 block w-full",placeholder:"https://drive.google.com/…"},null,8,["modelValue"]),a(i,{message:s(l).errors.ubicacion_drive,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"correo_radicacion",value:"Correo de radicación"}),a(p,{id:"correo_radicacion",modelValue:s(l).correo_radicacion,"onUpdate:modelValue":e[16]||(e[16]=r=>s(l).correo_radicacion=r),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.correo_radicacion,class:"mt-2"},null,8,["message"])]),o("div",null,[a(t,{for:"correos_juzgado",value:"Correos del juzgado"}),a(p,{id:"correos_juzgado",modelValue:s(l).correos_juzgado,"onUpdate:modelValue":e[17]||(e[17]=r=>s(l).correos_juzgado=r),class:"mt-1 block w-full"},null,8,["modelValue"]),a(i,{message:s(l).errors.correos_juzgado,class:"mt-2"},null,8,["message"])])])])])],10,ge)])],32)])]),a(J,{show:b.value,onClose:e[20]||(e[20]=r=>b.value=!1)},{default:c(()=>[o("div",ye,[e[34]||(e[34]=o("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Cerrar Caso ",-1)),e[35]||(e[35]=o("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Por favor, proporciona una nota de cierre para este caso. Esta acción no se puede deshacer. ",-1)),o("div",he,[a(t,{for:"nota_cierre",value:"Nota de Cierre",class:"sr-only"}),a(k,{id:"nota_cierre",modelValue:s(m).nota_cierre,"onUpdate:modelValue":e[18]||(e[18]=r=>s(m).nota_cierre=r),class:"w-full",rows:"4",placeholder:"Explica por qué se cierra el caso (ej. 'Terminación del proceso por pago total de la obligación', 'Sentencia absolutoria', etc.)"},null,8,["modelValue"]),a(i,{message:s(m).errors.nota_cierre,class:"mt-2"},null,8,["message"])]),o("div",Ve,[a(E,{onClick:e[19]||(e[19]=r=>b.value=!1)},{default:c(()=>e[33]||(e[33]=[_("Cancelar",-1)])),_:1,__:[33]}),a(D,{onClick:A,disabled:s(m).processing,class:w({"opacity-25":s(m).processing})},{default:c(()=>[_(x(s(m).processing?"Cerrando...":"Confirmar Cierre"),1)]),_:1},8,["disabled","class"])])])]),_:1},8,["show"])]),_:1})],64))}};export{Se as default};
