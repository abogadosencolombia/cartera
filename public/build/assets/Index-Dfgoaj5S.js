import{r as f,k as T,j as F,l as O,m as j,c as d,o as l,b as r,u as i,h as E,w as u,a as e,d as w,f as q,v as $,i as D,F as y,e as C,t as a,g as b,T as M,p as I}from"./app-D6fBSztB.js";import{r as U,_ as G}from"./AuthenticatedLayout-_MACS7lg.js";import A from"./KpiCard-nzCrhiOo.js";import{l as S}from"./lodash-Bh_TLi56.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as L}from"./FolderOpenIcon-CpyEQnzr.js";import{r as P}from"./BuildingOffice2Icon-DgRAI-ZF.js";import{r as Z}from"./UserGroupIcon-Do80FFrK.js";import"./ApplicationLogo-Dh4pLsNN.js";import"./index-B7WHlBAy.js";import"./chart-C86AlZa2.js";const H={class:"flex justify-between items-center"},J={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight flex items-center"},K={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},X={class:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end"},ee={class:"md:col-span-1"},te={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},se={class:"space-y-2 p-4"},oe={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},re={class:"p-4 flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4"},ae={class:"flex-grow flex items-center"},de=["src"],le={class:"font-bold text-lg text-gray-900 dark:text-white"},ie={class:"text-sm text-gray-500 dark:text-gray-400"},ne={class:"grid grid-cols-3 gap-4 text-center w-full md:w-auto"},ce={class:"font-semibold text-gray-800 dark:text-gray-200"},ue={class:"font-semibold text-gray-800 dark:text-gray-200"},me={class:"font-semibold text-gray-800 dark:text-gray-200"},ge={class:"flex-shrink-0"},ve={key:0,class:"border-t border-gray-200 dark:border-gray-700 p-4"},xe={class:"grid md:grid-cols-2 gap-6"},pe={class:"space-y-2 text-sm max-h-60 overflow-y-auto pr-2"},fe={class:"text-gray-500 text-xs block"},ye={class:"font-semibold text-gray-700 dark:text-gray-300"},be={class:"space-y-1 text-sm"},_e={__name:"Index",props:{filters:Object,rows:Array},setup(_){var N,R,V;const n=_,m=f(((N=n.filters)==null?void 0:N.q)??""),g=f(((R=n.filters)==null?void 0:R.sort)??"total_recovered"),v=f(((V=n.filters)==null?void 0:V.dir)??"desc"),x=f(null);T([m,g,v],S.debounce(()=>{F.get(route("admin.gestores.index"),S.pickBy({q:m.value,sort:g.value,dir:v.value}),{preserveState:!0,replace:!0,only:["rows","filters"]})},500));const k=O(()=>{const c=(n.rows||[]).reduce((s,o)=>s+(o.total_recovered||0),0),t=(n.rows||[]).reduce((s,o)=>s+(o.casos_count||0),0),p=new Set;return(n.rows||[]).forEach(s=>(s.cooperativas||[]).forEach(o=>p.add(o.id))),{totalRecovered:c,totalCasos:t,totalCoops:p.size}}),h=c=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(c||0);return(c,t)=>{const p=j("SecondaryButton");return l(),d(y,null,[r(i(E),{title:"Reporte de Gestores"}),r(G,null,{header:u(()=>[e("div",H,[e("h2",J,[r(i(Z),{class:"h-6 w-6 mr-2"}),t[3]||(t[3]=b(" Reporte de Rendimiento de Gestores y Abogados ",-1))])])]),default:u(()=>[e("div",K,[e("div",Q,[e("div",W,[r(A,{title:"Total Recuperado",metric:h(k.value.totalRecovered),icon:i(U),color:"green"},null,8,["metric","icon"]),r(A,{title:"Total de Casos Asignados",metric:k.value.totalCasos,icon:i(L),color:"indigo"},null,8,["metric","icon"]),r(A,{title:"Cooperativas Atendidas",metric:k.value.totalCoops,icon:i(P),color:"orange"},null,8,["metric","icon"])]),e("div",X,[e("div",Y,[e("div",ee,[t[4]||(t[4]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Filtrar por nombre",-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),id:"search",type:"text",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Buscar abogado..."},null,512),[[q,m.value]])]),e("div",null,[t[6]||(t[6]=e("label",{for:"sort",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Ordenar por",-1)),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),id:"sort",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},t[5]||(t[5]=[e("option",{value:"total_recovered"},"Monto recuperado",-1),e("option",{value:"name"},"Nombre (A-Z)",-1)]),512),[[$,g.value]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"dir",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"DirecciÃ³n",-1)),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s),id:"dir",class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},t[7]||(t[7]=[e("option",{value:"desc"},"Descendente",-1),e("option",{value:"asc"},"Ascendente",-1)]),512),[[$,v.value]])])])]),e("div",te,[e("div",se,[_.rows.length===0?(l(),d("div",oe,t[9]||(t[9]=[e("p",null,"No se encontraron gestores con los filtros actuales.",-1)]))):D("",!0),(l(!0),d(y,null,C(_.rows,s=>(l(),d("div",{key:s.id,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg"},[e("div",re,[e("div",ae,[e("img",{src:`https://ui-avatars.com/api/?name=${s.name}&background=random`,alt:"Avatar",class:"h-12 w-12 rounded-full mr-4"},null,8,de),e("div",null,[e("div",le,a(s.name),1),e("div",ie,a(s.email),1)])]),e("div",ne,[e("div",null,[t[10]||(t[10]=e("div",{class:"text-xs text-gray-500"},"Recuperado",-1)),e("div",ce,a(h(s.total_recovered)),1)]),e("div",null,[t[11]||(t[11]=e("div",{class:"text-xs text-gray-500"},"# Casos",-1)),e("div",ue,a(s.casos_count),1)]),e("div",null,[t[12]||(t[12]=e("div",{class:"text-xs text-gray-500"},"# Coops",-1)),e("div",me,a(s.cooperativas_count),1)])]),e("div",ge,[r(p,{onClick:o=>x.value=x.value===s.id?null:s.id},{default:u(()=>[b(a(x.value===s.id?"Ocultar":"Ver Detalle"),1)]),_:2},1032,["onClick"])])]),r(M,{name:"fade"},{default:u(()=>[x.value===s.id?(l(),d("div",ve,[e("div",xe,[e("div",null,[t[13]||(t[13]=e("h3",{class:"font-semibold mb-2 text-gray-800 dark:text-gray-200"},"Casos Asignados",-1)),e("ul",pe,[(l(!0),d(y,null,C(s.cases,o=>{var B;return l(),d("li",{key:o.id,class:"flex justify-between items-center p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700"},[e("div",null,[r(i(I),{href:c.route("casos.show",o.id),class:"font-medium text-indigo-600 hover:underline"},{default:u(()=>[b("Caso #"+a(o.id),1)]),_:2},1032,["href"]),e("span",fe,a(((B=o.cooperativa)==null?void 0:B.name)||"N/A"),1)]),e("span",ye,a(h(o.recovered)),1)])}),128))])]),e("div",null,[t[14]||(t[14]=e("h3",{class:"font-semibold mb-2 text-gray-800 dark:text-gray-200"},"Cooperativas Asignadas",-1)),e("ul",be,[(l(!0),d(y,null,C(s.cooperativas,o=>(l(),d("li",{key:o.id},[r(i(I),{href:c.route("cooperativas.show",o.id),class:"text-indigo-600 hover:underline"},{default:u(()=>[b(a(o.name),1)]),_:2},1032,["href"])]))),128))])])])])):D("",!0)]),_:2},1024)]))),128))])])])])]),_:1})],64)}}},Ie=z(_e,[["__scopeId","data-v-80cb99a8"]]);export{Ie as default};
