import{q as O,r as V,s as p,l as v,c as u,o as c,b as r,u as o,h as J,w as l,a as t,i as h,t as s,n as y,F as T,e as R,x as H,d as K,v as Q,g,B as W,p as E}from"./app-vy-57Nhv.js";import{_ as X}from"./AuthenticatedLayout-9dgdh7FW.js";import{_ as $}from"./Modal-CcE9rne-.js";import{D as Y}from"./DangerButton-BwhA9wEd.js";import{_ as F}from"./SecondaryButton-BLV5g1jk.js";import{_ as b}from"./InputError--M3O5c6A.js";import{_ as k}from"./InputLabel-CuoiynRR.js";import{_ as Z}from"./PrimaryButton-fsUrTFHq.js";import{_ as q}from"./TextInput-CHd6m527.js";import"./ApplicationLogo-jkf0VN9B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const tt={class:"flex justify-between items-center"},et={class:"flex items-center space-x-4"},ot={class:"py-12"},st={class:"max-w-5xl mx-auto sm:px-6 lg:px-8 space-y-8"},at={key:0,class:"mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md shadow-md",role:"alert"},rt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},it={class:"p-6 md:p-8 bg-gray-50 dark:bg-gray-700/50 border-b border-gray-200 dark:border-gray-700"},dt={class:"flex justify-between items-start"},nt={class:"text-3xl font-bold text-gray-900 dark:text-white"},lt={class:"mt-1 text-md text-indigo-600 dark:text-indigo-400 font-semibold"},ct={class:"p-6 md:p-8"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-x-12"},gt={class:"flex flex-col gap-y-8"},mt={class:"mt-2 divide-y divide-gray-200 dark:divide-gray-700"},xt={class:"py-3 flex justify-between text-sm font-medium"},ft={class:"text-gray-900 dark:text-white text-right"},yt={class:"py-3 flex justify-between text-sm font-medium"},pt={class:"text-gray-900 dark:text-white text-right"},vt={class:"py-3 flex justify-between text-sm font-medium"},ht={class:"text-gray-900 dark:text-white text-right"},bt={class:"py-3 flex justify-between text-sm font-medium"},kt={class:"mt-2 divide-y divide-gray-200 dark:divide-gray-700"},_t={class:"py-3 flex justify-between text-sm font-medium"},wt={class:"text-gray-900 dark:text-white text-right"},Ct={class:"py-3 flex justify-between text-sm font-medium"},Dt={class:"text-gray-900 dark:text-white text-right"},jt={class:"py-3 flex justify-between text-sm font-medium"},Vt={class:"text-gray-900 dark:text-white text-right"},Nt={class:"py-3 flex justify-between text-sm font-medium"},St={class:"text-gray-900 dark:text-white text-right"},Tt={class:"flex flex-col gap-y-8 mt-8 md:mt-0"},Et={class:"mt-2 divide-y divide-gray-200 dark:divide-gray-700"},$t={class:"py-3 flex justify-between text-sm font-medium"},Ft={class:"text-gray-900 dark:text-white text-right"},qt={class:"py-3 flex justify-between text-sm font-medium"},zt={class:"text-gray-900 dark:text-white text-right"},Lt={class:"mt-2 divide-y divide-gray-200 dark:divide-gray-700"},Mt={class:"py-3 flex justify-between text-sm font-medium"},Pt={class:"text-gray-900 dark:text-white text-right"},Ut={class:"py-3 flex justify-between text-sm font-medium"},Bt={class:"text-gray-900 dark:text-white text-right"},It={class:"py-3 flex justify-between text-sm font-medium"},At={class:"text-gray-900 dark:text-white text-right"},Gt={class:"py-3 flex justify-between text-sm font-medium"},Ot={class:"text-gray-900 dark:text-white text-right"},Jt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg"},Rt={class:"p-6 md:p-8"},Ht={key:0,class:"text-center py-10 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"},Kt={key:1,class:"overflow-x-auto"},Qt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Wt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Xt={class:"px-6 py-4"},Yt=["title"],Zt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},oe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se=["href"],ae=["onClick"],re={class:"p-6"},ie=["value"],de={class:"mt-6 flex justify-end"},ne={class:"p-6"},le={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},ce={class:"font-medium"},ue={class:"mt-6 flex justify-end"},we={__name:"Show",props:{cooperativa:{type:Object,required:!0},can:{type:Object,required:!0}},setup(a){const m=a,N=O(),_=V(!1),i=p({tipo_documento:"Poder",fecha_expedicion:"",fecha_vencimiento:"",archivo:null}),z=()=>{_.value=!0},w=()=>{_.value=!1,i.reset()},L=()=>{i.post(route("cooperativas.documentos.store",m.cooperativa.id),{preserveScroll:!0,onSuccess:()=>w()})},C=V(!1),x=V(null),M=n=>{x.value=n,C.value=!0},D=()=>{C.value=!1,x.value=null},P=()=>{p({}).delete(route("documentos.destroy",x.value.id),{preserveScroll:!0,onSuccess:()=>D()})},j=n=>{if(!n)return"No especificada";const e=new Date(n),d=e.getTimezoneOffset()*6e4,S=new Date(e.getTime()+d),G={year:"numeric",month:"long",day:"numeric"};return S.toLocaleDateString("es-CO",G)},U=v(()=>m.cooperativa.usa_libranza?"Sí":"No"),B=v(()=>m.cooperativa.requiere_carta_instrucciones?"Sí":"No"),I=v(()=>m.cooperativa.estado_activo?"Activa":"Inactiva"),f=v(()=>{const n=m.cooperativa.documentos;return!n||n.length===0?{text:"Sin Documentos",color:"gray",textColor:"gray"}:n.some(e=>e.status==="vencido")?{text:"Documentación Vencida",color:"red",textColor:"red"}:n.some(e=>e.status==="por_vencer")?{text:"Documentación por Vencer",color:"yellow",textColor:"yellow"}:{text:"Documentación al Día",color:"green",textColor:"green"}}),A={vigente:"bg-green-500",por_vencer:"bg-yellow-500",vencido:"bg-red-500"};return(n,e)=>(c(),u(T,null,[r(o(J),{title:"Ficha de "+a.cooperativa.nombre},null,8,["title"]),r(X,null,{header:l(()=>[t("div",tt,[e[6]||(e[6]=t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Ficha de la Cooperativa ",-1)),t("div",et,[a.can.update?(c(),W(o(E),{key:0,href:n.route("cooperativas.edit",a.cooperativa.id),class:"inline-flex items-center px-4 py-2 bg-gray-800 dark:bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-white dark:text-gray-800 uppercase tracking-widest hover:bg-gray-700 dark:hover:bg-white focus:bg-gray-700 dark:focus:bg-white active:bg-gray-900 dark:active:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},{default:l(()=>e[4]||(e[4]=[g(" Editar Cooperativa ",-1)])),_:1,__:[4]},8,["href"])):h("",!0),r(o(E),{href:n.route("cooperativas.index"),class:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition"},{default:l(()=>e[5]||(e[5]=[g(" ← Volver al Listado ",-1)])),_:1,__:[5]},8,["href"])])])]),default:l(()=>[t("div",ot,[t("div",st,[o(N).props.flash.success?(c(),u("div",at,[e[7]||(e[7]=t("p",{class:"font-bold"},"¡Éxito!",-1)),t("p",null,s(o(N).props.flash.success),1)])):h("",!0),t("div",rt,[t("div",it,[t("div",dt,[t("div",null,[t("h1",nt,s(a.cooperativa.nombre),1),t("p",lt,"NIT: "+s(a.cooperativa.NIT),1)]),t("span",{class:y(`bg-${f.value.color}-100 text-${f.value.color}-800 text-sm font-medium me-2 px-3 py-1.5 rounded-full dark:bg-${f.value.color}-900 dark:text-${f.value.color}-300`)},s(f.value.text),3)])]),t("div",ct,[t("div",ut,[t("div",gt,[t("div",null,[e[12]||(e[12]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 dark:text-gray-400 tracking-wider"},"Información General",-1)),t("dl",mt,[t("div",xt,[e[8]||(e[8]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Vigilancia",-1)),t("dd",ft,s(a.cooperativa.tipo_vigilancia),1)]),t("div",yt,[e[9]||(e[9]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Constitución",-1)),t("dd",pt,s(j(a.cooperativa.fecha_constitucion)),1)]),t("div",vt,[e[10]||(e[10]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Matrícula",-1)),t("dd",ht,s(a.cooperativa.numero_matricula_mercantil||"N/A"),1)]),t("div",bt,[e[11]||(e[11]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Estado",-1)),t("dd",{class:y(["font-bold text-right",a.cooperativa.estado_activo?"text-green-500":"text-red-500"])},s(I.value),3)])])]),t("div",null,[e[17]||(e[17]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 dark:text-gray-400 tracking-wider"},"Políticas de Cobranza",-1)),t("dl",kt,[t("div",_t,[e[13]||(e[13]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"¿Usa Libranza?",-1)),t("dd",wt,s(U.value),1)]),t("div",Ct,[e[14]||(e[14]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"¿Requiere Carta?",-1)),t("dd",Dt,s(B.value),1)]),t("div",jt,[e[15]||(e[15]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Garantía Frecuente",-1)),t("dd",Vt,s(a.cooperativa.tipo_garantia_frecuente),1)]),t("div",Nt,[e[16]||(e[16]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Tasa de Usura",-1)),t("dd",St,s(a.cooperativa.tasa_maxima_moratoria),1)])])])]),t("div",Tt,[t("div",null,[e[20]||(e[20]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 dark:text-gray-400 tracking-wider"},"Representante Legal",-1)),t("dl",Et,[t("div",$t,[e[18]||(e[18]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Nombre",-1)),t("dd",Ft,s(a.cooperativa.representante_legal_nombre),1)]),t("div",qt,[e[19]||(e[19]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Cédula",-1)),t("dd",zt,s(a.cooperativa.representante_legal_cedula),1)])])]),t("div",null,[e[25]||(e[25]=t("h3",{class:"text-sm font-bold uppercase text-gray-500 dark:text-gray-400 tracking-wider"},"Contacto y Notificaciones",-1)),t("dl",Lt,[t("div",Mt,[e[21]||(e[21]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Nombre Contacto",-1)),t("dd",Pt,s(a.cooperativa.contacto_nombre),1)]),t("div",Ut,[e[22]||(e[22]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Teléfono",-1)),t("dd",Bt,s(a.cooperativa.contacto_telefono),1)]),t("div",It,[e[23]||(e[23]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Email Contacto",-1)),t("dd",At,s(a.cooperativa.contacto_correo),1)]),t("div",Gt,[e[24]||(e[24]=t("dt",{class:"text-gray-500 dark:text-gray-400"},"Email Judicial",-1)),t("dd",Ot,s(a.cooperativa.correo_notificaciones_judiciales),1)])])])])])])]),t("div",Jt,[t("div",Rt,[t("div",{class:"flex justify-between items-center mb-6"},[e[26]||(e[26]=t("h3",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Documentos Legales",-1)),t("button",{onClick:z,class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Subir Documento ")]),!a.cooperativa.documentos||a.cooperativa.documentos.length===0?(c(),u("div",Ht,e[27]||(e[27]=[t("p",{class:"text-gray-500 dark:text-gray-400 text-lg"},"No hay documentos para esta cooperativa.",-1),t("p",{class:"text-gray-400 dark:text-gray-500 mt-2"},"¡Sube el primero para empezar a gestionar!",-1)]))):(c(),u("div",Kt,[t("table",Qt,[e[28]||(e[28]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{scope:"col",class:"w-12 px-6 py-3"}),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Tipo de Documento"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Fecha de Expedición"),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Fecha de Vencimiento"),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Acciones")])])],-1)),t("tbody",Wt,[(c(!0),u(T,null,R(a.cooperativa.documentos,d=>(c(),u("tr",{key:d.id,class:"hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors duration-200"},[t("td",Xt,[t("span",{class:y(["h-3 w-3 rounded-full block",A[d.status]]),title:d.status},null,10,Yt)]),t("td",Zt,s(d.tipo_documento),1),t("td",te,s(j(d.fecha_expedicion)),1),t("td",ee,s(j(d.fecha_vencimiento)||"No vence"),1),t("td",oe,[t("a",{href:`/storage/${d.archivo}`,target:"_blank",class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-4"},"Ver",8,se),t("button",{onClick:S=>M(d),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},"Eliminar",8,ae)])]))),128))])])]))])])])]),r($,{show:_.value,onClose:w},{default:l(()=>[t("div",re,[e[32]||(e[32]=t("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Subir Nuevo Documento Legal",-1)),e[33]||(e[33]=t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"Complete la información y seleccione el archivo a subir (PDF, JPG, PNG - Máx 2MB).",-1)),t("form",{onSubmit:H(L,["prevent"]),class:"mt-6 space-y-6"},[t("div",null,[r(k,{for:"tipo_documento",value:"Tipo de Documento"}),K(t("select",{id:"tipo_documento","onUpdate:modelValue":e[0]||(e[0]=d=>o(i).tipo_documento=d),class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm"},e[29]||(e[29]=[t("option",null,"Poder",-1),t("option",null,"Certificado Existencia",-1),t("option",null,"Carta Autorización",-1),t("option",null,"Protocolo Interno",-1)]),512),[[Q,o(i).tipo_documento]]),r(b,{message:o(i).errors.tipo_documento,class:"mt-2"},null,8,["message"])]),t("div",null,[r(k,{for:"fecha_expedicion",value:"Fecha de Expedición"}),r(q,{id:"fecha_expedicion",type:"date",class:"mt-1 block w-full",modelValue:o(i).fecha_expedicion,"onUpdate:modelValue":e[1]||(e[1]=d=>o(i).fecha_expedicion=d),required:""},null,8,["modelValue"]),r(b,{message:o(i).errors.fecha_expedicion,class:"mt-2"},null,8,["message"])]),t("div",null,[r(k,{for:"fecha_vencimiento",value:"Fecha de Vencimiento (Opcional)"}),r(q,{id:"fecha_vencimiento",type:"date",class:"mt-1 block w-full",modelValue:o(i).fecha_vencimiento,"onUpdate:modelValue":e[2]||(e[2]=d=>o(i).fecha_vencimiento=d)},null,8,["modelValue"]),r(b,{message:o(i).errors.fecha_vencimiento,class:"mt-2"},null,8,["message"])]),t("div",null,[r(k,{for:"archivo",value:"Archivo"}),t("input",{id:"archivo",type:"file",onInput:e[3]||(e[3]=d=>o(i).archivo=d.target.files[0]),class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),o(i).progress?(c(),u("progress",{key:0,value:o(i).progress.percentage,max:"100",class:"w-full mt-2"},s(o(i).progress.percentage)+"%",9,ie)):h("",!0),r(b,{message:o(i).errors.archivo,class:"mt-2"},null,8,["message"])]),t("div",de,[r(F,{onClick:w},{default:l(()=>e[30]||(e[30]=[g(" Cancelar ",-1)])),_:1,__:[30]}),r(Z,{class:y(["ms-3",{"opacity-25":o(i).processing}]),disabled:o(i).processing},{default:l(()=>e[31]||(e[31]=[g("Guardar Documento",-1)])),_:1,__:[31]},8,["class","disabled"])])],32)])]),_:1},8,["show"]),r($,{show:C.value,onClose:D},{default:l(()=>[t("div",ne,[e[38]||(e[38]=t("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," ¿Estás seguro de que quieres eliminar este documento? ",-1)),x.value?(c(),u("p",le,[e[34]||(e[34]=g(" Estás a punto de eliminar permanentemente el documento: ",-1)),t("span",ce,s(x.value.tipo_documento),1),e[35]||(e[35]=g(". Esta acción no se puede deshacer. ",-1))])):h("",!0),t("div",ue,[r(F,{onClick:D},{default:l(()=>e[36]||(e[36]=[g(" Cancelar ",-1)])),_:1,__:[36]}),r(Y,{class:y(["ms-3",{"opacity-25":o(p)({}).processing}]),onClick:P,disabled:o(p)({}).processing},{default:l(()=>e[37]||(e[37]=[g(" Sí, Eliminar Documento ",-1)])),_:1,__:[37]},8,["class","disabled"])])])]),_:1},8,["show"])]),_:1})],64))}};export{we as default};
