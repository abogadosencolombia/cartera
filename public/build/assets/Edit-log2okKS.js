import{q as Se,l as F,r as f,s as K,k,c as g,o as b,b as l,u as o,h as we,w as i,a as s,i as h,t as c,x as Ve,g as m,d as N,F as R,e as Q,v as I,p as ie,n as B,B as ne,A as qe}from"./app-JQL7kpkv.js";import{_ as Ee}from"./AuthenticatedLayout-B92UnL5N.js";import{_ as n}from"./InputError-Cp1iGhwd.js";import{_ as u}from"./InputLabel-jQaTK5g0.js";import{_ as Y}from"./PrimaryButton-BZZjGzCv.js";import{_ as W}from"./SecondaryButton-BZnIH0Cw.js";import{D as ue}from"./DangerButton-B5vHJ_xi.js";import{_ as ce}from"./Modal-DRFJQBFO.js";import{_ as C}from"./TextInput-BJeeigo0.js";import{_ as X}from"./Textarea-CRQZ6-id.js";import{_ as ze}from"./Checkbox-DJI6t2PF.js";import{C as w}from"./vue-select-Ctus3jI6.js";import"./ApplicationLogo-B_nlfuyF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const je={class:"flex flex-col md:flex-row items-center justify-between gap-4"},Ue={class:"flex items-center gap-3"},Pe={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},Ae={class:"text-indigo-500"},Be={key:0,class:"px-2 py-0.5 text-xs rounded bg-red-100 text-red-700 font-medium"},Me={class:"flex items-center gap-3"},Te={class:"py-12"},$e={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},De={key:0,class:"bg-yellow-50 dark:bg-gray-800 border-l-4 border-yellow-400 p-4 mb-8 rounded-r-lg"},Oe={class:"flex"},Fe={class:"ml-3"},Ne={key:0,class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},Re={class:"whitespace-pre-wrap"},Ie={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Ye={class:"p-6 md:p-8 text-gray-900 dark:text-gray-100"},Je=["disabled"],Le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ge={class:"md:col-span-2"},He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ze=["value"],Ke=["disabled"],Qe=["value"],We=["value"],Xe={class:"lg:col-span-3"},eo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oo=["disabled"],ao={class:"md:col-span-2"},so={class:"md:col-span-2 rounded-lg border border-gray-200 dark:border-gray-700 p-4 bg-gray-50 dark:bg-gray-900/40"},lo={class:"flex items-start gap-3"},ro={class:"grow"},to={key:0,class:"mt-4"},io={key:0,class:"flex items-center justify-end mt-8 border-t pt-6"},no={class:"p-6"},uo={class:"mt-6"},co={class:"mt-6 flex justify-end gap-3"},mo={class:"p-6"},po={class:"mt-6 flex justify-end gap-3"},jo={__name:"Edit",props:{caso:{type:Object,required:!0},tiposYSubtipos:{type:Array,default:()=>[]},etapas_procesales:{type:Array,default:()=>[]}},setup(v){const d=v,J=Se().props.auth.user,y=F(()=>d.caso.estado_proceso==="cerrado"),V=f(!1),_=K({nota_cierre:""}),me=()=>{_.reset(),V.value=!0},pe=()=>{_.patch(route("casos.close",d.caso.id),{preserveScroll:!0,onSuccess:()=>{V.value=!1,_.reset()}})},q=f(!1),M=K({}),be=()=>q.value=!0,ge=()=>{M.patch(route("casos.reopen",d.caso.id),{preserveScroll:!0,onSuccess:()=>q.value=!1})},T=(t,e=a=>a)=>{const a=f([]),p=f("Escribe para buscar...");let S=null;return{options:a,onSearch:(H,te)=>{if(clearTimeout(S),H.length<3){if(a.value.length>0&&!H)return;a.value=[],p.value="Escribe al menos 3 caracteres...";return}te(!0),p.value="Buscando...",S=setTimeout(()=>{try{const Z=route(t,{q:H});qe.get(Z).then(O=>{if(Array.isArray(O.data)){const de=O.data.map(e).filter(Boolean);a.value=de,p.value=de.length===0?"No se encontraron resultados.":""}else a.value=[],p.value="Error en la respuesta de la API."}).catch(O=>{console.error(`Error buscando en ${t}:`,O),a.value=[],p.value="Ocurrió un error al buscar."}).finally(()=>te(!1))}catch(Z){console.error(`Error de Ziggy: La ruta '${t}' no está definida.`,Z),a.value=[],p.value="Error de configuración en la ruta."}},500)},message:p}},ee=t=>t?{id:t.id,nombre:t.label||t.nombre}:null,ve=t=>t?{id:t.id,name:t.label||t.name}:null,$=t=>{if(!t)return null;if(t.nombre_completo&&t.numero_documento)return t;if(typeof t.label=="string"){const e=t.label.match(/(.*) \((\S+)\)$/);if(e)return{id:t.id,nombre_completo:e[1].trim(),numero_documento:e[2]}}return{id:t.id,nombre_completo:t.label||t.nombre_completo||"Dato no válido",numero_documento:"N/A"}},{options:oe,onSearch:fe,message:_e}=T("cooperativas.search",ee),{options:ae,onSearch:ye,message:ke}=T("users.search",ve),{options:se,onSearch:xe,message:he}=T("juzgados.search",ee),{options:D,onSearch:L,message:G}=T("personas.search",$),r=K({_method:"PATCH",cooperativa_id:d.caso.cooperativa_id,user_id:d.caso.user_id,deudor_id:d.caso.deudor_id,codeudor1_id:d.caso.codeudor1_id,codeudor2_id:d.caso.codeudor2_id,juzgado_id:d.caso.juzgado_id,referencia_credito:d.caso.referencia_credito,tipo_proceso:d.caso.tipo_proceso,estado_proceso:d.caso.estado_proceso,tipo_garantia_asociada:d.caso.tipo_garantia_asociada,fecha_apertura:d.caso.fecha_apertura,fecha_vencimiento:d.caso.fecha_vencimiento,monto_total:d.caso.monto_total,tasa_interes_corriente:d.caso.tasa_interes_corriente,tasa_moratoria:d.caso.tasa_moratoria,origen_documental:d.caso.origen_documental,subtipo_proceso:d.caso.subtipo_proceso||"",etapa_procesal:d.caso.etapa_procesal||"",etapa_actual:d.caso.etapa_actual,bloqueado:!!d.caso.bloqueado,motivo_bloqueo:d.caso.motivo_bloqueo??"",medio_contacto:d.caso.medio_contacto,notas_legales:d.caso.notas_legales}),x=F(()=>d.caso.bloqueado&&J.tipo_usuario!=="admin"||y.value);k(()=>r.bloqueado,t=>{t||(r.motivo_bloqueo="")});const Ce=F(()=>d.tiposYSubtipos.map(t=>t.nombre)),le=F(()=>{if(!r.tipo_proceso)return[];const t=d.tiposYSubtipos.find(e=>e.nombre===r.tipo_proceso);return t&&t.subtipos?t.subtipos.map(e=>e.nombre):[]});k(()=>r.tipo_proceso,(t,e)=>{if(t!==e){const a=d.tiposYSubtipos.find(S=>S.nombre===t);(a&&a.subtipos?a.subtipos.map(S=>S.nombre):[]).includes(r.subtipo_proceso)||(r.subtipo_proceso="")}});const E=f(null),z=f(null),j=f(null),U=f(null),P=f(null),A=f(null);k(E,t=>r.cooperativa_id=(t==null?void 0:t.id)??null),k(z,t=>r.user_id=(t==null?void 0:t.id)??null),k(j,t=>r.deudor_id=(t==null?void 0:t.id)??null),k(U,t=>r.codeudor1_id=(t==null?void 0:t.id)??null),k(P,t=>r.codeudor2_id=(t==null?void 0:t.id)??null),k(A,t=>r.juzgado_id=(t==null?void 0:t.id)??null),(()=>{d.caso.cooperativa&&(E.value={id:d.caso.cooperativa.id,nombre:d.caso.cooperativa.nombre},oe.value=[E.value]),d.caso.user&&(z.value={id:d.caso.user.id,name:d.caso.user.name},ae.value=[z.value]),d.caso.juzgado&&(A.value={id:d.caso.juzgado.id,nombre:d.caso.juzgado.nombre},se.value=[A.value]);const t=[];d.caso.deudor&&(j.value=$(d.caso.deudor),t.push(j.value)),d.caso.codeudor1&&(U.value=$(d.caso.codeudor1),t.push(U.value)),d.caso.codeudor2&&(P.value=$(d.caso.codeudor2),t.push(P.value)),D.value=[...new Map(t.filter(Boolean).map(e=>[e.id,e])).values()]})();const re=()=>{r.patch(route("casos.update",d.caso.id))};return(t,e)=>(b(),g(R,null,[l(o(we),{title:"Editar Caso #"+v.caso.id},null,8,["title"]),l(Ee,null,{header:i(()=>[s("div",je,[s("div",null,[s("div",Ue,[s("h2",Pe,[e[25]||(e[25]=m(" Editando Caso ",-1)),s("span",Ae,"#"+c(v.caso.id),1)]),v.caso.bloqueado?(b(),g("span",Be,"Bloqueado")):h("",!0),s("span",{class:B(["px-2 py-0.5 text-xs rounded font-bold capitalize",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":!y.value,"bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200":y.value}])},c(v.caso.estado_proceso),3)])]),s("div",Me,[l(o(ie),{href:t.route("casos.show",v.caso.id)},{default:i(()=>[l(W,null,{default:i(()=>e[26]||(e[26]=[m("Cancelar",-1)])),_:1,__:[26]})]),_:1},8,["href"]),l(Y,{onClick:re,disabled:o(r).processing||x.value,class:B({"opacity-25":o(r).processing||x.value})},{default:i(()=>e[27]||(e[27]=[m(" Actualizar Caso ",-1)])),_:1,__:[27]},8,["disabled","class"]),y.value?h("",!0):(b(),ne(ue,{key:0,onClick:me},{default:i(()=>e[28]||(e[28]=[m("Cerrar Caso",-1)])),_:1,__:[28]})),y.value?(b(),ne(Y,{key:1,onClick:be,class:"!bg-blue-600 hover:!bg-blue-700 focus:!bg-blue-700 active:!bg-blue-800 focus:!ring-blue-500"},{default:i(()=>e[29]||(e[29]=[m(" Reabrir Caso ",-1)])),_:1,__:[29]})):h("",!0)])])]),default:i(()=>[s("div",Te,[s("div",$e,[y.value?(b(),g("div",De,[s("div",Oe,[e[32]||(e[32]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),s("div",Fe,[e[31]||(e[31]=s("p",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},"Este caso está cerrado.",-1)),v.caso.nota_cierre?(b(),g("div",Ne,[e[30]||(e[30]=s("p",{class:"font-semibold"},"Nota de cierre:",-1)),s("p",Re,c(v.caso.nota_cierre),1)])):h("",!0)])])])):h("",!0),s("div",Ie,[s("div",Ye,[s("form",{onSubmit:Ve(re,["prevent"]),class:"space-y-8"},[s("fieldset",{disabled:x.value,class:"space-y-8"},[s("section",null,[e[33]||(e[33]=s("h3",{class:"text-lg font-medium border-b pb-2 mb-6"},"Partes Involucradas",-1)),s("div",Le,[s("div",null,[l(u,{for:"cooperativa",value:"Cooperativa *"}),l(o(w),{id:"cooperativa",modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=a=>E.value=a),options:o(oe),label:"nombre",placeholder:"Escribe para buscar...",onSearch:o(fe),filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{"no-options":i(()=>[m(c(o(_e)),1)]),_:1},8,["modelValue","options","onSearch"]),l(n,{message:o(r).errors.cooperativa_id,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"abogado",value:"Abogado/Gestor a Cargo *"}),l(o(w),{id:"abogado",modelValue:z.value,"onUpdate:modelValue":e[1]||(e[1]=a=>z.value=a),options:o(ae),label:"name",placeholder:"Escribe para buscar...",onSearch:o(ye),filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{"no-options":i(()=>[m(c(o(ke)),1)]),_:1},8,["modelValue","options","onSearch"]),l(n,{message:o(r).errors.user_id,class:"mt-2"},null,8,["message"])]),s("div",Ge,[l(u,{for:"deudor",value:"Deudor Principal *"}),l(o(w),{id:"deudor",modelValue:j.value,"onUpdate:modelValue":e[2]||(e[2]=a=>j.value=a),options:o(D),label:"nombre_completo",placeholder:"Escribe para buscar...",onSearch:o(L),filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{option:i(({nombre_completo:a,numero_documento:p})=>[s("span",null,c(a)+" ("+c(p)+")",1)]),"no-options":i(()=>[m(c(o(G)),1)]),_:1},8,["modelValue","options","onSearch"]),l(n,{message:o(r).errors.deudor_id,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"codeudor1",value:"Codeudor 1 (Opcional)"}),l(o(w),{id:"codeudor1",modelValue:U.value,"onUpdate:modelValue":e[3]||(e[3]=a=>U.value=a),options:o(D),label:"nombre_completo",placeholder:"Escribe para buscar...",onSearch:o(L),filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{option:i(({nombre_completo:a,numero_documento:p})=>[s("span",null,c(a)+" ("+c(p)+")",1)]),"no-options":i(()=>[m(c(o(G)),1)]),_:1},8,["modelValue","options","onSearch"]),l(n,{message:o(r).errors.codeudor1_id,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"codeudor2",value:"Codeudor 2 (Opcional)"}),l(o(w),{id:"codeudor2",modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=a=>P.value=a),options:o(D),label:"nombre_completo",placeholder:"Escribe para buscar...",onSearch:o(L),filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{option:i(({nombre_completo:a,numero_documento:p})=>[s("span",null,c(a)+" ("+c(p)+")",1)]),"no-options":i(()=>[m(c(o(G)),1)]),_:1},8,["modelValue","options","onSearch"]),l(n,{message:o(r).errors.codeudor2_id,class:"mt-2"},null,8,["message"])])])]),s("section",null,[e[36]||(e[36]=s("h3",{class:"text-lg font-medium border-b pb-2 mb-6"},"Información del Crédito y Proceso",-1)),s("div",He,[s("div",null,[l(u,{for:"referencia_credito",value:"Referencia del Crédito"}),l(C,{modelValue:o(r).referencia_credito,"onUpdate:modelValue":e[5]||(e[5]=a=>o(r).referencia_credito=a),id:"referencia_credito",type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{message:o(r).errors.referencia_credito,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"monto_total",value:"Monto Total *"}),l(C,{modelValue:o(r).monto_total,"onUpdate:modelValue":e[6]||(e[6]=a=>o(r).monto_total=a),id:"monto_total",type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{message:o(r).errors.monto_total,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"tasa_interes_corriente",value:"Tasa Interés Corriente (%)"}),l(C,{modelValue:o(r).tasa_interes_corriente,"onUpdate:modelValue":e[7]||(e[7]=a=>o(r).tasa_interes_corriente=a),id:"tasa_interes_corriente",type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{message:o(r).errors.tasa_interes_corriente,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"tasa_moratoria",value:"Tasa Moratoria (%)"}),l(C,{modelValue:o(r).tasa_moratoria,"onUpdate:modelValue":e[8]||(e[8]=a=>o(r).tasa_moratoria=a),id:"tasa_moratoria",type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{message:o(r).errors.tasa_moratoria,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"fecha_apertura",value:"Fecha de Apertura *"}),l(C,{modelValue:o(r).fecha_apertura,"onUpdate:modelValue":e[9]||(e[9]=a=>o(r).fecha_apertura=a),id:"fecha_apertura",type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{message:o(r).errors.fecha_apertura,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"fecha_vencimiento",value:"Fecha de Vencimiento"}),l(C,{modelValue:o(r).fecha_vencimiento,"onUpdate:modelValue":e[10]||(e[10]=a=>o(r).fecha_vencimiento=a),id:"fecha_vencimiento",type:"date",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{message:o(r).errors.fecha_vencimiento,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"tipo_proceso",value:"Tipo de Proceso *"}),N(s("select",{"onUpdate:modelValue":e[11]||(e[11]=a=>o(r).tipo_proceso=a),id:"tipo_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[(b(!0),g(R,null,Q(Ce.value,a=>(b(),g("option",{key:a,value:a},c(a),9,Ze))),128))],512),[[I,o(r).tipo_proceso]]),l(n,{message:o(r).errors.tipo_proceso,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"subtipo_proceso",value:"Subtipo de Proceso"}),N(s("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>o(r).subtipo_proceso=a),id:"subtipo_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm",disabled:!le.value.length},[e[34]||(e[34]=s("option",{value:""},"-- Seleccione un subtipo --",-1)),(b(!0),g(R,null,Q(le.value,a=>(b(),g("option",{key:a,value:a},c(a),9,Qe))),128))],8,Ke),[[I,o(r).subtipo_proceso]]),l(n,{class:"mt-2",message:o(r).errors.subtipo_proceso},null,8,["message"])]),s("div",null,[l(u,{for:"etapa_procesal",value:"Etapa Procesal"}),N(s("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>o(r).etapa_procesal=a),id:"etapa_procesal",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},[e[35]||(e[35]=s("option",{value:""},"-- Sin especificar --",-1)),(b(!0),g(R,null,Q(v.etapas_procesales,a=>(b(),g("option",{key:a,value:a},c(a),9,We))),128))],512),[[I,o(r).etapa_procesal]]),l(n,{class:"mt-2",message:o(r).errors.etapa_procesal},null,8,["message"])]),s("div",Xe,[l(u,{for:"juzgado",value:"Juzgado"}),l(o(w),{id:"juzgado",modelValue:A.value,"onUpdate:modelValue":e[14]||(e[14]=a=>A.value=a),options:o(se),label:"nombre",placeholder:"Escribe para buscar un juzgado...",onSearch:o(xe),filterable:!1,appendToBody:!0,class:"mt-1 block w-full vue-select-style"},{"no-options":i(()=>[m(c(o(he)),1)]),_:1},8,["modelValue","options","onSearch"]),l(n,{class:"mt-2",message:o(r).errors.juzgado_id},null,8,["message"])])])])],8,Je),s("section",null,[e[39]||(e[39]=s("h3",{class:"text-lg font-medium border-b pb-2 mb-6"},"Estado y Control del Caso",-1)),s("div",eo,[s("div",null,[l(u,{for:"estado_proceso",value:"Estado del Proceso *"}),N(s("select",{"onUpdate:modelValue":e[15]||(e[15]=a=>o(r).estado_proceso=a),id:"estado_proceso",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm",disabled:x.value},e[37]||(e[37]=[s("option",{value:"prejurídico"},"Prejurídico",-1),s("option",{value:"demandado"},"Demandado",-1),s("option",{value:"en ejecución"},"En Ejecución",-1),s("option",{value:"sentencia"},"Sentencia",-1),s("option",{value:"cerrado"},"Cerrado",-1)]),8,oo),[[I,o(r).estado_proceso]]),l(n,{message:o(r).errors.estado_proceso,class:"mt-2"},null,8,["message"])]),s("div",null,[l(u,{for:"etapa_actual",value:"Etapa Actual del Proceso"}),l(C,{modelValue:o(r).etapa_actual,"onUpdate:modelValue":e[16]||(e[16]=a=>o(r).etapa_actual=a),id:"etapa_actual",type:"text",class:"mt-1 block w-full",disabled:x.value},null,8,["modelValue","disabled"]),l(n,{message:o(r).errors.etapa_actual,class:"mt-2"},null,8,["message"])]),s("div",ao,[l(u,{for:"notas_legales",value:"Notas Legales / Internas"}),l(X,{modelValue:o(r).notas_legales,"onUpdate:modelValue":e[17]||(e[17]=a=>o(r).notas_legales=a),id:"notas_legales",class:"mt-1 block w-full",rows:"4",disabled:x.value},null,8,["modelValue","disabled"]),l(n,{message:o(r).errors.notas_legales,class:"mt-2"},null,8,["message"])]),s("div",so,[s("div",lo,[l(ze,{id:"bloqueado",checked:o(r).bloqueado,"onUpdate:checked":e[18]||(e[18]=a=>o(r).bloqueado=a),disabled:o(J).tipo_usuario!=="admin"||y.value},null,8,["checked","disabled"]),s("div",ro,[l(u,{for:"bloqueado",value:"Caso bloqueado"}),e[38]||(e[38]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando está bloqueado solo un administrador puede modificar el caso. ",-1)),l(n,{message:o(r).errors.bloqueado,class:"mt-2"},null,8,["message"])])]),o(r).bloqueado?(b(),g("div",to,[l(u,{for:"motivo_bloqueo",value:"Motivo del bloqueo *"}),l(X,{id:"motivo_bloqueo",modelValue:o(r).motivo_bloqueo,"onUpdate:modelValue":e[19]||(e[19]=a=>o(r).motivo_bloqueo=a),modelModifiers:{trim:!0},class:"mt-1 block w-full resize-y min-h-[96px]",rows:"3",maxlength:"1000",placeholder:"Describe la razón del bloqueo…",disabled:o(J).tipo_usuario!=="admin"||y.value},null,8,["modelValue","disabled"]),l(n,{message:o(r).errors.motivo_bloqueo,class:"mt-2"},null,8,["message"])])):h("",!0)])])]),x.value?h("",!0):(b(),g("div",io,[l(o(ie),{href:t.route("casos.show",v.caso.id),class:"text-sm text-gray-600 hover:underline mr-4"},{default:i(()=>e[40]||(e[40]=[m("Cancelar",-1)])),_:1,__:[40]},8,["href"]),l(Y,{class:B({"opacity-25":o(r).processing}),disabled:o(r).processing},{default:i(()=>e[41]||(e[41]=[m(" Actualizar Caso ",-1)])),_:1,__:[41]},8,["class","disabled"])]))],32)])])])]),l(ce,{show:V.value,onClose:e[22]||(e[22]=a=>V.value=!1)},{default:i(()=>[s("div",no,[e[43]||(e[43]=s("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Cerrar Caso",-1)),e[44]||(e[44]=s("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},' Al cerrar el caso, su estado cambiará a "Cerrado" y se deshabilitará la edición. Por favor, añade una nota de cierre. ',-1)),s("div",uo,[l(u,{for:"nota_cierre",value:"Nota de Cierre *",required:""}),l(X,{modelValue:o(_).nota_cierre,"onUpdate:modelValue":e[20]||(e[20]=a=>o(_).nota_cierre=a),id:"nota_cierre",class:"mt-1 block w-full",rows:"4"},null,8,["modelValue"]),l(n,{message:o(_).errors.nota_cierre,class:"mt-2"},null,8,["message"])]),s("div",co,[l(W,{onClick:e[21]||(e[21]=a=>V.value=!1)},{default:i(()=>e[42]||(e[42]=[m("Cancelar",-1)])),_:1,__:[42]}),l(ue,{onClick:pe,disabled:o(_).processing,class:B({"opacity-25":o(_).processing})},{default:i(()=>[m(c(o(_).processing?"Cerrando...":"Confirmar Cierre"),1)]),_:1},8,["disabled","class"])])])]),_:1},8,["show"]),l(ce,{show:q.value,onClose:e[24]||(e[24]=a=>q.value=!1)},{default:i(()=>[s("div",mo,[e[46]||(e[46]=s("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Reabrir Caso",-1)),e[47]||(e[47]=s("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},' ¿Estás seguro de que quieres reabrir este caso? El estado volverá a "prejurídico" y la nota de cierre será eliminada permanentemente. ',-1)),s("div",po,[l(W,{onClick:e[23]||(e[23]=a=>q.value=!1)},{default:i(()=>e[45]||(e[45]=[m("Cancelar",-1)])),_:1,__:[45]}),l(Y,{onClick:ge,disabled:o(M).processing,class:B([{"opacity-25":o(M).processing},"!bg-blue-600 hover:!bg-blue-700 focus:!bg-blue-700 active:!bg-blue-800 focus:!ring-blue-500"])},{default:i(()=>[m(c(o(M).processing?"Reabriendo...":"Sí, Reabrir"),1)]),_:1},8,["disabled","class"])])])]),_:1},8,["show"])]),_:1})],64))}};export{jo as default};
