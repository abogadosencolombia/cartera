import{q as N,l as A,s as E,c as d,o as n,b as i,u as s,h as $,w as p,a as t,p as S,g as x,x as j,i as g,F as V,e as q,t as y,n as B}from"./app-JQL7kpkv.js";import{_ as F}from"./AuthenticatedLayout-B92UnL5N.js";import{_ as m}from"./InputError-Cp1iGhwd.js";import{_ as u}from"./InputLabel-jQaTK5g0.js";import{_ as P}from"./PrimaryButton-BZZjGzCv.js";import{_ as v}from"./TextInput-BJeeigo0.js";import{_ as k}from"./Checkbox-DJI6t2PF.js";import{_ as w}from"./SelectInput-CkjVAK8_.js";import{s as U}from"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-DHSvIO7u.js";import"./ApplicationLogo-B_nlfuyF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},D={class:"font-bold"},O={class:"py-12"},R={class:"max-w-2xl mx-auto sm:px-6 lg:px-8"},T={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},G={class:"p-6 md:p-8"},L={class:"flex justify-between items-center mb-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},H={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},I={key:0},J={key:1},K={key:2},Q=["value"],W={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},X={class:"mt-4 space-y-3"},Y={class:"flex items-center"},Z={class:"flex items-center"},ee={class:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={class:"block"},oe={class:"flex items-center"},te={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ie={class:"flex items-center justify-end mt-4"},ve={__name:"Edit",props:{user:Object,allCooperativas:Array,allEspecialidades:Array,personas:Array},setup(r){const l=r,C=N().props.auth.user,_=A(()=>l.user.id===C.id),a=E({_method:"patch",name:l.user.name,email:l.user.email,tipo_usuario:l.user.tipo_usuario,estado_activo:l.user.estado_activo,password:"",password_confirmation:"",cooperativas:l.user.cooperativas.map(c=>c.id),especialidades:l.user.especialidades.map(c=>c.id),persona_id:l.user.persona_id,preferencias_notificacion:l.user.preferencias_notificacion||{email:!0,"in-app":!0}}),h=()=>{a.post(route("admin.users.update",l.user.id),{preserveScroll:!0})};return(c,e)=>(n(),d(V,null,[i(s($),{title:"Editar Usuario: "+r.user.name},null,8,["title"]),i(F,null,{header:p(()=>[t("h2",z,[e[11]||(e[11]=x(" Editando Usuario: ",-1)),t("span",D,y(r.user.name),1)])]),default:p(()=>[t("div",O,[t("div",R,[t("div",T,[t("div",G,[t("div",L,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"}," Actualice los datos del usuario ",-1)),i(s(S),{href:c.route("admin.users.index"),class:"text-sm text-gray-600 dark:text-gray-400 hover:underline"},{default:p(()=>e[12]||(e[12]=[x(" ← Volver al listado ",-1)])),_:1,__:[12]},8,["href"])]),t("form",{onSubmit:j(h,["prevent"]),class:"space-y-6"},[t("div",M,[t("div",null,[i(u,{for:"name",value:"Nombre Completo"}),i(v,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s(a).name,"onUpdate:modelValue":e[0]||(e[0]=o=>s(a).name=o),required:""},null,8,["modelValue"]),i(m,{message:s(a).errors.name},null,8,["message"])]),t("div",null,[i(u,{for:"email",value:"Email"}),i(v,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(a).email,"onUpdate:modelValue":e[1]||(e[1]=o=>s(a).email=o),required:""},null,8,["modelValue"]),i(m,{message:s(a).errors.email},null,8,["message"])])]),t("div",null,[i(u,{for:"tipo_usuario",value:"Tipo de Usuario"}),i(w,{modelValue:s(a).tipo_usuario,"onUpdate:modelValue":e[2]||(e[2]=o=>s(a).tipo_usuario=o),id:"tipo_usuario",class:"mt-1 block w-full",disabled:_.value},{default:p(()=>e[14]||(e[14]=[t("option",{value:"admin"},"Administrador",-1),t("option",{value:"abogado"},"Abogado",-1),t("option",{value:"gestor"},"Gestor",-1),t("option",{value:"cliente"},"Cliente",-1)])),_:1,__:[14]},8,["modelValue","disabled"]),_.value?(n(),d("p",H,"No puedes cambiar tu propio rol.")):g("",!0),i(m,{message:s(a).errors.tipo_usuario},null,8,["message"])]),s(a).tipo_usuario==="abogado"||s(a).tipo_usuario==="gestor"?(n(),d("div",I,[i(u,{value:"Especialidad(es)"}),i(s(U),{modelValue:s(a).especialidades,"onUpdate:modelValue":e[3]||(e[3]=o=>s(a).especialidades=o),options:r.allEspecialidades.map(o=>o.id),"custom-label":o=>{var f;return(f=r.allEspecialidades.find(b=>b.id===o))==null?void 0:f.nombre},multiple:!0,placeholder:"Seleccione una o más especialidades"},null,8,["modelValue","options","custom-label"]),i(m,{message:s(a).errors.especialidades},null,8,["message"])])):g("",!0),s(a).tipo_usuario==="abogado"||s(a).tipo_usuario==="gestor"||s(a).tipo_usuario==="cliente"?(n(),d("div",J,[i(u,{value:"Cooperativas Asignadas"}),i(s(U),{modelValue:s(a).cooperativas,"onUpdate:modelValue":e[4]||(e[4]=o=>s(a).cooperativas=o),options:r.allCooperativas.map(o=>o.id),"custom-label":o=>{var f;return(f=r.allCooperativas.find(b=>b.id===o))==null?void 0:f.nombre},multiple:!0,placeholder:"Seleccione una o más cooperativas"},null,8,["modelValue","options","custom-label"]),i(m,{message:s(a).errors.cooperativas},null,8,["message"])])):g("",!0),s(a).tipo_usuario==="cliente"?(n(),d("div",K,[i(u,{for:"persona_id",value:"Persona Asociada a esta Cuenta"}),i(w,{modelValue:s(a).persona_id,"onUpdate:modelValue":e[5]||(e[5]=o=>s(a).persona_id=o),id:"persona_id",class:"mt-1 block w-full"},{default:p(()=>[e[15]||(e[15]=t("option",{value:null},"Ninguna / Desvincular",-1)),(n(!0),d(V,null,q(r.personas,o=>(n(),d("option",{key:o.id,value:o.id},y(o.nombre_completo)+" ("+y(o.numero_documento)+")",9,Q))),128))]),_:1,__:[15]},8,["modelValue"]),i(m,{message:s(a).errors.persona_id,class:"mt-2"},null,8,["message"])])):g("",!0),t("div",W,[e[18]||(e[18]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100"},"Preferencias de Notificación",-1)),t("div",X,[t("label",Y,[i(k,{checked:s(a).preferencias_notificacion["in-app"],"onUpdate:checked":e[6]||(e[6]=o=>s(a).preferencias_notificacion["in-app"]=o)},null,8,["checked"]),e[16]||(e[16]=t("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-300"},"Recibir notificaciones en la aplicación",-1))]),t("label",Z,[i(k,{checked:s(a).preferencias_notificacion.email,"onUpdate:checked":e[7]||(e[7]=o=>s(a).preferencias_notificacion.email=o)},null,8,["checked"]),e[17]||(e[17]=t("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-300"},"Recibir notificaciones por correo",-1))])])]),t("div",ee,[t("div",se,[t("div",null,[i(u,{for:"password",value:"Nueva Contraseña (Opcional)"}),i(v,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:s(a).password,"onUpdate:modelValue":e[8]||(e[8]=o=>s(a).password=o)},null,8,["modelValue"]),i(m,{message:s(a).errors.password},null,8,["message"])]),t("div",null,[i(u,{for:"password_confirmation",value:"Confirmar Nueva Contraseña"}),i(v,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:s(a).password_confirmation,"onUpdate:modelValue":e[9]||(e[9]=o=>s(a).password_confirmation=o)},null,8,["modelValue"])])]),t("div",ae,[t("label",oe,[i(k,{checked:s(a).estado_activo,"onUpdate:checked":e[10]||(e[10]=o=>s(a).estado_activo=o),disabled:_.value},null,8,["checked","disabled"]),e[19]||(e[19]=t("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-300"},"Usuario Activo",-1))]),_.value?(n(),d("p",te,"No puedes desactivar tu propia cuenta.")):g("",!0)])]),t("div",ie,[i(P,{class:B({"opacity-25":s(a).processing}),disabled:s(a).processing},{default:p(()=>e[20]||(e[20]=[x(" Actualizar Usuario ",-1)])),_:1,__:[20]},8,["class","disabled"])])],32)])])])])]),_:1})],64))}};export{ve as default};
