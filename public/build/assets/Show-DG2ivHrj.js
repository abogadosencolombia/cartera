import{c as n,o as r,a as e,r as D,s as z,b as o,i as f,F as A,e as N,t as l,n as C,u as s,w as m,g as i,x as L,B as j,H as je,q as Ne,L as Fe,l as H,h as Oe,d as R,K,v as Ee,M as be,p as le}from"./app-BQ1fBOAU.js";import{a as ve,b as Te,r as Ge,_ as Ie}from"./AuthenticatedLayout-Bawsgd7W.js";import{_ as E}from"./Modal-Bv-J7BHH.js";import{D as _e}from"./DangerButton-DuqT056S.js";import{_ as T}from"./SecondaryButton-CTAXiBUM.js";import{_ as w}from"./InputError-8Zq05OkV.js";import{_ as v}from"./InputLabel-ZJL6u2KB.js";import{_ as S}from"./PrimaryButton-CAb3hnw6.js";import{_ as Q}from"./TextInput-Dq4SX4hN.js";import{_ as de}from"./SelectInput-kk4qG3Ly.js";import{_ as Ue}from"./Checkbox-Dk69yXsU.js";import{_ as ne}from"./Textarea-C1OczT14.js";import{r as ie,a as ze}from"./EyeIcon-C3OGfyw6.js";import{r as he}from"./PencilSquareIcon-BiY1ypOH.js";import{r as ce}from"./ArrowDownTrayIcon-DzRNmmp7.js";import{r as we}from"./LockClosedIcon-90glYth3.js";import{r as Be}from"./FolderOpenIcon-BOeo40ti.js";import{r as W}from"./UserCircleIcon-4CxqZUYO.js";import{r as qe}from"./BellAlertIcon-CneapFEy.js";import{r as He}from"./DocumentDuplicateIcon-BYVKWld3.js";import{r as Re}from"./TrashIcon-gCeNqAER.js";import{r as Le}from"./ClockIcon-46ZbvGy4.js";import"./ApplicationLogo-CLvo8GpJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function Ze(d,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function Xe(d,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function Je(d,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function Ke(d,y){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}const Qe={class:"mt-4 overflow-x-auto"},We={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ye={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},et={key:0},tt={class:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},st={class:"px-4 py-4 whitespace-nowrap"},ot={class:"px-4 py-4 whitespace-nowrap"},at=["title"],rt={class:"px-4 py-4 text-sm text-gray-500 dark:text-gray-400"},lt=["title"],dt={key:1},nt={class:"px-4 py-4 whitespace-nowrap text-center text-sm font-medium space-x-2"},it=["onClick"],ct=["onClick"],ut={class:"p-6"},gt={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},mt={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},pt={class:"font-bold"},xt={class:"flex justify-end space-x-4"},ft={class:"p-6"},yt={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},bt={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},vt={class:"font-bold"},_t={class:"mt-4 max-h-96 overflow-y-auto"},ht={key:0,class:"text-center text-gray-500 py-4"},kt={key:1,class:"relative border-l border-gray-200 dark:border-gray-700 ml-3"},wt={class:"absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900"},Ct={class:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600"},$t={class:"items-center justify-between mb-3 sm:flex"},Dt={class:"mb-1 text-xs font-normal text-gray-400 sm:order-last sm:mb-0"},Vt={class:"text-sm font-normal text-gray-500 lex dark:text-gray-300"},Pt={key:0,class:"font-semibold text-gray-900 dark:text-white"},Mt={class:"font-semibold text-gray-900 dark:text-white"},St={class:"p-3 text-xs italic font-normal text-gray-500 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300"},At={class:"mt-6 flex justify-end"},jt={__name:"CumplimientoLegal",props:{validaciones:Array},setup(d){const y=D(!1),V=D(!1),p=D(null),_=z({accion_correctiva:""}),h=M=>{p.value=M,_.reset(),y.value=!0},x=()=>{y.value=!1,p.value=null},$=()=>{_.put(route("validaciones.corregir",p.value.id),{preserveScroll:!0,onSuccess:()=>x()})},B=M=>{p.value=M,V.value=!0},Z=()=>{V.value=!1,p.value=null},F={poder_vencido:"Poder Vencido",tasa_usura:"Tasa de Usura Excedida",sin_pagare:"Falta Pagaré",sin_carta_instrucciones:"Falta Carta de Instrucciones",sin_certificacion_saldo:"Falta Certificación de Saldo",tipo_proceso_vs_garantia:"Proceso vs. Garantía",plazo_excedido_sin_demanda:"Plazo para Demandar Excedido",documento_faltante_para_radicar:"Docs. Faltantes para Radicar"},O={cumple:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",incumple:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 animate-pulse",no_aplica:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"},Y={alto:"bg-red-200 text-red-900",medio:"bg-yellow-200 text-yellow-900",bajo:"bg-blue-200 text-blue-900"},G=M=>{if(!M)return"N/A";const g={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(M).toLocaleString("es-CO",g)};return(M,g)=>(r(),n("div",null,[g[13]||(g[13]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"🚦 Cumplimiento Legal",-1)),e("div",Qe,[e("table",We,[g[2]||(g[2]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Validación"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Riesgo"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Observación"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acción Correctiva"),e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones")])],-1)),e("tbody",Ye,[!d.validaciones||d.validaciones.length===0?(r(),n("tr",et,g[1]||(g[1]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500"},"No hay validaciones para este caso aún.",-1)]))):f("",!0),(r(!0),n(A,null,N(d.validaciones,c=>(r(),n("tr",{key:c.id},[e("td",tt,l(F[c.tipo]||c.tipo),1),e("td",st,[e("span",{class:C(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",O[c.estado]])},l(c.estado),3)]),e("td",ot,[e("span",{class:C(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full capitalize",Y[c.nivel_riesgo]])},l(c.nivel_riesgo),3)]),e("td",{class:"px-4 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",title:c.observacion},l(c.observacion),9,at),e("td",rt,[c.accion_correctiva?(r(),n("span",{key:0,title:`Corregido el: ${G(c.fecha_cumplimiento)}`},l(c.accion_correctiva),9,lt)):(r(),n("span",dt,"-"))]),e("td",nt,[e("button",{onClick:ee=>B(c),class:"text-gray-500 hover:text-indigo-600",title:"Ver Historial"},[o(s(ie),{class:"h-5 w-5"})],8,it),c.estado==="incumple"?(r(),n("button",{key:0,onClick:ee=>h(c),class:"text-green-500 hover:text-green-700",title:"Corregir Falla"},[o(s(ze),{class:"h-5 w-5"})],8,ct)):f("",!0)])]))),128))])])]),o(E,{show:y.value,onClose:x},{default:m(()=>[e("div",ut,[e("h2",gt,[o(s(he),{class:"h-6 w-6 inline-block mr-2 text-indigo-500"}),g[3]||(g[3]=i(" Registrar Acción Correctiva ",-1))]),p.value?(r(),n("p",mt,[g[4]||(g[4]=i(" Estás corrigiendo la falla: ",-1)),e("span",pt,l(F[p.value.tipo]),1),g[5]||(g[5]=i(". ",-1))])):f("",!0),e("form",{onSubmit:L($,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[o(v,{for:"accion_correctiva",value:"Describe la solución aplicada"}),o(ne,{id:"accion_correctiva",modelValue:s(_).accion_correctiva,"onUpdate:modelValue":g[0]||(g[0]=c=>s(_).accion_correctiva=c),class:"mt-1 block w-full",rows:"4",required:""},null,8,["modelValue"]),o(w,{message:s(_).errors.accion_correctiva,class:"mt-2"},null,8,["message"])]),e("div",xt,[o(T,{onClick:x},{default:m(()=>g[6]||(g[6]=[i("Cancelar",-1)])),_:1,__:[6]}),o(S,{class:C({"opacity-25":s(_).processing}),disabled:s(_).processing},{default:m(()=>g[7]||(g[7]=[i(" Guardar Corrección ",-1)])),_:1,__:[7]},8,["class","disabled"])])],32)])]),_:1},8,["show"]),o(E,{show:V.value,onClose:Z},{default:m(()=>[e("div",ft,[e("h2",yt,[o(s(ie),{class:"h-6 w-6 inline-block mr-2 text-indigo-500"}),g[8]||(g[8]=i(" Historial de la Validación ",-1))]),p.value?(r(),n("p",bt,[g[9]||(g[9]=i(" Mostrando trazabilidad para: ",-1)),e("span",vt,l(F[p.value.tipo]),1),g[10]||(g[10]=i(". ",-1))])):f("",!0),e("div",_t,[!p.value||!p.value.historial||!p.value.historial.length?(r(),n("div",ht,"No hay historial para mostrar.")):(r(),n("ol",kt,[(r(!0),n(A,null,N(p.value.historial,c=>(r(),n("li",{key:c.id,class:"mb-6 ml-6"},[e("span",wt,[o(s(he),{class:"w-3 h-3 text-blue-800 dark:text-blue-300"})]),e("div",Ct,[e("div",$t,[e("time",Dt,l(G(c.created_at)),1),e("div",Vt,[i(l(c.usuario?c.usuario.name:"Sistema")+" cambió el estado ",1),c.estado_anterior?(r(),n("span",Pt,"de '"+l(c.estado_anterior)+"' a",1)):f("",!0),g[11]||(g[11]=i(" a ",-1)),e("span",Mt,"'"+l(c.estado_nuevo)+"'",1)])]),e("div",St,l(c.comentario),1)])]))),128))]))]),e("div",At,[o(T,{onClick:Z},{default:m(()=>g[12]||(g[12]=[i("Cerrar",-1)])),_:1,__:[12]})])])]),_:1},8,["show"])]))}},Nt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Ft={class:"p-6"},Ot={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center"},Et={class:"relative border-l-2 border-gray-200 dark:border-gray-700 ml-3"},Tt={key:0,class:"pl-8 pb-4"},Gt={key:1,class:"space-y-6"},It={class:"flex items-start space-x-4"},Ut={class:"flex-shrink-0 bg-gray-100 dark:bg-gray-700 rounded-full p-2"},zt={class:"text-sm font-semibold text-gray-800 dark:text-gray-200"},Bt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},qt={class:"font-medium"},Ht={class:"text-xs text-gray-400 dark:text-gray-500"},Rt={__name:"HistorialAuditoria",props:{eventos:Array},setup(d){const y=h=>{if(!h)return"N/A";const x={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(h).toLocaleString("es-CO",x)},V={alta:"bg-red-500",media:"bg-yellow-500",baja:"bg-blue-500"},p={LOGIN_EXITOSO:we,DOCUMENTO_DESCARGADO:ce,CUMPLIMIENTO_CORREGIDO:ve,DEFAULT:ie},_=h=>p[h]||p.DEFAULT;return(h,x)=>(r(),n("div",Nt,[e("div",Ft,[e("h3",Ot,[o(s(ve),{class:"h-6 w-6 mr-3 text-gray-400"}),x[0]||(x[0]=i(" Rastro de Auditoría del Caso ",-1))]),e("div",Et,[!d.eventos||d.eventos.length===0?(r(),n("div",Tt,x[1]||(x[1]=[e("p",{class:"text-sm text-gray-500"},"No hay eventos de auditoría registrados para este caso.",-1)]))):(r(),n("ol",Gt,[(r(!0),n(A,null,N(d.eventos,$=>(r(),n("li",{key:$.id,class:"relative pl-8"},[e("span",{class:C(["absolute -left-[7px] top-1 h-3 w-3 rounded-full ring-4 ring-white dark:ring-gray-800",V[$.criticidad]])},null,2),e("div",It,[e("div",Ut,[(r(),j(je(_($.evento)),{class:"h-5 w-5 text-gray-600 dark:text-gray-300"}))]),e("div",null,[e("p",zt,l($.descripcion_breve),1),e("p",Bt,[x[2]||(x[2]=i(" Por ",-1)),e("span",qt,l($.usuario?$.usuario.name:"Sistema"),1),i(" desde la IP "+l($.direccion_ip),1)]),e("time",Ht,l(y($.created_at)),1)])])]))),128))]))])])]))}},Lt={class:"flex flex-col sm:flex-row justify-between sm:items-center gap-4"},Zt={class:"font-semibold text-2xl text-gray-800 dark:text-gray-200 leading-tight"},Xt={class:"text-indigo-500"},Jt={key:0,class:"ml-2 px-2 py-0.5 text-xs rounded bg-red-100 text-red-700 align-middle"},Kt={class:"flex items-center space-x-2 flex-shrink-0"},Qt={class:"py-12"},Wt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Yt={key:0,class:"mb-6 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg shadow-md",role:"status","aria-live":"polite"},es={key:1,class:"mb-6 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg shadow-md",role:"alert"},ts={class:"bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6 mb-8"},ss={class:"flex flex-col md:flex-row justify-between md:items-center gap-4"},os={class:"flex-grow"},as={class:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white"},rs={class:"text-sm text-gray-600 dark:text-gray-300"},ls={class:"flex items-center justify-end flex-wrap gap-4 mt-4 md:mt-0"},ds={class:"text-right"},ns={class:"text-xl font-semibold text-gray-800 dark:text-gray-100"},is={key:0,class:"text-right bg-red-50 dark:bg-red-900/50 p-3 rounded-lg"},cs={class:"text-xl font-bold text-red-700 dark:text-red-200"},us={key:1,class:"text-right"},gs={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md"},ms={class:"border-b border-gray-200 dark:border-gray-700"},ps={class:"-mb-px flex space-x-6 overflow-x-auto px-6","aria-label":"Tabs"},xs={class:"p-6"},fs={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ys={class:"lg:col-span-2 space-y-6"},bs={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},vs={class:"text-lg font-bold mb-4 flex items-center"},_s={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"},hs={class:"font-semibold"},ks={class:"font-semibold capitalize"},ws={class:"font-semibold"},Cs={class:"font-semibold"},$s={class:"md:col-span-2"},Ds={class:"font-semibold"},Vs={class:"font-semibold"},Ps={class:"font-semibold"},Ms={class:"md:col-span-2"},Ss={class:"font-semibold capitalize"},As={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},js={class:"lg:col-span-1 space-y-6"},Ns={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},Fs={class:"space-y-4"},Os={class:"flex items-center"},Es={class:"text-sm"},Ts={class:"flex items-center"},Gs={class:"text-sm"},Is={class:"flex items-center"},Us={class:"text-sm"},zs={class:"flex items-center"},Bs={class:"text-sm"},qs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Hs={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},Rs={class:"flex justify-between items-center mb-4"},Ls={class:"text-lg font-bold flex items-center"},Zs={key:0,class:"text-center py-6 text-gray-500 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"},Xs={key:1,class:"space-y-2"},Js={class:"flex items-center truncate"},Ks={class:"truncate"},Qs=["title"],Ws={class:"text-xs text-gray-500"},Ys={class:"flex items-center space-x-2 flex-shrink-0 ml-4"},eo=["href"],to=["href"],so={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},oo={class:"flex justify-between items-center mb-4"},ao={key:0,class:"text-center py-6 text-gray-500 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"},ro={key:1,class:"space-y-2"},lo={class:"text-sm font-medium text-gray-900 dark:text-white capitalize"},no={class:"text-xs text-gray-500"},io={class:"flex items-center space-x-2"},co=["href"],uo={class:"space-y-6"},go={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},mo={class:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg text-center"},po={class:"text-2xl font-bold"},xo={class:"bg-green-50 dark:bg-green-900/50 p-4 rounded-lg text-center"},fo={class:"text-2xl font-bold text-green-800 dark:text-green-200"},yo={class:"bg-yellow-50 dark:bg-yellow-900/50 p-4 rounded-lg text-center"},bo={class:"text-2xl font-bold text-yellow-800 dark:text-yellow-200"},vo={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},_o={class:"flex justify-between items-center mb-4"},ho={class:"text-lg font-bold flex items-center"},ko={key:0,class:"text-center py-6 text-gray-500 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg"},wo={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},Co={class:"flex-grow"},$o={class:"text-sm font-medium text-green-600 dark:text-green-400"},Do={class:"text-xs text-gray-500 capitalize"},Vo={class:"text-xs text-gray-500"},Po=["href"],Mo={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},So={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},Ao={class:"text-lg font-bold mb-4 flex items-center"},jo={class:"relative border-l-2 border-gray-200 dark:border-gray-700 ml-3 max-h-96 overflow-y-auto pr-2"},No={key:0,class:"pl-8 pb-4"},Fo={key:1,class:"space-y-6"},Oo={class:"text-sm font-semibold text-gray-800 dark:text-gray-200"},Eo={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},To={class:"text-xs text-gray-400 dark:text-gray-500 mt-1.5"},Go={class:"font-medium"},Io={class:"text-xs text-gray-400 dark:text-gray-500"},Uo={class:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg"},zo={class:"p-6"},Bo={key:0,class:"mt-2 w-full bg-gray-200 rounded h-2"},qo={class:"mt-6 flex justify-end"},Ho={class:"p-6"},Ro={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Lo={class:"font-medium"},Zo={class:"mt-6 flex justify-end"},Xo={class:"p-6"},Jo=["value"],Ko={class:"flex items-start"},Qo={class:"flex items-center h-5"},Wo={class:"ml-3 text-sm"},Yo={class:"mt-6 flex justify-end"},ea={class:"p-6"},ta={class:"mt-1 flex items-center justify-center px-6 pt-5 pb-6 border-2 border-gray-300 dark:border-gray-600 border-dashed rounded-md"},sa={class:"space-y-1 text-center"},oa={class:"flex text-sm text-gray-600 dark:text-gray-400"},aa={for:"comprobante_pago_file",class:"relative cursor-pointer bg-white dark:bg-gray-800 rounded-md font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500"},ra={key:0,class:"text-sm font-medium text-green-600 pt-2"},la={key:0,class:"mt-2 w-full bg-gray-200 rounded h-2"},da={class:"mt-6 flex justify-end"},na={class:"p-6"},ia={class:"mt-6 flex justify-end"},ke=5*1024*1024,Fa={__name:"Show",props:{caso:{type:Object,required:!0},can:{type:Object,required:!0},plantillas:{type:Array,default:()=>[]}},setup(d){const y=d,V=Ne(),p=Fe("resumen","casoShowTab:"+y.caso.id),_=D(!1),h=D(null),x=z({tipo_documento:"pagaré",fecha_carga:new Date().toISOString().slice(0,10),archivo:null}),$=()=>{_.value=!0},B=()=>{_.value=!1,h.value=null,x.reset({tipo_documento:"pagaré",fecha_carga:new Date().toISOString().slice(0,10),archivo:null})},Z=()=>{if(x.archivo&&x.archivo.size>ke){x.setError("archivo","Tamaño máximo permitido: 5MB.");return}x.post(route("casos.documentos.store",y.caso.id),{preserveScroll:!0,forceFormData:!0,onProgress:u=>h.value=(u==null?void 0:u.percentage)??null,onSuccess:()=>B(),onFinish:()=>h.value=null})},F=D(!1),O=D(null),Y=u=>{O.value=u,F.value=!0},G=()=>{F.value=!1,O.value=null},M=()=>{z({}).delete(route("documentos-caso.destroy",O.value.id),{preserveScroll:!0,onSuccess:()=>G()})},g=D(!1),c=z({plantilla_id:null,caso_id:y.caso.id,es_confidencial:!1,observaciones:""}),ee=()=>{c.reset(),c.caso_id=y.caso.id,g.value=!0},te=()=>{g.value=!1},Ce=()=>{c.post(route("documentos.generar"),{preserveScroll:!0,onSuccess:()=>te()})},se=D(!1),I=D(null),b=z({monto_pagado:"",fecha_pago:new Date().toISOString().slice(0,10),motivo_pago:"parcial",comprobante_pago:null}),$e=()=>{b.reset({fecha_pago:new Date().toISOString().slice(0,10),motivo_pago:"parcial",comprobante_pago:null}),I.value=null,se.value=!0},oe=()=>{se.value=!1,I.value=null},De=()=>{if(b.comprobante_pago&&b.comprobante_pago.size>ke){b.setError("comprobante_pago","Tamaño máximo permitido: 5MB.");return}b.monto_pagado=J(b.monto_pagado).toFixed(2),b.post(route("casos.pagos.store",y.caso.id),{preserveScroll:!0,forceFormData:!0,onProgress:u=>I.value=(u==null?void 0:u.percentage)??null,onSuccess:()=>oe(),onFinish:()=>I.value=null})},ae=D(!1),k=z({mensaje:"",programado_para:null,prioridad:"media"}),Ve=()=>{k.reset(),ae.value=!0},re=()=>{ae.value=!1},Pe=()=>{k.post(route("casos.notificaciones.store",y.caso.id),{preserveScroll:!0,onSuccess:()=>re()})},ue=u=>{if(!u)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(u)){const[t,a,P]=u.split("-").map(Number);return new Date(t,a-1,P)}return new Date(u)},X=u=>{var t;return((t=ue(u))==null?void 0:t.toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"}))||"No especificada"},Me=u=>{var t;return((t=ue(u))==null?void 0:t.toLocaleString("es-CO",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))||"N/A"},ge={red:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",green:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",blue:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",gray:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},U=H(()=>y.can.update&&!y.caso.bloqueado),me=H(()=>[...y.caso.documentos_generados||[]].sort((u,t)=>new Date(t.created_at)-new Date(u.created_at))),pe=H(()=>[...y.caso.documentos||[]].sort((u,t)=>new Date(t.fecha_carga)-new Date(u.fecha_carga))),J=u=>{let t=String(u??"").trim();if(!t)return 0;t=t.replace(/\s/g,"");const a=t.includes(","),P=t.includes(".");if(a&&P){const ye=t.lastIndexOf(",")>t.lastIndexOf(".")?",":".",Ae=ye===","?".":",";t=t.replace(new RegExp("\\"+Ae,"g"),""),ye===","&&(t=t.replace(",","."))}else a?(t=t.replace(/\./g,""),t=t.replace(",",".")):t=t.replace(/,/g,"");const fe=Number(t);return Number.isFinite(fe)?fe:0},q=u=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(J(u)),xe=H(()=>(y.caso.pagos||[]).reduce((u,t)=>u+J(t.monto_pagado),0)),Se=H(()=>Math.max(0,J(y.caso.monto_total)-xe.value));return(u,t)=>(r(),n(A,null,[o(s(Oe),{title:"Ficha del Caso #"+d.caso.id},null,8,["title"]),o(Ie,null,{header:m(()=>[e("div",Lt,[e("div",null,[o(s(le),{href:u.route("casos.index"),class:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 flex items-center mb-1"},{default:m(()=>t[17]||(t[17]=[i(" ← Volver a Gestión de Casos ",-1)])),_:1,__:[17]},8,["href"]),e("h2",Zt,[t[18]||(t[18]=i(" Ficha del Caso ",-1)),e("span",Xt,"#"+l(d.caso.id),1),d.caso.bloqueado?(r(),n("span",Jt,"Bloqueado")):f("",!0)])]),e("div",Kt,[U.value?(r(),j(s(le),{key:0,href:u.route("casos.clonar",d.caso.id),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none disabled:opacity-25 transition ease-in-out duration-150"},{default:m(()=>t[19]||(t[19]=[i(" Clonar ",-1)])),_:1,__:[19]},8,["href"])):f("",!0),U.value?(r(),j(s(le),{key:1,href:u.route("casos.edit",d.caso.id),class:"inline-flex items-center px-4 py-2 bg-gray-800 dark:bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-white dark:text-gray-800 uppercase tracking-widest hover:bg-gray-700 dark:hover:bg-white focus:bg-gray-700 dark:focus:bg-white active:bg-gray-900 dark:active:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},{default:m(()=>t[20]||(t[20]=[i(" Editar Caso ",-1)])),_:1,__:[20]},8,["href"])):f("",!0)])])]),default:m(()=>[e("div",Qt,[e("div",Wt,[s(V).props.flash.success?(r(),n("div",Yt,[t[21]||(t[21]=e("p",{class:"font-bold"},"Éxito",-1)),e("p",null,l(s(V).props.flash.success),1)])):f("",!0),s(V).props.flash.error?(r(),n("div",es,[t[22]||(t[22]=e("p",{class:"font-bold"},"Error",-1)),e("p",null,l(s(V).props.flash.error),1)])):f("",!0),e("div",ts,[e("div",ss,[e("div",os,[t[23]||(t[23]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"}," Deudor Principal ",-1)),e("h1",as,l(d.caso.deudor?d.caso.deudor.nombre_completo:"No Asignado"),1),e("p",rs,l(d.caso.cooperativa?d.caso.cooperativa.nombre:"N/A"),1)]),e("div",ls,[e("div",ds,[t[24]||(t[24]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Monto Total",-1)),e("p",ns,l(q(d.caso.monto_total)),1)]),d.caso.dias_en_mora>0?(r(),n("div",is,[t[25]||(t[25]=e("p",{class:"text-sm font-medium text-red-600 dark:text-red-300"},"Días en Mora",-1)),e("p",cs,l(d.caso.dias_en_mora),1)])):f("",!0),d.caso.semaforo?(r(),n("div",us,[t[26]||(t[26]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Estado",-1)),e("span",{class:C(["px-3 py-1.5 inline-flex text-sm leading-5 font-semibold rounded-full",ge[d.caso.semaforo.color]||ge.gray])},l(d.caso.semaforo.text),3)])):f("",!0)])])]),e("div",gs,[e("div",ms,[e("nav",ps,[e("button",{onClick:t[0]||(t[0]=a=>p.value="resumen"),class:C([[s(p)==="resumen"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:hover:text-gray-200 dark:hover:border-gray-500"],"flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])},[o(s(Ke),{class:"h-5 w-5 mr-2"}),t[27]||(t[27]=i(" Resumen ",-1))],2),e("button",{onClick:t[1]||(t[1]=a=>p.value="documentos"),class:C([[s(p)==="documentos"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:hover:text-gray-200 dark:hover:border-gray-500"],"flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])},[o(s(Be),{class:"h-5 w-5 mr-2"}),t[28]||(t[28]=i(" Documentos ",-1))],2),e("button",{onClick:t[2]||(t[2]=a=>p.value="financiero"),class:C([[s(p)==="financiero"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:hover:text-gray-200 dark:hover:border-gray-500"],"flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])},[o(s(Je),{class:"h-5 w-5 mr-2"}),t[29]||(t[29]=i(" Financiero ",-1))],2),e("button",{onClick:t[3]||(t[3]=a=>p.value="actividad"),class:C([[s(p)==="actividad"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:hover:text-gray-200 dark:hover:border-gray-500"],"flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"])},[o(s(Xe),{class:"h-5 w-5 mr-2"}),t[30]||(t[30]=i(" Actividad y Logs ",-1))],2)])]),e("div",xs,[R(e("div",fs,[e("div",ys,[e("div",bs,[e("h3",vs,[o(s(Te),{class:"h-6 w-6 mr-2 text-gray-500"}),t[31]||(t[31]=i("Detalles del Proceso ",-1))]),e("dl",_s,[e("div",null,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-500"},"Referencia del Crédito",-1)),e("p",hs,l(d.caso.referencia_credito||"N/A"),1)]),e("div",null,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-500"},"Tipo de Proceso",-1)),e("p",ks,l(d.caso.tipo_proceso),1)]),e("div",null,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-500"},"Subtipo de Proceso",-1)),e("p",ws,l(d.caso.subtipo_proceso||"No especificado"),1)]),e("div",null,[t[35]||(t[35]=e("p",{class:"text-sm text-gray-500"},"Etapa Procesal",-1)),e("p",Cs,l(d.caso.etapa_procesal||"No especificada"),1)]),e("div",$s,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-500"},"Juzgado",-1)),e("p",Ds,l(d.caso.juzgado?d.caso.juzgado.nombre:"No especificado"),1)]),e("div",null,[t[37]||(t[37]=e("p",{class:"text-sm text-gray-500"},"Fecha de Apertura",-1)),e("p",Vs,l(X(d.caso.fecha_apertura)),1)]),e("div",null,[t[38]||(t[38]=e("p",{class:"text-sm text-gray-500"},"Fecha de Vencimiento",-1)),e("p",Ps,l(X(d.caso.fecha_vencimiento)),1)]),e("div",Ms,[t[39]||(t[39]=e("p",{class:"text-sm text-gray-500"},"Tipo de Garantía",-1)),e("p",Ss,l(d.caso.tipo_garantia_asociada),1)])])]),e("div",As,[o(jt,{validaciones:d.caso.validaciones_legales},null,8,["validaciones"])])]),e("div",js,[e("div",Ns,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Partes Involucradas",-1)),e("ul",Fs,[e("li",Os,[o(s(W),{class:"h-6 w-6 mr-3 text-indigo-500"}),e("div",Es,[t[40]||(t[40]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Deudor:",-1)),i(" "+l(d.caso.deudor?d.caso.deudor.nombre_completo:"N/A"),1)])]),e("li",Ts,[o(s(W),{class:"h-6 w-6 mr-3 text-gray-400"}),e("div",Gs,[t[41]||(t[41]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Codeudor 1:",-1)),i(" "+l(d.caso.codeudor1?d.caso.codeudor1.nombre_completo:"No aplica"),1)])]),e("li",Is,[o(s(W),{class:"h-6 w-6 mr-3 text-gray-400"}),e("div",Us,[t[42]||(t[42]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Codeudor 2:",-1)),i(" "+l(d.caso.codeudor2?d.caso.codeudor2.nombre_completo:"No aplica"),1)])]),e("li",zs,[o(s(W),{class:"h-6 w-6 mr-3 text-gray-400"}),e("div",Bs,[t[43]||(t[43]=e("span",{class:"font-medium text-gray-900 dark:text-white"},"Abogado:",-1)),i(" "+l(d.caso.user?d.caso.user.name:"N/A"),1)])])])]),o(S,{onClick:Ve,class:"w-full justify-center"},{default:m(()=>[o(s(qe),{class:"h-5 w-5 mr-2"}),t[45]||(t[45]=i("Programar Alerta ",-1))]),_:1,__:[45]})])],512),[[K,s(p)==="resumen"]]),R(e("div",qs,[e("div",Hs,[e("div",Rs,[e("h3",Ls,[o(s(He),{class:"h-6 w-6 mr-2 text-indigo-500"}),t[46]||(t[46]=i("Documentos Generados ",-1))]),U.value?(r(),j(S,{key:0,onClick:ee,class:"!text-xs"},{default:m(()=>t[47]||(t[47]=[i(" Generar + ",-1)])),_:1,__:[47]})):f("",!0)]),me.value.length?(r(),n("ul",Xs,[(r(!0),n(A,null,N(me.value,a=>{var P;return r(),n("li",{key:a.id,class:"p-3 bg-white dark:bg-gray-800 rounded-md shadow-sm flex items-center justify-between"},[e("div",Js,[a.es_confidencial?(r(),j(s(we),{key:0,class:"h-5 w-5 text-yellow-500 mr-3 flex-shrink-0",title:"Confidencial"})):f("",!0),e("div",Ks,[e("p",{class:"text-sm font-medium text-gray-900 dark:text-white truncate",title:`${a.nombre_base}.docx`},l(a.nombre_base)+".docx ",9,Qs),e("p",Ws," Generado por "+l(((P=a.usuario)==null?void 0:P.name)||"N/A")+" (v"+l(a.version_plantilla)+") ",1)])]),e("div",Ys,[e("a",{href:u.route("documentos.descargar.docx",a.id),class:"text-blue-600 hover:text-blue-800 p-1.5 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50",title:"Descargar .docx","aria-label":"Descargar DOCX"},[o(s(ce),{class:"h-5 w-5"})],8,eo),e("a",{href:u.route("documentos.descargar.pdf",a.id),class:"text-red-600 hover:text-red-800 p-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50",title:"Descargar .pdf","aria-label":"Descargar PDF"},[o(s(ce),{class:"h-5 w-5"})],8,to)])])}),128))])):(r(),n("div",Zs," No hay documentos generados. "))]),e("div",so,[e("div",oo,[t[49]||(t[49]=e("h3",{class:"text-lg font-bold"},"Documentos Adjuntos",-1)),U.value?(r(),j(S,{key:0,onClick:$,class:"!text-xs"},{default:m(()=>t[48]||(t[48]=[i(" Subir + ",-1)])),_:1,__:[48]})):f("",!0)]),pe.value.length?(r(),n("ul",ro,[(r(!0),n(A,null,N(pe.value,a=>(r(),n("li",{key:a.id,class:"p-3 bg-white dark:bg-gray-800 rounded-md shadow-sm flex items-center justify-between"},[e("div",null,[e("p",lo,l(a.tipo_documento),1),e("p",no,"Subido el "+l(X(a.fecha_carga)),1)]),e("div",io,[e("a",{href:u.route("documentos-caso.view",a.id),target:"_blank",class:"inline-flex items-center px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none disabled:opacity-25 transition ease-in-out duration-150"}," Ver ",8,co),U.value?(r(),j(_e,{key:0,onClick:P=>Y(a),class:"!py-2 !text-xs","aria-label":"Eliminar adjunto"},{default:m(()=>[o(s(Re),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):f("",!0)])]))),128))])):(r(),n("div",ao," No hay documentos adjuntos. "))])],512),[[K,s(p)==="documentos"]]),R(e("div",uo,[e("div",go,[e("div",mo,[t[50]||(t[50]=e("p",{class:"text-sm text-gray-500"},"Monto Total",-1)),e("p",po,l(q(d.caso.monto_total)),1)]),e("div",xo,[t[51]||(t[51]=e("p",{class:"text-sm text-green-700 dark:text-green-300"},"Total Pagado",-1)),e("p",fo,l(q(xe.value)),1)]),e("div",yo,[t[52]||(t[52]=e("p",{class:"text-sm text-yellow-700 dark:text-yellow-300"},"Saldo Pendiente",-1)),e("p",bo,l(q(Se.value)),1)])]),e("div",vo,[e("div",_o,[e("h3",ho,[o(s(Ge),{class:"h-6 w-6 mr-2 text-green-500"}),t[53]||(t[53]=i("Historial de Pagos ",-1))]),U.value?(r(),j(S,{key:0,onClick:$e},{default:m(()=>t[54]||(t[54]=[i("Registrar Pago +",-1)])),_:1,__:[54]})):f("",!0)]),!d.caso.pagos||!d.caso.pagos.length?(r(),n("div",ko," No hay pagos registrados para este caso. ")):(r(),n("ul",wo,[(r(!0),n(A,null,N(d.caso.pagos,a=>{var P;return r(),n("li",{key:a.id,class:"py-3 flex flex-wrap items-center justify-between gap-2"},[e("div",Co,[e("p",$o,l(q(a.monto_pagado)),1),e("p",Do," Registrado el "+l(X(a.fecha_pago))+" ("+l(a.motivo_pago)+") ",1),e("p",Vo,"Por: "+l(((P=a.usuario)==null?void 0:P.name)||"N/A"),1)]),a.comprobante_url?(r(),n("a",{key:0,href:a.comprobante_url,target:"_blank",class:"inline-flex items-center px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md font-semibold text-xs text-gray-700 dark:text-gray-300 uppercase tracking-widest shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none disabled:opacity-25 transition ease-in-out duration-150"}," Ver Comprobante ",8,Po)):f("",!0)])}),128))]))])],512),[[K,s(p)==="financiero"]]),R(e("div",Mo,[e("div",So,[e("h3",Ao,[o(s(Le),{class:"h-6 w-6 mr-2 text-gray-500"}),t[55]||(t[55]=i("Bitácora de Actividad ",-1))]),e("div",jo,[!d.caso.bitacoras||!d.caso.bitacoras.length?(r(),n("div",No,t[56]||(t[56]=[e("p",{class:"text-sm text-gray-500"},"No hay actividades.",-1)]))):(r(),n("ol",Fo,[(r(!0),n(A,null,N(d.caso.bitacoras,a=>(r(),n("li",{key:a.id,class:"relative pl-8"},[t[58]||(t[58]=e("div",{class:"absolute -left-[7px] top-1 h-3 w-3 rounded-full bg-indigo-500 ring-4 ring-gray-50 dark:ring-gray-900/50"},null,-1)),e("p",Oo,l(a.accion),1),a.comentario?(r(),n("p",Eo,l(a.comentario),1)):f("",!0),e("p",To,[t[57]||(t[57]=i(" Por ",-1)),e("span",Go,l(a.user?a.user.name:"N/A"),1)]),e("p",Io,l(Me(a.created_at)),1)]))),128))]))])]),e("div",Uo,[o(Rt,{eventos:d.caso.auditoria},null,8,["eventos"])])],512),[[K,s(p)==="actividad"]])])])])]),o(E,{show:_.value,onClose:B},{default:m(()=>[e("div",zo,[t[62]||(t[62]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Subir Nuevo Documento de Prueba ",-1)),e("form",{onSubmit:L(Z,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[o(v,{for:"tipo_documento_upload",value:"Tipo de Documento"}),R(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>s(x).tipo_documento=a),id:"tipo_documento_upload",class:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 rounded-md shadow-sm"},t[59]||(t[59]=[e("option",null,"pagaré",-1),e("option",null,"carta instrucciones",-1),e("option",null,"certificación saldo",-1),e("option",null,"libranza",-1),e("option",null,"cédula deudor",-1),e("option",null,"cédula codeudor",-1),e("option",null,"otros",-1)]),512),[[Ee,s(x).tipo_documento]]),o(w,{message:s(x).errors.tipo_documento,class:"mt-2"},null,8,["message"])]),e("div",null,[o(v,{for:"fecha_carga",value:"Fecha de Carga"}),o(Q,{modelValue:s(x).fecha_carga,"onUpdate:modelValue":t[5]||(t[5]=a=>s(x).fecha_carga=a),id:"fecha_carga",type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(w,{message:s(x).errors.fecha_carga,class:"mt-2"},null,8,["message"])]),e("div",null,[o(v,{for:"archivo_upload",value:"Archivo (Máx 5MB)"}),e("input",{id:"archivo_upload",type:"file",onInput:t[6]||(t[6]=a=>s(x).archivo=a.target.files[0]),class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:".pdf,.doc,.docx,image/*"},null,32),o(w,{message:s(x).errors.archivo,class:"mt-2"},null,8,["message"]),h.value!==null?(r(),n("div",Bo,[e("div",{class:"h-2 rounded bg-indigo-600",style:be({width:h.value+"%"})},null,4)])):f("",!0)]),e("div",qo,[o(T,{onClick:B},{default:m(()=>t[60]||(t[60]=[i("Cancelar",-1)])),_:1,__:[60]}),o(S,{class:C(["ms-3",{"opacity-25":s(x).processing}]),disabled:s(x).processing},{default:m(()=>t[61]||(t[61]=[i(" Guardar Documento ",-1)])),_:1,__:[61]},8,["class","disabled"])])],32)])]),_:1},8,["show"]),o(E,{show:F.value,onClose:G},{default:m(()=>[e("div",Ho,[t[67]||(t[67]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"¿Eliminar Documento de Prueba?",-1)),O.value?(r(),n("p",Ro,[t[63]||(t[63]=i(" ¿Estás seguro de que quieres eliminar permanentemente el documento: ",-1)),e("span",Lo,l(O.value.tipo_documento),1),t[64]||(t[64]=i("? ",-1))])):f("",!0),e("div",Zo,[o(T,{onClick:G},{default:m(()=>t[65]||(t[65]=[i("Cancelar",-1)])),_:1,__:[65]}),o(_e,{class:"ms-3",onClick:M},{default:m(()=>t[66]||(t[66]=[i("Eliminar Documento",-1)])),_:1,__:[66]})])])]),_:1},8,["show"]),o(E,{show:g.value,onClose:te},{default:m(()=>[e("div",Xo,[t[72]||(t[72]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Generar Documento desde Plantilla",-1)),e("form",{onSubmit:L(Ce,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[o(v,{for:"plantilla_id_generate",value:"Plantilla a utilizar"}),o(de,{id:"plantilla_id_generate",class:"mt-1 block w-full",modelValue:s(c).plantilla_id,"onUpdate:modelValue":t[7]||(t[7]=a=>s(c).plantilla_id=a),required:""},{default:m(()=>[t[68]||(t[68]=e("option",{disabled:"",value:null},"-- Seleccione una plantilla --",-1)),(r(!0),n(A,null,N(d.plantillas,a=>(r(),n("option",{key:a.id,value:a.id},l(a.nombre)+" (v"+l(a.version)+") ",9,Jo))),128))]),_:1,__:[68]},8,["modelValue"]),o(w,{class:"mt-2",message:s(c).errors.plantilla_id},null,8,["message"])]),e("div",null,[o(v,{for:"observaciones_generate",value:"Observaciones (Opcional)"}),o(ne,{id:"observaciones_generate",class:"mt-1 block w-full",modelValue:s(c).observaciones,"onUpdate:modelValue":t[8]||(t[8]=a=>s(c).observaciones=a),rows:"3"},null,8,["modelValue"]),o(w,{class:"mt-2",message:s(c).errors.observaciones},null,8,["message"])]),e("div",Ko,[e("div",Qo,[o(Ue,{id:"es_confidencial_generate",checked:s(c).es_confidencial,"onUpdate:checked":t[9]||(t[9]=a=>s(c).es_confidencial=a)},null,8,["checked"])]),e("div",Wo,[o(v,{for:"es_confidencial_generate",value:"Documento Confidencial"}),t[69]||(t[69]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Si se marca, no será visible para usuarios con rol de cliente. ",-1))])]),e("div",Yo,[o(T,{onClick:te},{default:m(()=>t[70]||(t[70]=[i("Cancelar",-1)])),_:1,__:[70]}),o(S,{class:C(["ms-3",{"opacity-25":s(c).processing}]),disabled:s(c).processing},{default:m(()=>t[71]||(t[71]=[i(" Generar Documento ",-1)])),_:1,__:[71]},8,["class","disabled"])])],32)])]),_:1},8,["show"]),o(E,{show:se.value,onClose:oe},{default:m(()=>[e("div",ea,[t[79]||(t[79]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Registrar Nuevo Pago",-1)),e("form",{onSubmit:L(De,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[o(v,{for:"monto_pagado",value:"Monto Pagado *"}),o(Q,{modelValue:s(b).monto_pagado,"onUpdate:modelValue":t[10]||(t[10]=a=>s(b).monto_pagado=a),id:"monto_pagado",type:"number",step:"0.01",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(w,{message:s(b).errors.monto_pagado,class:"mt-2"},null,8,["message"])]),e("div",null,[o(v,{for:"fecha_pago",value:"Fecha del Pago *"}),o(Q,{modelValue:s(b).fecha_pago,"onUpdate:modelValue":t[11]||(t[11]=a=>s(b).fecha_pago=a),id:"fecha_pago",type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(w,{message:s(b).errors.fecha_pago,class:"mt-2"},null,8,["message"])]),e("div",null,[o(v,{for:"motivo_pago",value:"Motivo del Pago *"}),o(de,{modelValue:s(b).motivo_pago,"onUpdate:modelValue":t[12]||(t[12]=a=>s(b).motivo_pago=a),id:"motivo_pago",class:"mt-1 block w-full",required:""},{default:m(()=>t[73]||(t[73]=[e("option",{value:"parcial"},"Pago Parcial",-1),e("option",{value:"acuerdo"},"Pago por Acuerdo",-1),e("option",{value:"sentencia"},"Pago por Sentencia",-1),e("option",{value:"total"},"Pago Total (Cierre de Caso)",-1)])),_:1,__:[73]},8,["modelValue"]),o(w,{message:s(b).errors.motivo_pago,class:"mt-2"},null,8,["message"])]),e("div",null,[o(v,{for:"comprobante_pago",value:"Comprobante de Pago *"}),e("div",ta,[e("div",sa,[o(s(Ze),{class:"mx-auto h-12 w-12 text-gray-400"}),e("div",oa,[e("label",aa,[t[74]||(t[74]=e("span",null,"Sube un archivo",-1)),e("input",{id:"comprobante_pago_file",name:"comprobante_pago",type:"file",class:"sr-only",accept:"image/*",capture:"environment",onInput:t[13]||(t[13]=a=>s(b).comprobante_pago=a.target.files[0]),required:""},null,32)]),t[75]||(t[75]=e("p",{class:"pl-1"},"o arrastra y suelta",-1))]),t[76]||(t[76]=e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"PNG, JPG, GIF hasta 5MB",-1)),s(b).comprobante_pago?(r(),n("p",ra," Archivo seleccionado: "+l(s(b).comprobante_pago.name),1)):f("",!0)])]),o(w,{message:s(b).errors.comprobante_pago,class:"mt-2"},null,8,["message"]),I.value!==null?(r(),n("div",la,[e("div",{class:"h-2 rounded bg-indigo-600",style:be({width:I.value+"%"})},null,4)])):f("",!0)]),e("div",da,[o(T,{onClick:oe},{default:m(()=>t[77]||(t[77]=[i("Cancelar",-1)])),_:1,__:[77]}),o(S,{class:C(["ms-3",{"opacity-25":s(b).processing}]),disabled:s(b).processing},{default:m(()=>t[78]||(t[78]=[i(" Registrar Pago ",-1)])),_:1,__:[78]},8,["class","disabled"])])],32)])]),_:1},8,["show"]),o(E,{show:ae.value,onClose:re},{default:m(()=>[e("div",na,[t[85]||(t[85]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Programar Alerta Manual",-1)),t[86]||(t[86]=e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Cree un recordatorio para usted mismo sobre este caso. La alerta aparecerá en su bandeja de notificaciones. ",-1)),e("form",{onSubmit:L(Pe,["prevent"]),class:"mt-6 space-y-6"},[e("div",null,[o(v,{for:"mensaje_alerta",value:"Mensaje del Recordatorio"}),o(ne,{modelValue:s(k).mensaje,"onUpdate:modelValue":t[14]||(t[14]=a=>s(k).mensaje=a),id:"mensaje_alerta",class:"mt-1 block w-full",required:"",rows:"4"},null,8,["modelValue"]),o(w,{message:s(k).errors.mensaje,class:"mt-2"},null,8,["message"])]),o(v,{for:"prioridad",value:"Prioridad"}),o(de,{id:"prioridad",modelValue:s(k).prioridad,"onUpdate:modelValue":t[15]||(t[15]=a=>s(k).prioridad=a),class:"mt-1 block w-full"},{default:m(()=>t[80]||(t[80]=[e("option",{value:"baja"},"Baja",-1),e("option",{value:"media"},"Media",-1),e("option",{value:"alta"},"Alta",-1)])),_:1,__:[80]},8,["modelValue"]),o(w,{message:s(k).errors.prioridad,class:"mt-2"},null,8,["message"]),e("div",null,[o(v,{for:"programado_para",value:"Fecha de la Alerta (Opcional)"}),o(Q,{modelValue:s(k).programado_para,"onUpdate:modelValue":t[16]||(t[16]=a=>s(k).programado_para=a),id:"programado_para",type:"datetime-local",class:"mt-1 block w-full"},null,8,["modelValue"]),t[81]||(t[81]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Si no selecciona fecha, la alerta se creará inmediatamente. ",-1)),t[82]||(t[82]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Te enviaremos un recordatorio diario hasta esta fecha y hora (zona horaria del sistema). ",-1)),o(w,{message:s(k).errors.programado_para,class:"mt-2"},null,8,["message"])]),e("div",ia,[o(T,{onClick:re},{default:m(()=>t[83]||(t[83]=[i("Cancelar",-1)])),_:1,__:[83]}),o(S,{class:C(["ms-3",{"opacity-25":s(k).processing}]),disabled:s(k).processing},{default:m(()=>t[84]||(t[84]=[i(" Programar Alerta ",-1)])),_:1,__:[84]},8,["class","disabled"])])],32)])]),_:1},8,["show"])]),_:1})],64))}};export{Fa as default};
