import{c as n,o as l,a as e,q as O,r as S,s as j,b as t,u as i,h as P,w as u,t as d,n as b,g as m,F as y,e as A,x as T,i as G,M as H,p as J}from"./app-BQ1fBOAU.js";import{_ as Z}from"./AuthenticatedLayout-Bawsgd7W.js";import{_ as M}from"./Modal-Bv-J7BHH.js";import{_ as p}from"./InputError-8Zq05OkV.js";import{_}from"./InputLabel-ZJL6u2KB.js";import{_ as w}from"./PrimaryButton-CAb3hnw6.js";import{_ as $}from"./SecondaryButton-CTAXiBUM.js";import{_ as N}from"./SelectInput-kk4qG3Ly.js";import{_ as q}from"./Textarea-C1OczT14.js";import{_ as K}from"./Checkbox-Dk69yXsU.js";import{r as Q}from"./CheckBadgeIcon-Dwrzu1bC.js";import"./ApplicationLogo-CLvo8GpJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function W(a,x){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function X(a,x){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})])}function Y(a,x){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"})])}const ee={class:"flex items-center"},se={class:"py-12"},te={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6"},ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},oe={class:"p-6 bg-white border-b border-gray-200"},ae={class:"text-lg font-bold text-gray-900"},ne={class:"mt-2"},le={class:"mt-4 text-sm text-gray-600"},re={class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},de={class:"capitalize"},ce={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ue={class:"p-6 bg-white border-b border-gray-200"},me={class:"flex justify-between items-center"},ge={class:"text-lg font-bold text-gray-900 flex items-center"},fe={key:0,class:"mt-4 text-sm text-gray-500"},ve={key:1,class:"mt-4 space-y-4"},pe={class:"flex justify-between items-start"},_e={class:"font-bold text-gray-800"},xe={class:"text-sm text-gray-500 mt-1"},be={class:"font-semibold"},he={class:"text-xs text-gray-400"},ye={class:"mt-3 text-sm bg-gray-50 p-3 rounded-md"},we={key:0,class:"mt-4 border-t pt-3"},ke={class:"font-bold text-sm text-gray-700 flex items-center"},Ce={class:"text-sm text-gray-600 mt-2"},Ve={class:"text-xs text-gray-500 mt-1"},De={class:"font-semibold"},Se={key:1,class:"mt-4 text-right"},je={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ae={class:"p-6 bg-white border-b border-gray-200"},Te={class:"text-lg font-bold text-gray-900 flex items-center"},$e={class:"mt-1 flex items-center"},qe={key:0,class:"mt-2"},Fe={class:"w-full bg-gray-200 rounded-full h-2.5"},Me={class:"mt-6"},Ne={key:0,class:"mt-2 text-sm text-gray-500"},Re={key:1,class:"mt-2 space-y-2"},Be={class:"truncate"},Ee=["href"],Ie={class:"p-6"},Ue=["value"],ze={class:"flex justify-end"},Le={class:"p-6"},Oe={class:"text-lg font-medium text-gray-900"},Pe={class:"flex items-center"},Ge={class:"flex justify-end"},as={__name:"Show",props:{incidente:Object,usuarios:Array},setup(a){const x=a;O();const k=S(!1),g=j({asignado_a:"",comentarios:""}),R=()=>{k.value=!0},C=()=>{k.value=!1,g.reset()},B=()=>{g.post(route("admin.incidentes-juridicos.tickets.store",x.incidente.id),{preserveScroll:!0,onSuccess:()=>C()})},f=j({archivo:null}),E=()=>{f.post(route("admin.incidentes-juridicos.archivos.store",x.incidente.id),{onSuccess:()=>{f.reset();const c=document.getElementById("archivo_input");c&&(c.value="")}})},V=S(!1),h=S(null),r=j({resultado:"sin_falta",resumen_decision:"",medida_administrativa:"",requiere_capacitacion:!1}),I=c=>{h.value=c,V.value=!0},D=()=>{V.value=!1,h.value=null,r.reset()},U=()=>{r.post(route("admin.tickets-disciplinarios.decision.store",h.value.id),{preserveScroll:!0,onSuccess:()=>D()})},F=c=>{if(!c)return"N/A";const s={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(c).toLocaleDateString("es-CO",s)},z=c=>({pendiente:"bg-yellow-100 text-yellow-800",en_revision:"bg-blue-100 text-blue-800",resuelto:"bg-green-100 text-green-800",archivado:"bg-gray-100 text-gray-800"})[c]||"bg-gray-200",L=c=>({nuevo:"text-blue-600",en_revision:"text-yellow-600",resolucion:"text-purple-600",cerrado:"text-green-600"})[c]||"text-gray-600";return(c,s)=>(l(),n(y,null,[t(i(P),{title:"Detalle Incidente: "+a.incidente.asunto},null,8,["title"]),t(Z,null,{header:u(()=>[e("div",ee,[t(i(J),{href:c.route("admin.incidentes-juridicos.index"),class:"text-gray-500 hover:text-gray-700"},{default:u(()=>[t(i(W),{class:"h-6 w-6"})]),_:1},8,["href"]),s[7]||(s[7]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight ml-4"}," Detalle del Incidente ",-1))])]),default:u(()=>[e("div",se,[e("div",te,[e("div",ie,[e("div",oe,[e("h3",ae,d(a.incidente.asunto),1),e("div",ne,[e("span",{class:b(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",z(a.incidente.estado)])},d(a.incidente.estado?a.incidente.estado.replace("_"," "):"Sin Estado"),3)]),e("p",le,d(a.incidente.descripcion),1),e("div",re,[e("div",null,[s[8]||(s[8]=e("div",{class:"font-bold text-gray-500"},"Responsable",-1)),e("div",null,d(a.incidente.responsable?a.incidente.responsable.name:"N/A"),1)]),e("div",null,[s[9]||(s[9]=e("div",{class:"font-bold text-gray-500"},"Origen del Reporte",-1)),e("div",de,d(a.incidente.origen),1)]),e("div",null,[s[10]||(s[10]=e("div",{class:"font-bold text-gray-500"},"Fecha de Registro",-1)),e("div",null,d(F(a.incidente.fecha_registro)),1)])])])]),e("div",ce,[e("div",ue,[e("div",me,[e("h3",ge,[t(i(Y),{class:"h-6 w-6 mr-2"}),s[11]||(s[11]=m(" Tickets Disciplinarios ",-1))]),t(w,{onClick:R},{default:u(()=>s[12]||(s[12]=[m("Crear Nuevo Ticket",-1)])),_:1,__:[12]})]),a.incidente.tickets.length===0?(l(),n("div",fe," No hay tickets disciplinarios para este incidente. ")):(l(),n("div",ve,[(l(!0),n(y,null,A(a.incidente.tickets,o=>(l(),n("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4"},[e("div",pe,[e("div",null,[e("p",_e,[m(" Ticket #"+d(o.id)+" - ",1),e("span",{class:b(["font-bold capitalize",L(o.etapa)])},d(o.etapa.replace("_"," ")),3)]),e("p",xe,[s[13]||(s[13]=m(" Asignado a: ",-1)),e("span",be,d(o.asignado?o.asignado.name:"N/A"),1)])]),e("p",he,d(F(o.created_at)),1)]),e("p",ye,d(o.comentarios),1),o.decision?(l(),n("div",we,[e("h4",ke,[t(i(Q),{class:"h-5 w-5 mr-1 text-green-600"}),s[14]||(s[14]=m("Decisión Final",-1))]),e("p",Ce,d(o.decision.resumen_decision),1),e("p",Ve,[s[15]||(s[15]=m("Resultado: ",-1)),e("span",De,d(o.decision.resultado.replace("_"," ")),1)])])):(l(),n("div",Se,[t($,{onClick:v=>I(o)},{default:u(()=>s[16]||(s[16]=[m("Registrar Decisión",-1)])),_:2,__:[16]},1032,["onClick"])]))]))),128))]))])]),e("div",je,[e("div",Ae,[e("h3",Te,[t(i(X),{class:"h-6 w-6 mr-2"}),s[17]||(s[17]=m(" Archivos de Evidencia ",-1))]),e("form",{onSubmit:T(E,["prevent"]),class:"mt-4 border-t pt-4"},[t(_,{for:"archivo_input",value:"Adjuntar nuevo archivo"}),e("div",$e,[e("input",{id:"archivo_input",type:"file",onInput:s[0]||(s[0]=o=>i(f).archivo=o.target.files[0]),class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),t(w,{class:b(["ms-4",{"opacity-25":i(f).processing}]),disabled:i(f).processing},{default:u(()=>s[18]||(s[18]=[m(" Subir ",-1)])),_:1,__:[18]},8,["class","disabled"])]),t(p,{message:i(f).errors.archivo,class:"mt-2"},null,8,["message"]),i(f).progress?(l(),n("div",qe,[e("div",Fe,[e("div",{class:"bg-indigo-600 h-2.5 rounded-full",style:H({width:i(f).progress.percentage+"%"})},null,4)])])):G("",!0)],32),e("div",Me,[s[19]||(s[19]=e("h4",{class:"font-bold text-gray-700"},"Archivos Adjuntos:",-1)),a.incidente.archivos.length===0?(l(),n("div",Ne," No hay archivos adjuntos para este incidente. ")):(l(),n("ul",Re,[(l(!0),n(y,null,A(a.incidente.archivos,o=>(l(),n("li",{key:o.id,class:"flex justify-between items-center p-2 bg-gray-50 rounded-md"},[e("span",Be,d(o.nombre_original),1),e("a",{href:c.route("admin.archivos-incidente.descargar",o.id),class:"font-semibold text-indigo-600 hover:text-indigo-800"}," Descargar ",8,Ee)]))),128))]))])])])])]),t(M,{show:k.value,onClose:C},{default:u(()=>[e("div",Ie,[s[23]||(s[23]=e("h2",{class:"text-lg font-medium text-gray-900"}," Crear Nuevo Ticket Disciplinario ",-1)),s[24]||(s[24]=e("p",{class:"mt-1 text-sm text-gray-600"}," Asigne un responsable para la revisión del incidente y añada comentarios iniciales. ",-1)),e("form",{onSubmit:T(B,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[t(_,{for:"asignado_a",value:"Asignar Revisión A"}),t(N,{id:"asignado_a",class:"mt-1 block w-full",modelValue:i(g).asignado_a,"onUpdate:modelValue":s[1]||(s[1]=o=>i(g).asignado_a=o),required:""},{default:u(()=>[s[20]||(s[20]=e("option",{value:"",disabled:""},"-- Seleccione un usuario --",-1)),(l(!0),n(y,null,A(a.usuarios,o=>(l(),n("option",{key:o.id,value:o.id},d(o.name),9,Ue))),128))]),_:1,__:[20]},8,["modelValue"]),t(p,{message:i(g).errors.asignado_a,class:"mt-2"},null,8,["message"])]),e("div",null,[t(_,{for:"comentarios",value:"Comentarios Iniciales"}),t(q,{id:"comentarios",modelValue:i(g).comentarios,"onUpdate:modelValue":s[2]||(s[2]=o=>i(g).comentarios=o),class:"mt-1 block w-full",rows:"4",required:""},null,8,["modelValue"]),t(p,{message:i(g).errors.comentarios,class:"mt-2"},null,8,["message"])]),e("div",ze,[t($,{onClick:C},{default:u(()=>s[21]||(s[21]=[m(" Cancelar ",-1)])),_:1,__:[21]}),t(w,{class:b(["ms-3",{"opacity-25":i(g).processing}]),disabled:i(g).processing},{default:u(()=>s[22]||(s[22]=[m(" Crear Ticket ",-1)])),_:1,__:[22]},8,["class","disabled"])])],32)])]),_:1},8,["show"]),t(M,{show:V.value,onClose:D},{default:u(()=>{var o;return[e("div",Le,[e("h2",Oe," Registrar Decisión Final para Ticket #"+d((o=h.value)==null?void 0:o.id),1),s[29]||(s[29]=e("p",{class:"mt-1 text-sm text-gray-600"}," Este es el veredicto final del comité. Esta acción cerrará el ticket. ",-1)),e("form",{onSubmit:T(U,["prevent"]),class:"mt-6 space-y-4"},[e("div",null,[t(_,{for:"resultado",value:"Resultado del Veredicto"}),t(N,{id:"resultado",class:"mt-1 block w-full",modelValue:i(r).resultado,"onUpdate:modelValue":s[3]||(s[3]=v=>i(r).resultado=v),required:""},{default:u(()=>s[25]||(s[25]=[e("option",{value:"sin_falta"},"Sin Falta",-1),e("option",{value:"falta_leve"},"Falta Leve",-1),e("option",{value:"falta_grave"},"Falta Grave",-1),e("option",{value:"sancionado"},"Sancionado",-1)])),_:1,__:[25]},8,["modelValue"]),t(p,{message:i(r).errors.resultado,class:"mt-2"},null,8,["message"])]),e("div",null,[t(_,{for:"resumen_decision",value:"Resumen y Justificación de la Decisión"}),t(q,{id:"resumen_decision",modelValue:i(r).resumen_decision,"onUpdate:modelValue":s[4]||(s[4]=v=>i(r).resumen_decision=v),class:"mt-1 block w-full",rows:"4",required:""},null,8,["modelValue"]),t(p,{message:i(r).errors.resumen_decision,class:"mt-2"},null,8,["message"])]),e("div",null,[t(_,{for:"medida_administrativa",value:"Medida Administrativa o Pedagógica (Opcional)"}),t(q,{id:"medida_administrativa",modelValue:i(r).medida_administrativa,"onUpdate:modelValue":s[5]||(s[5]=v=>i(r).medida_administrativa=v),class:"mt-1 block w-full",rows:"2"},null,8,["modelValue"]),t(p,{message:i(r).errors.medida_administrativa,class:"mt-2"},null,8,["message"])]),e("div",Pe,[t(K,{id:"requiere_capacitacion",modelValue:i(r).requiere_capacitacion,"onUpdate:modelValue":s[6]||(s[6]=v=>i(r).requiere_capacitacion=v),checked:i(r).requiere_capacitacion},null,8,["modelValue","checked"]),s[26]||(s[26]=e("label",{for:"requiere_capacitacion",class:"ms-2 text-sm text-gray-600"},"¿Requiere capacitación obligatoria?",-1))]),e("div",Ge,[t($,{onClick:D},{default:u(()=>s[27]||(s[27]=[m(" Cancelar ",-1)])),_:1,__:[27]}),t(w,{class:b(["ms-3",{"opacity-25":i(r).processing}]),disabled:i(r).processing},{default:u(()=>s[28]||(s[28]=[m(" Confirmar Decisión y Cerrar Ticket ",-1)])),_:1,__:[28]},8,["class","disabled"])])],32)])]}),_:1},8,["show"])]),_:1})],64))}};export{as as default};
