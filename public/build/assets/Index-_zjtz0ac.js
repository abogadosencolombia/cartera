import{_ as R}from"./AuthenticatedLayout-Bawsgd7W.js";import{_ as Z}from"./Modal-Bv-J7BHH.js";import{D as I}from"./DangerButton-DuqT056S.js";import{_ as P}from"./SecondaryButton-CTAXiBUM.js";import{c as s,o as r,a as e,i as x,g,F as k,e as S,t as d,q as V,r as b,s as N,b as a,u as n,h as z,w as m,p as f,n as U}from"./app-BQ1fBOAU.js";import{r as C}from"./EnvelopeIcon-DA_csiMP.js";import{r as W}from"./TrashIcon-gCeNqAER.js";import"./ApplicationLogo-CLvo8GpJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function $(i,p){return r(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function F(i,p){return r(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}function H(i,p){return r(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function _(i,p){return r(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}const T={key:0,class:"relative"},q={class:"group"},G={class:"absolute z-20 mt-2 w-56 rounded border bg-white shadow"},O={class:"py-1 text-sm"},J=["href"],K={__name:"SocialLinksDropdown",props:{links:{type:Array,default:()=>[]}},setup(i){return(p,u)=>i.links&&i.links.length?(r(),s("div",T,[e("details",q,[u[1]||(u[1]=e("summary",{class:"list-none inline-flex items-center gap-2 px-3 py-1 text-sm border rounded cursor-pointer hover:bg-gray-50"},[g(" Redes "),e("svg",{class:"w-4 h-4 transition-transform group-open:rotate-180",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 011.08 1.04l-4.25 4.25a.75.75 0 01-1.08 0L5.25 8.27a.75.75 0 01-.02-1.06z","clip-rule":"evenodd"})])],-1)),e("div",G,[e("ul",O,[(r(!0),s(k,null,S(i.links,(c,h)=>(r(),s("li",{key:h},[e("a",{href:c.url,target:"_blank",rel:"noopener",class:"block px-3 py-2 hover:bg-gray-50 truncate"},[u[0]||(u[0]=e("span",{class:"text-gray-500 mr-1"},"•",-1)),g(" "+d(c.label||c.url),1)],8,J)]))),128))])])])])):x("",!0)}},Q={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},X={class:"py-10"},Y={class:"mx-auto max-w-7xl space-y-4 sm:px-6 lg:px-8"},ee={key:0,class:"rounded-md border-l-4 border-green-500 bg-green-50 p-4 text-green-800 dark:bg-green-900/30 dark:text-green-100",role:"alert"},te={class:"text-sm"},se={class:"overflow-hidden rounded-xl border border-gray-100 bg-white shadow-sm dark:border-gray-700 dark:bg-gray-800"},re={class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-100 dark:divide-gray-700"},ae={class:"divide-y divide-gray-100 dark:divide-gray-700"},ne={class:"px-6 py-4 whitespace-nowrap"},le={class:"flex items-center gap-3"},ie={class:"h-9 w-9 shrink-0 rounded-full bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-200 grid place-content-center font-semibold"},de={class:"min-w-0"},ce={class:"truncate font-medium text-gray-900 dark:text-white"},ue={class:"truncate text-xs text-gray-500 dark:text-gray-400"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300"},pe={class:"flex flex-col"},xe={key:0,class:"truncate"},he={key:1,class:"truncate"},ye={class:"px-6 py-4 whitespace-nowrap"},fe={class:"flex justify-end items-center gap-1.5 sm:gap-2"},_e=["href"],ke={key:1,class:"rounded-full p-2 text-gray-400",title:"Sin celular"},ve=["onClick"],we={key:3,class:"rounded-full p-2 text-gray-400",title:"Sin correo"},be={class:"flex items-center"},Ce={key:0},$e={key:1,class:"rounded-full p-2 text-gray-400",title:"Sin enlaces sociales"},Se=["onClick"],De={key:0},Ae={colspan:"4",class:"px-6 py-12"},je={class:"text-center text-gray-500 dark:text-gray-400"},Be={class:"mx-auto mb-3 grid h-12 w-12 place-content-center rounded-full bg-gray-100 dark:bg-gray-700"},Ee={class:"p-6"},Le={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},Me={class:"font-semibold"},Re={class:"mt-6 flex justify-end"},He={__name:"Index",props:{personas:Array,can:Object},setup(i){const p=V(),u=b(!1),c=b(null),h=N({}),D=l=>{c.value=l,u.value=!0},A=()=>{h.delete(route("personas.destroy",c.value.id),{preserveScroll:!0,onSuccess:()=>y()})},y=()=>{u.value=!1,c.value=null},j=l=>l?`https://wa.me/57${String(l).replace(/\D/g,"")}`:"#",v=encodeURIComponent("Contacto desde el CRM"),w=encodeURIComponent("Cordial saludo,"),B=l=>`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(l)}&su=${v}&body=${w}`,E=l=>`mailto:${l}?subject=${v}&body=${w}`,L=l=>{if(!l)return;const t=String(l).trim().toLowerCase();window.open(B(t),"_blank","noopener,noreferrer")||(window.location.href=E(t))};return(l,t)=>(r(),s(k,null,[a(n(z),{title:"Directorio de Personas"}),a(R,null,{header:m(()=>[e("div",Q,[t[1]||(t[1]=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Gestión de Personas ",-1)),a(n(f),{href:l.route("personas.create"),class:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white rounded-md shadow transition"},{default:m(()=>[a(n(_),{class:"h-5 w-5"}),t[0]||(t[0]=g(" Registrar Persona ",-1))]),_:1,__:[0]},8,["href"])])]),default:m(()=>[e("div",X,[e("div",Y,[n(p).props.flash.success?(r(),s("div",ee,[t[2]||(t[2]=e("p",{class:"font-semibold"},"¡Éxito!",-1)),e("p",te,d(n(p).props.flash.success),1)])):x("",!0),e("div",se,[t[11]||(t[11]=e("div",{class:"border-b border-gray-100 p-4 dark:border-gray-700 sm:p-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"}," Directorio de Personas "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Accede rápidamente a WhatsApp, correo y redes sociales de cada persona o su información. ")],-1)),e("div",re,[e("table",oe,[t[10]||(t[10]=e("thead",{class:"bg-gray-50/60 dark:bg-gray-700/40"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," Nombre completo "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," Documento "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," Contacto principal "),e("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300"}," Acciones ")])],-1)),e("tbody",ae,[(r(!0),s(k,null,S(i.personas,o=>(r(),s("tr",{key:o.id,class:"hover:bg-gray-50/50 dark:hover:bg-gray-700/30 transition"},[e("td",ne,[e("div",le,[e("div",ie,d((o.nombre_completo||"?")[0]),1),e("div",de,[e("div",ce,d(o.nombre_completo),1),e("div",ue," ID #"+d(o.id),1)])])]),e("td",me,d(o.tipo_documento)+" - "+d(o.numero_documento),1),e("td",ge,[e("div",pe,[o.celular_1?(r(),s("span",xe,d(o.celular_1),1)):x("",!0),o.correo_1?(r(),s("span",he,d(o.correo_1),1)):x("",!0)])]),e("td",ye,[e("div",fe,[o.celular_1?(r(),s("a",{key:0,href:j(o.celular_1),target:"_blank",rel:"noopener",title:"Enviar WhatsApp",class:"rounded-full p-2 text-gray-600 hover:bg-emerald-50 hover:text-emerald-700 dark:text-gray-300 dark:hover:bg-emerald-900/30 dark:hover:text-emerald-200"},[a(n($),{class:"h-5 w-5"}),t[3]||(t[3]=e("span",{class:"sr-only"},"WhatsApp",-1))],8,_e)):(r(),s("span",ke,[a(n($),{class:"h-5 w-5"})])),o.correo_1?(r(),s("button",{key:2,type:"button",onClick:M=>L(o.correo_1),title:"Enviar correo",class:"rounded-full p-2 text-gray-600 hover:bg-sky-50 hover:text-sky-700 dark:text-gray-300 dark:hover:bg-sky-900/30 dark:hover:text-sky-200"},[a(n(C),{class:"h-5 w-5"}),t[4]||(t[4]=e("span",{class:"sr-only"},"Correo",-1))],8,ve)):(r(),s("span",we,[a(n(C),{class:"h-5 w-5"})])),e("div",be,[o.social_links&&o.social_links.length?(r(),s("div",Ce,[a(K,{links:o.social_links},null,8,["links"])])):(r(),s("span",$e,[a(n(F),{class:"h-5 w-5"})]))]),a(n(f),{href:l.route("personas.edit",o.id),title:"Editar",class:"rounded-full p-2 text-blue-600 hover:bg-blue-50 hover:text-blue-700 dark:text-blue-300 dark:hover:bg-blue-900/30 dark:hover:text-blue-200"},{default:m(()=>[a(n(H),{class:"h-5 w-5"}),t[5]||(t[5]=e("span",{class:"sr-only"},"Editar",-1))]),_:2,__:[5]},1032,["href"]),i.can.delete_personas?(r(),s("button",{key:4,onClick:M=>D(o),title:"Eliminar",class:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30 dark:hover:text-red-200"},[a(n(W),{class:"h-5 w-5"}),t[6]||(t[6]=e("span",{class:"sr-only"},"Eliminar",-1))],8,Se)):x("",!0)])])]))),128)),!i.personas||i.personas.length===0?(r(),s("tr",De,[e("td",Ae,[e("div",je,[e("div",Be,[a(n(_),{class:"h-6 w-6"})]),t[8]||(t[8]=e("p",{class:"font-medium"},"Aún no hay personas registradas",-1)),t[9]||(t[9]=e("p",{class:"mt-1 text-sm"}," Crea tu primer contacto para empezar a usar el directorio. ",-1)),a(n(f),{href:l.route("personas.create"),class:"mt-4 inline-flex items-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-white shadow hover:bg-indigo-700 active:bg-indigo-800 transition"},{default:m(()=>[a(n(_),{class:"h-5 w-5"}),t[7]||(t[7]=g(" Registrar Persona ",-1))]),_:1,__:[7]},8,["href"])])])])):x("",!0)])])])])])]),a(Z,{show:u.value,onClose:y},{default:m(()=>[e("div",Ee,[t[16]||(t[16]=e("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," ¿Eliminar esta persona? ",-1)),c.value?(r(),s("p",Le,[t[12]||(t[12]=g(" Se eliminará permanentemente ",-1)),e("span",Me,d(c.value.nombre_completo),1),t[13]||(t[13]=g(". Si está asociada a algún caso (deudor o codeudor), se perderá esa relación. Esta acción no se puede deshacer. ",-1))])):x("",!0),e("div",Re,[a(P,{onClick:y},{default:m(()=>t[14]||(t[14]=[g("Cancelar",-1)])),_:1,__:[14]}),a(I,{class:U(["ms-3",{"opacity-25":n(h).processing}]),disabled:n(h).processing,onClick:A},{default:m(()=>t[15]||(t[15]=[g(" Sí, eliminar ",-1)])),_:1,__:[15]},8,["class","disabled"])])])]),_:1},8,["show"])]),_:1})],64))}};export{He as default};
