import{r as w,k as y,c as l,o as d,b as g,u as m,h as D,w as u,a as t,t as r,i as k,d as _,f as S,v as O,F as C,e as B,p as x,g as v,n as E,M as A,j as P}from"./app-D6fBSztB.js";import{_ as z}from"./AuthenticatedLayout-_MACS7lg.js";import{_ as I}from"./Pagination-CSAILcR0.js";import"./ApplicationLogo-Dh4pLsNN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex items-center justify-between"},H={class:"py-8"},F={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},R={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5 flex items-start gap-4"},L={class:"mt-1 text-2xl font-bold text-emerald-600 dark:text-emerald-400"},U={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5 flex items-start gap-4"},G={class:"mt-1 text-2xl font-bold text-blue-600 dark:text-blue-400"},$={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg p-5 flex items-start gap-4"},J={class:"mt-1 text-2xl font-bold text-gray-600 dark:text-gray-400"},K={class:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg"},Q={class:"p-4 border-b dark:border-gray-700 flex flex-col md:flex-row items-center gap-4"},W={class:"relative w-full md:w-1/2"},X={key:0,class:"divide-y divide-gray-200 dark:divide-gray-700"},Y={class:"flex flex-col md:flex-row items-start md:items-center gap-4"},Z={class:"flex-1"},tt={class:"flex items-center gap-3"},et={class:"text-sm text-gray-500 mt-1"},ot={class:"w-full md:w-1/3"},st={class:"flex justify-between items-center text-sm mb-1"},rt={class:"font-medium text-gray-700 dark:text-gray-300"},at={class:"text-gray-500"},lt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},dt={class:"flex-shrink-0"},nt={key:1,class:"text-center py-16 text-gray-500"},it={key:2,class:"p-4 border-t dark:border-gray-700"},vt={__name:"Index",props:{contratos:{type:Object,default:()=>({data:[]})},filters:{type:Object,default:()=>({q:"",estado:""})},stats:{type:Object,default:()=>({activeValue:0,activeCount:0,closedCount:0})}},setup(a){var p,b;const h=a,n=w(((p=h.filters)==null?void 0:p.q)??""),i=w(((b=h.filters)==null?void 0:b.estado)??""),f=()=>{P.get(route("gestion.honorarios.index"),{q:n.value,estado:i.value},{preserveState:!0,preserveScroll:!0})};y(n,()=>f()),y(i,()=>f());const N=()=>{n.value="",i.value=""},c=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(Number(s||0)),M=s=>s?new Date(s.replace(/-/g,"/")).toLocaleDateString("es-CO",{month:"short",day:"numeric",year:"numeric"}):"N/A",V=s=>{const e=String(s||"").toUpperCase();return e==="CERRADO"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":e==="PAGOS_PENDIENTES"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-300"},j=s=>{const e=Number(s.monto_total||0);if(e===0)return 0;const o=Number(s.total_pagado||0);return Math.min(100,o/e*100)};return(s,e)=>(d(),l(C,null,[g(m(D),{title:"Honorarios · Contratos"}),g(z,null,{header:u(()=>[t("div",T,[e[3]||(e[3]=t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200"},"Centro de Mando · Honorarios",-1)),g(m(x),{href:s.route("honorarios.contratos.create"),class:"inline-flex items-center gap-2 px-4 py-2 rounded-md text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 transition-colors"},{default:u(()=>e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),v(" Nuevo Contrato ",-1)])),_:1,__:[2]},8,["href"])])]),default:u(()=>[t("div",H,[t("div",F,[t("div",q,[t("div",R,[e[5]||(e[5]=t("div",{class:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-emerald-600 dark:text-emerald-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",null,[e[4]||(e[4]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Valor Total Activo",-1)),t("div",L,r(c(a.stats.activeValue)),1)])]),t("div",U,[e[7]||(e[7]=t("div",{class:"bg-blue-100 dark:bg-blue-900/50 p-3 rounded-lg"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-blue-600 dark:text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Contratos Activos",-1)),t("div",G,r(a.stats.activeCount),1)])]),t("div",$,[e[9]||(e[9]=t("div",{class:"bg-gray-100 dark:bg-gray-700 p-3 rounded-lg"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})])],-1)),t("div",null,[e[8]||(e[8]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Contratos Cerrados",-1)),t("div",J,r(a.stats.closedCount),1)])])]),t("div",K,[t("div",Q,[t("div",W,[e[10]||(e[10]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),type:"text",placeholder:"Buscar por ID o nombre de cliente...",class:"w-full pl-10 pr-4 py-2 rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[S,n.value]])]),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),class:"w-full md:w-auto rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-900 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},e[11]||(e[11]=[t("option",{value:""},"Todos los Estados",-1),t("option",{value:"ACTIVO"},"Activo",-1),t("option",{value:"PAGOS_PENDIENTES"},"Pagos Pendientes",-1),t("option",{value:"CERRADO"},"Cerrado",-1)]),512),[[O,i.value]]),n.value||i.value?(d(),l("button",{key:0,onClick:N,class:"text-sm text-gray-500 hover:text-gray-700"},"Limpiar")):k("",!0)]),a.contratos.data.length>0?(d(),l("div",X,[(d(!0),l(C,null,B(a.contratos.data,o=>(d(),l("div",{key:o.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/40 transition-colors"},[t("div",Y,[t("div",Z,[t("div",tt,[g(m(x),{href:s.route("honorarios.contratos.show",o.id),class:"text-indigo-600 dark:text-indigo-400 font-bold hover:underline"},{default:u(()=>[v(r(o.persona_nombre),1)]),_:2},1032,["href"]),t("span",{class:E(["px-2.5 py-0.5 rounded-full text-xs font-semibold",V(o.estado)])},r(o.estado.replace("_"," ")),3)]),t("p",et," Contrato #"+r(o.id)+" · Creado el "+r(M(o.created_at)),1)]),t("div",ot,[t("div",st,[t("span",rt,r(c(o.total_pagado||0)),1),t("span",at,r(c(o.monto_total)),1)]),t("div",lt,[t("div",{class:"bg-emerald-500 h-2 rounded-full",style:A({width:j(o)+"%"})},null,4)])]),t("div",dt,[g(m(x),{href:s.route("honorarios.contratos.show",o.id),class:"px-3 py-1.5 rounded-md text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700"},{default:u(()=>e[12]||(e[12]=[v(" Ver Detalles ",-1)])),_:2,__:[12]},1032,["href"])])])]))),128))])):(d(),l("div",nt,e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),t("h3",{class:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100"},"No se encontraron contratos",-1),t("p",{class:"mt-1 text-sm"},"Intenta ajustar los filtros o crea un nuevo contrato.",-1)]))),a.contratos.data.length>0?(d(),l("div",it,[g(I,{links:a.contratos.links},null,8,["links"])])):k("",!0)])])])]),_:1})],64))}};export{vt as default};
